<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Castile</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://castile.github.io/"/>
  <updated>2020-02-13T02:15:55.146Z</updated>
  <id>https://castile.github.io/</id>
  
  <author>
    <name>æœ±å®æ¢</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å¼€æºæ•°æ®é›†</title>
    <link href="https://castile.github.io/2020/02/13/%E5%BC%80%E6%BA%90%E6%95%B0%E6%8D%AE%E9%9B%86/"/>
    <id>https://castile.github.io/2020/02/13/%E5%BC%80%E6%BA%90%E6%95%B0%E6%8D%AE%E9%9B%86/</id>
    <published>2020-02-13T02:11:42.000Z</published>
    <updated>2020-02-13T02:15:55.146Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="å¼€æºæ•°æ®é›†"><a class="markdownIt-Anchor" href="#å¼€æºæ•°æ®é›†"></a> å¼€æºæ•°æ®é›†</h1><p>[toc]</p><h1 id="images-analysis"><a class="markdownIt-Anchor" href="#images-analysis"></a> Images Analysis</h1><table><thead><tr><th style="text-align:center">æ•°æ®é›†</th><th style="text-align:center">ä»‹ç»</th><th style="text-align:center">å¤‡æ³¨</th><th>ç½‘å€</th></tr></thead><tbody><tr><td style="text-align:center">Flickr30k</td><td style="text-align:center">å›¾ç‰‡æè¿°</td><td style="text-align:center">31,783 imagesï¼Œæ¯å¼ å›¾ç‰‡5ä¸ªè¯­å¥æ ‡æ³¨</td><td><a href="http://web.engr.illinois.edu/~bplumme2/Flickr30kEntities/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td style="text-align:center">Microsoft COCO</td><td style="text-align:center">å›¾ç‰‡æè¿°</td><td style="text-align:center">330,000 images,æ¯å¼ å›¾ç‰‡è‡³å°‘5ä¸ªè¯­å¥æ ‡æ³¨</td><td><a href="http://cocodataset.org/#download" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td style="text-align:center">ESP Game</td><td style="text-align:center">å¤šæ ‡ç­¾å®šä¹‰å›¾åƒ</td><td style="text-align:center">20,770 imagesï¼Œ268 tagsï¼Œè¯¸å¦‚bed, light man,music</td><td><a href="https://www.kaggle.com/c/challenges-in-representation-learning-multi-modal-learning/data" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td style="text-align:center">IAPRTC-12</td><td style="text-align:center">å¤šæ ‡ç­¾å®šä¹‰å›¾åƒ</td><td style="text-align:center">19,452 images,291 tags</td><td><a href="http://www.imageclef.org/photodata" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td style="text-align:center">NUS-WIDE</td><td style="text-align:center">å¤šæ ‡ç­¾å®šä¹‰å›¾åƒ</td><td style="text-align:center">269,648 images,several tags (2-5 on average) per image</td><td><a href="http://lms.comp.nus.edu.sg/research/NUS-WIDE.htm" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td style="text-align:center">CUHK-PEDES</td><td style="text-align:center">ä»¥æ–‡æœå›¾</td><td style="text-align:center">34,054 imagesï¼Œæ¯å¼ å›¾ç‰‡2æ¡æè¿°</td><td><a href="http://cuhk-pedes.shuanglee.me/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td style="text-align:center">VRD</td><td style="text-align:center">è§†è§‰å…³ç³»æ£€æµ‹</td><td style="text-align:center">5,000 images, 100ç›®å½•ï¼Œ37,993å¯¹å…³ç³»</td><td><a href="https://cs.stanford.edu/people/ranjaykrishna/vrd/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td style="text-align:center">sVG</td><td style="text-align:center">è§†è§‰å…³ç³»æ£€æµ‹</td><td style="text-align:center">108,000 images, 998,000å¯¹å…³ç³»</td><td><a href="https://drive.google.com/file/d/0B5RJWjAhdT04SXRfVHBKZ0dOTzQ/view" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td style="text-align:center">Visual Genome Dataset</td><td style="text-align:center">å›¾åƒå±æ€§æ£€æµ‹</td><td style="text-align:center">108,077 images, 5.4 M åŒºåŸŸå—ï¼Œ2.8 M å±æ€§ï¼Œ2.3 M å…³ç³»</td><td><a href="https://visualgenome.org/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td style="text-align:center">VQA</td><td style="text-align:center">é—®ç­”ç³»ç»Ÿ</td><td style="text-align:center">1,105,904é—®é¢˜ï¼Œ11,059,040 å›ç­”</td><td><a href="http://www.visualqa.org/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td style="text-align:center">Visual7W</td><td style="text-align:center">é—®ç­”ç³»ç»Ÿ</td><td style="text-align:center">327,939 é—®ç­”å¯¹</td><td><a href="http://web.stanford.edu/~yukez/visual7w/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td style="text-align:center">TID2013</td><td style="text-align:center">å›¾åƒè´¨é‡è¯„ä»·</td><td style="text-align:center">25å¼ å‚è€ƒå›¾åƒï¼Œ24ä¸ªå¤±çœŸç±»å‹</td><td><a href="http://www.ponomarenko.info/tid2013.htm" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td style="text-align:center">CSIQ</td><td style="text-align:center">å›¾åƒè´¨é‡è¯„ä»·</td><td style="text-align:center">30å¼ å‚è€ƒå›¾åƒï¼Œ6ä¸ªå¤±çœŸç±»å‹</td><td><a href="http://vision.eng.shizuoka.ac.jp/mod/page/view.php?id=23" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td style="text-align:center">LIVE</td><td style="text-align:center">å›¾åƒè´¨é‡è¯„ä»·</td><td style="text-align:center">29å¼ å‚è€ƒå›¾åƒï¼Œ5ä¸ªå¤±çœŸç±»å‹</td><td><a href="http://live.ece.utexas.edu/research/quality/subjective.htm" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td style="text-align:center">WATERLOO</td><td style="text-align:center">å›¾åƒè´¨é‡è¯„ä»·</td><td style="text-align:center">4744å¼ å‚è€ƒå›¾åƒï¼Œ20ä¸ªå¤±çœŸç±»å‹</td><td><a href="https://ece.uwaterloo.ca/~k29ma/exploration/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td style="text-align:center"><a href="http://photo.net" target="_blank" rel="noopener">photo.net</a></td><td style="text-align:center">å›¾åƒç¾è§‚è¯„ä»·</td><td style="text-align:center">20,278å¼ å›¾åƒï¼Œæ‰“åˆ†[0,10]</td><td><a href="http://ritendra.weebly.com/aesthetics-datasets.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td style="text-align:center"><a href="http://DPChallenge.com" target="_blank" rel="noopener">DPChallenge.com</a></td><td style="text-align:center">å›¾åƒç¾è§‚è¯„ä»·</td><td style="text-align:center">16,509å¼ å›¾åƒï¼Œæ‰“åˆ†[0,10]</td><td><a href="http://ritendra.weebly.com/aesthetics-datasets.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td style="text-align:center">CUHK</td><td style="text-align:center">å›¾åƒç¾è§‚è¯„ä»·</td><td style="text-align:center">28,410å¼ å›¾åƒï¼Œåªåˆ†é«˜è´¨é‡å’Œä½è´¨é‡</td><td><a href="http://mmlab.ie.cuhk.edu.hk/archive/CUHKPQ/Dataset.htm" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td style="text-align:center">AVA</td><td style="text-align:center">å›¾åƒç¾è§‚è¯„ä»·</td><td style="text-align:center">255,500å¼ å›¾åƒï¼Œæ‰“åˆ†[0,10]</td><td><a href="https://github.com/mtobeiyf/ava_downloader" target="_blank" rel="noopener">é“¾æ¥</a></td></tr></tbody></table><p><a href="#%E5%BC%80%E6%BA%90%E6%95%B0%E6%8D%AE%E9%9B%86">top</a></p><h1 id="image-motion-tracking"><a class="markdownIt-Anchor" href="#image-motion-tracking"></a> Image Motion &amp; Tracking</h1><table><thead><tr><th>æ•°æ®é›†</th><th>ä»‹ç»</th><th>å¤‡æ³¨</th><th>ç½‘å€</th></tr></thead><tbody><tr><td>CUHK03</td><td>Person re-identification(äººé‡è¯†åˆ«)</td><td>image num:13164 person num:1360 camera num:10( 5 pairs)</td><td><a href="http://www.ee.cuhk.edu.hk/~xgwang/CUHK_identification.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>CUHK02</td><td>Person re-identification(äººé‡è¯†åˆ«)</td><td>image num:7264 person num:1816 camera num:10( 5 pairs)</td><td><a href="http://www.ee.cuhk.edu.hk/~xgwang/CUHK_identification.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>CUHK01</td><td>Person re-identification(äººé‡è¯†åˆ«)</td><td>image num:3884 person num:971 camera num: 2</td><td><a href="http://www.ee.cuhk.edu.hk/~xgwang/CUHK_identification.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>VIPeR</td><td>Person re-identification(äººé‡è¯†åˆ«)</td><td>image num:1264 person num:632 camera num:2</td><td><a href="https://vision.soe.ucsc.edu/node/178" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>ETH1,2,3</td><td>Person re-identification(äººé‡è¯†åˆ«)</td><td>image num:8580 person num:83,35,28 camera num:1</td><td><a href="http://homepages.dcc.ufmg.br/~william/datasets.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>PRID2011</td><td>Person re-identification(äººé‡è¯†åˆ«)</td><td>image num:24541 person num:934 camera num:2</td><td><a href="https://www.tugraz.at/institute/icg/research/team-bischof/lrs/downloads/PRID11/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>MARS</td><td>Person re-identification(äººé‡è¯†åˆ«)</td><td>image num:11910031 person num:1261 camera num:6</td><td><a href="http://www.liangzheng.com.cn/Project/project_mars.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Market1501</td><td>Person re-identification(äººé‡è¯†åˆ«)</td><td>image num:32217 person num:1501 camera num:6</td><td><a href="http://www.liangzheng.org/Project/project_reid.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Epic Fail (EF) dataset</td><td>Risk Assessment(é£é™©è¯„ä¼°)</td><td>video num:3000</td><td><a href="https://vision.soe.ucsc.edu/?q=node/178" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Street Accident (SA) dataset</td><td>Risk Assessment(é£é™©è¯„ä¼°)</td><td>video num:1733</td><td><a href="https://vision.soe.ucsc.edu/?q=node/178" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>OTB-50</td><td>visual tracking(è·Ÿè¸ª)</td><td>video num:50</td><td><a href="http://www.visual-tracking.net/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>OTB-100</td><td>visual tracking(è·Ÿè¸ª)</td><td>video num:100</td><td><a href="http://www.visual-tracking.net/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>VOT2015</td><td>visual tracking(è·Ÿè¸ª)</td><td>video num:60</td><td><a href="http://www.votchallenge.net/vot2015/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>ALOV300</td><td>visual tracking(è·Ÿè¸ª)</td><td>video num:314</td><td><a href="http://alov300pp.joomlafree.it/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>MOT</td><td>visual tracking(è·Ÿè¸ª)</td><td>video numğŸš‹11 test:11</td><td><a href="https://motchallenge.net/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>THUMOS</td><td>Temporal action localization(åŠ¨ä½œå®šä½)</td><td>video num:~3K activities class:20 instances:~3K</td><td><a href="http://crcv.ucf.edu/THUMOS14/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>ActivityNet</td><td>Temporal action localization(åŠ¨ä½œå®šä½)</td><td>video num:20k activities class:200 instances:7.6K</td><td><a href="http://activity-net.org/challenges/2016/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Mexaction2</td><td>Temporal action localization(åŠ¨ä½œå®šä½)</td><td>activities class:2 instances:1975</td><td><a href="http://mexculture.cnam.fr/xwiki/bin/view/Datasets/Mex+action+dataset" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>FlyingChairs dataset</td><td>optical flow(å…‰æµ)</td><td>image pairsï¼š22k</td><td><a href="https://lmb.informatik.uni-freiburg.de/resources/datasets/FlyingChairs.en.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>FlyingThings3D</td><td>optical flow(å…‰æµ)</td><td>image pairsï¼š22k</td><td><a href="https://lmb.informatik.uni-freiburg.de/resources/datasets/SceneFlowDatasets.en.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>KITTI benchmark suite</td><td>optical flow(å…‰æµ)</td><td>image pairsï¼š1600</td><td><a href="http://www.cvlibs.net/datasets/kitti/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>MPI Sintel</td><td>optical flow(å…‰æµ)</td><td>image pairsï¼š1064</td><td><a href="http://sintel.is.tue.mpg.de/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr></tbody></table><h1 id="video-analysis-scene-understanding"><a class="markdownIt-Anchor" href="#video-analysis-scene-understanding"></a> Video Analysis &amp; Scene Understanding</h1><table><thead><tr><th>æ•°æ®é›†</th><th>ä»‹ç»</th><th>å¤‡æ³¨</th><th>ç½‘å€</th></tr></thead><tbody><tr><td>UCF101</td><td>åŠ¨ä½œè¡Œä¸ºè¯†åˆ«</td><td>13320 video,101ç±»åŠ¨ä½œï¼Œä¸»è¦æ˜¯äº”å¤§ç±»ï¼š1)äºº-ç‰©äº¤äº’ï¼›2)è‚¢ä½“è¿åŠ¨ï¼›3)äºº-äººäº¤äº’ï¼›4)å¼¹å¥ä¹å™¨ï¼›5)è¿åŠ¨</td><td><a href="http://crcv.ucf.edu/data/UCF101.php" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>HMDB51</td><td>åŠ¨ä½œè¡Œä¸ºè¯†åˆ«</td><td>7000 videos,51ç±»ï¼ŒåŒ…æ‹¬äººè„¸è¡¨æƒ…åŠ¨ä½œï¼Œèº«ä½“åŠ¨ä½œï¼Œäººä¸äººäº¤äº’ç­‰</td><td><a href="http://serre-lab.clps.brown.edu/resource/hmdb-a-large-human-motion-database/#Downloads" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Moments-in-Time</td><td>åŠ¨ä½œè¡Œä¸ºè¯†åˆ«</td><td>1,000,000 videos,339ç±»</td><td><a href="http://moments.csail.mit.edu/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>ActivityNet 1.3</td><td>åŠ¨ä½œè¡Œä¸ºè¯†åˆ«</td><td>20,000 videos,200ç±»</td><td><a href="http://activity-net.org/challenges/2016/guidelines.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Kinetics</td><td>åŠ¨ä½œè¡Œä¸ºè¯†åˆ«</td><td>300,000 videosï¼Œ400ç±»</td><td><a href="https://deepmind.com/research/open-source/open-source-datasets/kinetics/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>AVA</td><td>åŠ¨ä½œè¡Œä¸ºè¯†åˆ«</td><td>57,600 videosï¼Œ80ç±»</td><td><a href="https://research.google.com/ava/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Collective Activity Dataset</td><td>ç¾¤ä½“æ´»åŠ¨è¡Œä¸ºè¯†åˆ«</td><td>44 videos,ç©¿å‰ã€è¡Œèµ°ã€ç­‰å¾…ã€äº¤è°ˆå’Œæ’é˜Ÿ äº”ç±»</td><td><a href="http://vhosts.eecs.umich.edu/vision//activity-dataset.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Choiâ€™s New Dataset</td><td>ç¾¤ä½“æ´»åŠ¨è¡Œä¸ºè¯†åˆ«</td><td>32 videosï¼Œèšä¼šï¼Œè°ˆè¯ï¼Œåˆ†å¼€ï¼Œä¸€èµ·èµ°ï¼Œè¿½é€å’Œæ’é˜Ÿ å…­ç±»</td><td>None</td></tr><tr><td>ActivityNet 1.3</td><td>æ£€æµ‹åŠ¨ä½œäº‹ä»¶çš„èµ·å§‹æ—¶é—´å’Œç»ˆæ­¢æ—¶é—´</td><td>20,000 videos,200ç±»åŠ¨ä½œçš„èµ·å§‹æ—¶é—´å’Œç»ˆæ­¢æ—¶é—´</td><td><a href="http://activity-net.org/challenges/2016/guidelines.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>THUMOS</td><td>æ£€æµ‹åŠ¨ä½œäº‹ä»¶çš„èµ·å§‹æ—¶é—´å’Œç»ˆæ­¢æ—¶é—´</td><td>15,000 videosï¼Œ101ç±»åŠ¨ä½œçš„èµ·å§‹æ—¶é—´å’Œç»ˆæ­¢æ—¶é—´</td><td><a href="http://www.thumos.info/download.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>MED</td><td>äº‹ä»¶æ£€æµ‹</td><td>32,744 videos,20ä¸ªäº‹ä»¶</td><td><a href="http://www-nlpir.nist.gov/projects/tv2017/data/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>EventNet</td><td>äº‹ä»¶æ£€æµ‹</td><td>90,000 videosï¼Œ500ä¸ªäº‹ä»¶</td><td><a href="http://eventnet.ee.columbia.edu/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Columbia Consumer Video</td><td>äº‹ä»¶æ£€æµ‹</td><td>9,317 videosï¼Œ20ä¸ªäº‹ä»¶</td><td><a href="http://www.ee.columbia.edu/ln/dvmm/CCV/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>ADE20K</td><td>äº‹ä»¶æ£€æµ‹</td><td>20,210 videosï¼Œ900ä¸ªäº‹ä»¶</td><td><a href="http://sceneparsing.csail.mit.edu/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>DAVIS</td><td>è§†é¢‘ä¸»ç‰©ä½“åˆ†å‰²</td><td>50 videosï¼Œåˆ†å‰²æ ‡æ³¨</td><td><a href="http://davischallenge.org/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>FBMS</td><td>è§†é¢‘ä¸»ç‰©ä½“åˆ†å‰²</td><td>59 videosï¼Œåˆ†å‰²æ ‡æ³¨</td><td><a href="https://lmb.informatik.uni-freiburg.de/resources/datasets/moseg.en.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>IJB-C</td><td>è§†é¢‘äººè„¸è¯†åˆ«</td><td>11,000 videosï¼Œ</td><td><a href="https://www.nist.gov/programs-projects/face-challenges" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>YouTube Faces</td><td>è§†é¢‘äººè„¸è¯†åˆ«</td><td>3,425 videosï¼Œ1595 äºº</td><td><a href="https://www.cs.tau.ac.il/~wolf/ytfaces/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>MS-Celeb-1M</td><td>è§†é¢‘äººè„¸è¯†åˆ«</td><td>1,000,000 imagesï¼Œ21,000äºº</td><td><a href="http://www.msceleb.org/download/sampleset" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>MSVD</td><td>è§†é¢‘æè¿°</td><td>1,970 videos</td><td><a href="http://www.cs.utexas.edu/users/ml/clamp/videoDescription/YouTubeClips.tar" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>MSR-VTT-10K</td><td>è§†é¢‘æè¿°</td><td>10ï¼Œ000 videos</td><td><a href="http://ms-multimedia-challenge.com/2017/dataset" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>MSR-VTT-10K</td><td>è§†é¢‘æè¿°</td><td>æ— </td><td><a href="https://sites.google.com/site/describingmovies/lsmdc-2016/download" target="_blank" rel="noopener">é“¾æ¥</a></td></tr></tbody></table><p><a href="#%E5%BC%80%E6%BA%90%E6%95%B0%E6%8D%AE%E9%9B%86">top</a></p><h1 id="3d-computer-vision"><a class="markdownIt-Anchor" href="#3d-computer-vision"></a> 3D Computer Vision</h1><table><thead><tr><th>æ•°æ®é›†</th><th>ä»‹ç»</th><th>å¤‡æ³¨</th><th>ç½‘å€</th></tr></thead><tbody><tr><td>photoface database</td><td>åŸºäºå…‰åº¦ç«‹ä½“è§†è§‰çš„äºŒç»´å’Œä¸‰ç»´äººè„¸è¯†åˆ«æ•°æ®åº“</td><td>æ€»å…±7356å¼ å›¾åƒï¼ŒåŒ…å«1839ä¸ªsessionå’Œ261ä¸ªsubjects</td><td>None</td></tr><tr><td>NYU Depth V2 dataset</td><td>å…³äºRGBD å›¾åƒåœºæ™¯ç†è§£çš„æ•°æ®åº“</td><td>æä¾›1449å¼ æ·±åº¦å›¾ç‰‡å’Œä»–ä»¬çš„å¯†é›†2dç‚¹ç±»æ ‡æ³¨</td><td><a href="https://cs.nyu.edu/~silberman/datasets/nyu_depth_v2.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>SUN RGBD dataset</td><td>æ˜¯ä¸Šé¢çš„NYU Depth V2 datasetçš„è¶…é›†ï¼Œå¤šäº†3D bounding boxeså’Œroom layoutsçš„æ ‡æ³¨ã€‚</td><td>æœ‰10,000å¼ RGB-Då›¾ç‰‡ï¼Œæœ‰58,657ä¸ª3DåŒ…å›´æ¡†å’Œ146,617 ä¸ª2dåŒ…å›´æ¡†ã€‚</td><td><a href="http://rgbd.cs.princeton.edu/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>PASCAL3D+</td><td>æ–°çš„ä¸‰ç»´ç‰©ä½“æ£€æµ‹å’Œå§¿æ€ä¼°è®¡æ•°æ®é›†ï¼Œä»PASCAL VOC æ¼”åŒ–è€Œæ¥ï¼ŒåŒ…å«å›¾åƒï¼Œæ³¨è§£ï¼Œå’Œ3D CADæ¨¡å‹</td><td>æ€»å…±12ä¸ªç±»ï¼Œå¹³å‡æ¯ä¸ªç±»åˆ«æœ‰3000å¤šä¸ªå®ä¾‹</td><td><a href="http://cvgl.stanford.edu/projects/pascal3d.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>IKEA</td><td>åŒ…å«å…¸å‹å®¤å†…åœºæ™¯çš„ä¸‰ç»´æ¨¡å‹çš„æ•°æ®åº“ï¼Œä¾‹å¦‚æ¡Œå­æ¤…å­ç­‰</td><td>åŒ…å«å¤§çº¦759å¼ å›¾ç‰‡å’Œ219ä¸ª3Dæ¨¡å‹</td><td><a href="http://ikea.csail.mit.edu/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>New Tsukuba Dataset</td><td>åŒ…å«äº†å¾ˆå¤šç«‹ä½“ç‰©ä½“å¯¹çš„æ•°æ®åº“ï¼Œç”¨äºç«‹ä½“ç‰©ä½“åŒ¹é…</td><td>æ€»å…±1800ä¸ªç«‹ä½“ç‰©ä½“å¯¹ï¼Œä»¥åŠæ¯ç«‹ä½“å¯¹çš„ç«‹ä½“è§†å·®å›¾ã€é®æŒ¡å›¾å’Œä¸è¿ç»­å›¾</td><td><a href="https://cvlab-home.blogspot.jp/2012/05/h2fecha-2581457116665894170-displaynone.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Oxford RobotCar Dataset</td><td>å…³äºæˆ·å¤–è‡ªåŠ¨é©¾é©¶çš„æ•°æ®é›†ã€‚</td><td>åŒ…å«åœ¨é©¾é©¶æ±½è½¦è¿‡ç¨‹ä»6ä¸ªæ‘„åƒå¤´æ”¶é›†çš„2000wå¼ å›¾ç‰‡ï¼Œå’Œå½“æ—¶çš„æ¿€å…‰é›·è¾¾ï¼ŒGPSå’Œåœ°é¢å®å†µæ ‡æ³¨ã€‚</td><td><a href="http://robotcar-dataset.robots.ox.ac.uk/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Middlebury V3</td><td>åŒ…å«é«˜åˆ†è¾¨ç‡ç‰©ä½“ç«‹ä½“è§†å·®æ ‡æ³¨çš„æ•°æ®åº“</td><td>åŒ…å«33ä¸ªç±»ï¼Œæ²¡æœ‰æ˜è¯´æ¯ç±»æœ‰å¤šå°‘æ•°æ®</td><td><a href="http://vision.middlebury.edu/stereo/eval3/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>ShapeNet</td><td>åŒ…å«3Dæ¨¡å‹ï¼Œå’Œ3dæ¨¡å‹çš„ç±»åˆ«æ ‡æ³¨çš„æ•°æ®é›†ï¼Œè¦†ç›–äº†å¸¸ç”¨çš„3Dæ•°æ®é›†PASCAL 3D+ã€‚</td><td>å®ƒæ¶µç›–55ä¸ªå¸¸è§çš„å¯¹è±¡ç±»åˆ«ï¼Œæœ‰å¤§çº¦51,300ä¸ª3Dæ¨¡å‹</td><td><a href="https://www.shapenet.org/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>MICC dataset</td><td>åŒ…å«äº†3Däººè„¸æ‰«æå’Œåœ¨ä¸åŒåˆ†è¾¨ç‡ï¼Œæ¡ä»¶å’Œç¼©æ”¾çº§åˆ«ä¸‹çš„å‡ ä¸ªè§†é¢‘åºåˆ—çš„æ•°æ®åº“ã€‚</td><td>æœ‰53ä¸ªäººçš„ç«‹ä½“äººè„¸æ•°æ®</td><td><a href="https://www.micc.unifi.it/resources/datasets/florence-3d-faces/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>CMU MoCap Dataset</td><td>åŒ…å«äº†3Däººä½“å…³é”®ç‚¹æ ‡æ³¨å’Œéª¨æ¶ç§»åŠ¨æ ‡æ³¨çš„æ•°æ®é›†ã€‚</td><td>æœ‰6ä¸ªç±»åˆ«å’Œ23ä¸ªå­ç±»åˆ«ï¼Œæ€»å…±2605ä¸ªæ•°æ®ã€‚</td><td><a href="http://mocap.cs.cmu.edu/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>DTU dataset</td><td>å…³äº3Dåœºæ™¯çš„æ•°æ®é›†ã€‚</td><td>æœ‰124ä¸ªåœºæ™¯ï¼Œæ¯åœºæ™¯æœ‰49/64ä¸ªä½ç½®çš„RGBå›¾åƒå’Œç»“æ„å…‰æ ‡æ³¨ã€‚</td><td><a href="http://roboimagedata.compute.dtu.dk/?page_id=36" target="_blank" rel="noopener">é“¾æ¥</a></td></tr></tbody></table><p><a href="#%E5%BC%80%E6%BA%90%E6%95%B0%E6%8D%AE%E9%9B%86">top</a></p><h1 id="analyzing-humans-in-images"><a class="markdownIt-Anchor" href="#analyzing-humans-in-images"></a> Analyzing Humans in Images</h1><table><thead><tr><th>æ•°æ®é›†</th><th>ä»‹ç»</th><th>å¤‡æ³¨</th><th>ç½‘å€</th></tr></thead><tbody><tr><td>MSR-Action3D</td><td>åŒ…å«æ·±åº¦çš„åŠ¨ä½œè¯†åˆ«æ•°æ®é›†ï¼Œ</td><td>æœ‰20ä¸ªåŠ¨ä½œï¼Œæ€»å…±557ä¸ªåºåˆ—ã€‚</td><td><a href="http://users.eecs.northwestern.edu/~jwa368/my_data.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Florence-3D</td><td>åŒ…å«æ·±åº¦çš„åŠ¨ä½œè¯†åˆ«æ•°æ®é›†ï¼Œ</td><td>æœ‰9ä¸ªåŠ¨ä½œï¼Œæ€»å…±215ä¸ªåŠ¨ä½œåºåˆ—ã€‚</td><td><a href="https://www.micc.unifi.it/resources/datasets/florence-3d-actions-dataset/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Berkeley MHAD</td><td>åŒ…å«æ·±åº¦çš„åŠ¨ä½œè¯†åˆ«æ•°æ®é›†ï¼Œ</td><td>æœ‰11ä¸ªåŠ¨ä½œï¼Œäº§ç”Ÿ660ä¸ªåŠ¨ä½œåºåˆ—ã€‚</td><td><a href="http://tele-immersion.citris-uc.org/berkeley_mhad" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Online Action Detection</td><td>åŒ…å«æ·±åº¦çš„åŠ¨ä½œè¯†åˆ«æ•°æ®é›†ï¼Œ</td><td>æ•°æ®é›†åŒ…å«59ä¸ªé•¿åºåˆ—ï¼ŒåŒ…å«10ç§ä¸åŒçš„æ—¥å¸¸ç”Ÿæ´»è¡Œä¸ºã€‚</td><td><a href="http://homes.esat.kuleuven.be/~rdegeest/OnlineActionDetection.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>ChaLearn LAP IsoGD Dataset</td><td>RGB-Då›¾åƒçš„æ‰‹åŠ¿è¯†åˆ«çš„æ•°æ®é›†ã€‚</td><td>åŒ…æ‹¬47933ä¸ªRGB-Dæ‰‹åŠ¿è§†é¢‘ï¼Œæœ‰249ä¸ªæ‰‹åŠ¿æ ‡ç­¾ã€‚Trainingæœ‰35878è§†é¢‘ï¼ŒValidationæœ‰5784ä¸ªï¼Œtestæœ‰6271ä¸ª</td><td><a href="http://gesture.chalearn.org/2016-looking-at-people-cvpr-challenge/isogd-and-congd-datasets" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>MAFA dataset</td><td>å…³äºé¢éƒ¨é®æŒ¡é—®é¢˜çš„æ•°æ®é›†</td><td>æœ‰30, 811å¼ äººè„¸å’Œ35806å¼ æœ‰é®æŒ¡çš„è„¸ç»„æˆã€‚</td><td><a href="http://www.escience.cn/people/geshiming/mafa.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>MSRC-12 Kinect Gesture Dataset</td><td>æ‰‹åŠ¿è¯†åˆ«æ•°æ®é›†</td><td>æœ‰4900å¼ å›¾ç‰‡ï¼ŒåŒ…å«12ä¸ªä¸åŒæ‰‹åŠ¿ï¼Œ</td><td><a href="https://www.microsoft.com/en-us/download/details.aspx?id=52283" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>2013 Chalearn Gesture Challenge dataset</td><td>æ‰‹åŠ¿è¯†åˆ«æ•°æ®é›†</td><td>æœ‰11000å¼ å›¾ç‰‡ï¼ŒåŒ…å«20ä¸ªä¸åŒæ‰‹åŠ¿ï¼Œ</td><td><a href="http://gesture.chalearn.org/2013-multi-modal-challenge" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>WIDER FACE</td><td>äººè„¸æ£€æµ‹æ•°æ®é›†</td><td>æœ‰ 32,203 å¼ å›¾ç‰‡ï¼Œæ ‡æ³¨äº†393703ä¸ªäººè„¸ã€‚</td><td><a href="http://mmlab.ie.cuhk.edu.hk/projects/WIDERFace/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>FDDB</td><td>äººè„¸æ£€æµ‹æ•°æ®é›†</td><td>2845å¼ å›¾ç‰‡ï¼Œæ ‡æ³¨äº†5171å¼ äººè„¸ã€‚</td><td><a href="http://vis-www.cs.umass.edu/fddb/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>300-VW dataset</td><td>é¢éƒ¨è¡¨æƒ…æ•°æ®é›†</td><td>åŒ…å«114ä¸ªè§†é¢‘å’Œæ€»è®¡218,595å¸§ã€‚</td><td><a href="https://ibug.doc.ic.ac.uk/resources/300-VW/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>HMDB51</td><td>äººç±»è¡Œä¸ºè¯†åˆ«çš„æ•°æ®é›†</td><td>åŒ…å«51ä¸ªåŠ¨ä½œï¼Œæ€»å…±æœ‰6766ä¸ªè§†é¢‘å‰ªè¾‘</td><td><a href="http://serre-lab.clps.brown.edu/resource/hmdb-a-large-human-motion-database/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>MPII Cooking Activities Dataset</td><td>äººç±»è¡Œä¸ºè¯†åˆ«çš„æ•°æ®é›†</td><td>åŒ…å«65ä¸ªåŠ¨ä½œï¼Œæœ‰5609ä¸ªè§†é¢‘</td><td><a href="https://www.mpi-inf.mpg.de/departments/computer-vision-and-multimodal-computing/research/human-activity-recognition/mpii-cooking-activities-dataset/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>UCF101</td><td>äººç±»è¡Œä¸ºè¯†åˆ«çš„æ•°æ®é›†</td><td>åŒ…å«101ä¸ªåŠ¨ä½œï¼Œæœ‰13320ä¸ªè§†é¢‘</td><td><a href="http://crcv.ucf.edu/data/UCF101.php" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>IJB-A dataset</td><td>åŒ…å«è§†é¢‘å’Œå›¾ç‰‡äººè„¸è¯†åˆ«çš„æ•°æ®é›†</td><td>åŒ…å«5712ä¸ªå›¾åƒå’Œ2085ä¸ªè§†é¢‘</td><td><a href="https://www.nist.gov/programs-projects/face-challenges" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>YouTube celebrities</td><td>è§†é¢‘äººè„¸è¯†åˆ«çš„æ•°æ®é›†</td><td>åŒ…å«47ä½åäººçš„1910ä¸ªè§†é¢‘</td><td><a href="https://www.cs.tau.ac.il/~wolf/ytfaces/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>COX</td><td>è§†é¢‘äººè„¸è¯†åˆ«çš„æ•°æ®é›†</td><td>åŒ…å«1000ä¸ªä¸»é¢˜çš„4000ä¸ªè§†é¢‘</td><td><a href="http://vipl.ict.ac.cn/view_database.php?id=3" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Human3.6M</td><td>äººä½“å§¿æ€ä¼°è®¡çš„æ•°æ®é›†</td><td>360ä¸‡å¼ 3Dç…§ç‰‡ï¼Œ11åå—è¯•è€…åœ¨4ä¸ªè§†ç‚¹ä¸‹æ‰§è¡Œ15ä¸ªäº†ä¸åŒçš„åŠ¨ä½œ</td><td><a href="http://vision.imar.ro/human3.6m/description.php" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>iLIDS</td><td>è¡Œäººé‡è¯†åˆ«çš„æ•°æ®é›†</td><td>476 å¼ å›¾åƒï¼ŒåŒ…å«119ä¸ªäºº</td><td><a href="http://www.eecs.qmul.ac.uk/~xiatian/downloads_qmul_iLIDS-VID_ReID_dataset.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>VIPeR</td><td>è¡Œäººé‡è¯†åˆ«çš„æ•°æ®é›†</td><td>632ä¸ªè¡Œäººå›¾ç‰‡å¯¹ï¼ˆç”±ä¸¤ä¸ªç›¸æœºæ‹æ‘„ï¼‰</td><td><a href="https://iiw.kuleuven.be/onderzoek/eavise/viper/dataset" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>CUHK01</td><td>è¡Œäººé‡è¯†åˆ«çš„æ•°æ®é›†</td><td>åŒ…å«971è¡Œäºº, 3884å¼ å›¾ç‰‡</td><td><a href="http://www.ee.cuhk.edu.hk/~xgwang/CUHK_identification.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>CUHK03</td><td>è¡Œäººé‡è¯†åˆ«çš„æ•°æ®é›†</td><td>åŒ…å«1360è¡Œäºº, 13164å¼ å›¾ç‰‡</td><td><a href="http://www.ee.cuhk.edu.hk/~xgwang/CUHK_identification.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>RWTH-PHOENIX-Weather multi-signer 2014</td><td>æ‰‹è¯­è¯†åˆ«çš„æ•°æ®é›†</td><td>åŒ…å«äº†5672ä¸ªå¾·è¯­æ‰‹è¯­çš„å¥å­ï¼Œæœ‰65,227ä¸ªæ‰‹è¯­å§¿åŠ¿å’Œ799,006å¸§</td><td><a href="https://www-i6.informatik.rwth-aachen.de/~forster/database-rwth-phoenix.php" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>AFLW</td><td>äººç±»é¢éƒ¨å…³é”®ç‚¹çš„æ•°æ®é›†</td><td>æ€»å…±çº¦æœ‰25kå¼ è„¸ï¼Œæ¯å¹…å›¾åƒæ ‡æ³¨äº†å¤§çº¦21ä¸ªä½ç½®ã€‚</td><td><a href="https://www.tugraz.at/institute/icg/research/team-bischof/lrs/downloads/aflw" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>CMU mocap database</td><td>åŠ¨ä½œè¯†åˆ«çš„æ•°æ®é›†</td><td>2235ä¸ªæ•°æ®ï¼ŒåŒ…å«144ä¸ªä¸åŒçš„åŠ¨ä½œã€‚</td><td><a href="http://mocap.cs.cmu.edu/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Georgia Tech (GT) database</td><td>äººè„¸è¯†åˆ«æ•°æ®åº“</td><td>50ä¸ªäººæ¯äºº15å¼ äººè„¸ã€‚</td><td><a href="http://www.anefian.com/research/face_reco.htm" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>ORL</td><td>äººè„¸è¯†åˆ«æ•°æ®åº“</td><td>40ä¸ªäººæ¯ä¸ªäºº10å¼ å›¾ã€‚</td><td><a href="https://www.cl.cam.ac.uk/research/dtg/attarchive/facedatabase.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr></tbody></table><p><a href="#%E5%BC%80%E6%BA%90%E6%95%B0%E6%8D%AE%E9%9B%86">top</a></p><h1 id="application"><a class="markdownIt-Anchor" href="#application"></a> Application</h1><table><thead><tr><th>æ•°æ®é›†</th><th>ä»‹ç»</th><th>å¤‡æ³¨</th><th>ç½‘å€</th></tr></thead><tbody><tr><td>DogCentric Activity Dataset</td><td>ç¬¬ä¸€è§†è§’çš„ç‹—å’Œäººä¹‹é—´çš„ç›¸äº’è¡Œä¸ºçš„æ•°æ®é›†ï¼ˆè§†é¢‘ï¼‰</td><td>æ€»å…±æœ‰10ç±»ï¼Œå…·ä½“æ•°æ®é‡æ²¡æœ‰æ˜è¯´ï¼Œyæ˜¯åŠ¨ä½œç±»åˆ«</td><td><a href="http://robotics.ait.kyushu-u.ac.jp/yumi/db/first_dog.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>JPL First-Person Interaction Dataset</td><td>ç¬¬ä¸€è§†è§’è§‚å¯ŸåŠ¨ä½œçš„æ•°æ®é›†</td><td>57ä¸ªè§†é¢‘ï¼Œ8ä¸ªå¤§ç±»ï¼Œyæ˜¯åŠ¨ä½œç±»åˆ«</td><td><a href="http://michaelryoo.com/jpl-interaction.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>NUS-WIDE</td><td>å…³äºå›¾åƒæ–‡æœ¬åŒ¹é…çš„æ•°æ®é›†</td><td>269,648ä¸ªå›¾åƒå’Œå¯¹åº”çš„æ ‡ç­¾</td><td><a href="http://lms.comp.nus.edu.sg/research/NUS-WIDE.htm" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>LabelMe Dataset</td><td>å…³äºå›¾åƒæ–‡æœ¬åŒ¹é…çš„æ•°æ®é›†</td><td>3825ä¸ªå›¾åƒå’Œå¯¹åº”æ ‡ç­¾</td><td><a href="http://labelme.csail.mit.edu/Release3.0/browserTools/php/dataset.php" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Pascal Dataset</td><td>å…³äºå›¾åƒæ–‡æœ¬åŒ¹é…çš„æ•°æ®é›†</td><td>5011å¼ è®­ç»ƒå›¾åƒå’Œ4952å¼ æµ‹è¯•å›¾åƒ</td><td>)</td></tr><tr><td>ICDAR 2015</td><td>å…³äºæ–‡æœ¬æ£€æµ‹çš„æ•°æ®é›†</td><td>1500å¼ è®­ç»ƒï¼Œ1000å¼ æµ‹è¯•ï¼Œyä¸ºå››è¾¹å½¢çš„å››ä¸ªé¡¶ç‚¹ã€‚</td><td><a href="http://rrc.cvc.uab.es/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>COCO-Text</td><td>å…³äºæ–‡æœ¬æ£€æµ‹çš„æ•°æ®é›†</td><td>63686å¼ å›¾ç‰‡ï¼Œå…¶ä¸­43686å¼ è¢«é€‰ä¸ºè®­ç»ƒé›†ï¼Œå‰©ä¸‹çš„2ä¸‡ç”¨äºæµ‹è¯•ã€‚</td><td><a href="https://vision.cornell.edu/se3/coco-text-2/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>MSRA-TD500</td><td>å…³äºæ–‡æœ¬æ£€æµ‹çš„æ•°æ®é›†</td><td>300ä¸ªè®­ç»ƒï¼Œ200ä¸ªæµ‹è¯•å›¾åƒ</td><td><a href="http://www.iapr-tc11.org/mediawiki/index.php/MSRA_Text_Detection_500_Database_(MSRA-TD500)" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Microsoft 7-Scenes Dataset</td><td>å®¤å†…äººä½“è¿åŠ¨çš„æ•°æ®é›†</td><td>æœ‰7ç§ä¸åŒå®¤å†…ç¯å¢ƒï¼Œæ¯åŒ…å«500-1000å¼ å›¾åƒè§†é¢‘åºåˆ—ã€‚</td><td><a href="https://www.microsoft.com/en-us/research/project/rgb-d-dataset-7-scenes/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Oxford RobotCar</td><td>æˆ·å¤–è‡ªåŠ¨é©¾é©¶æ•°æ®é›†</td><td>åŒ…å«å›¾åƒï¼Œæ¿€å…‰æ‰«æç»“æœå’ŒGPSæ•°æ®ã€‚</td><td><a href="http://robotcar-dataset.robots.ox.ac.uk/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr></tbody></table><p><a href="#%E5%BC%80%E6%BA%90%E6%95%B0%E6%8D%AE%E9%9B%86">top</a></p><h1 id="low-mid-level-vision"><a class="markdownIt-Anchor" href="#low-mid-level-vision"></a> Low- &amp; Mid-Level Vision</h1><table><thead><tr><th>æ•°æ®é›†</th><th>ä»‹ç»</th><th>å¤‡æ³¨</th><th>ç½‘å€</th></tr></thead><tbody><tr><td>Deep Video Deblurring for Hand-held Cameras</td><td>video/image deblurring(å›¾åƒå»æ¨¡ç³Š)</td><td>video num:71 video time: 3-5s blurry and sharp pair image num:6708</td><td><a href="https://www.cs.ubc.ca/labs/imager/tr/2017/DeepVideoDeblurring/#dataset" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>GOPRO dataset</td><td>video/image deblurring(å›¾åƒå»æ¨¡ç³Š)</td><td>blurry and sharp pair image num:3214 train num:2103 test num:1111</td><td><a href="https://github.com/SeungjunNah/DeepDeblur_release" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>BSD68</td><td>image restoration(å›¾åƒä¿®å¤)/é«˜æ–¯é™å™ª</td><td>image num:68</td><td><a href="https://www.robots.ox.ac.uk/~vgg/data/dtd/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>BSD100</td><td>â€œimage restoration(å›¾åƒä¿®å¤)super resolutionè¶…åˆ†è¾¨ç‡é‡å»ºâ€</td><td>image num:100</td><td><a href="https://github.com/jbhuang0604/SelfExSR/tree/master/data" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Set5</td><td>â€œimage restoration(å›¾åƒä¿®å¤)super resolutionè¶…åˆ†è¾¨ç‡é‡å»ºâ€</td><td>image num:5</td><td><a href="https://github.com/jbhuang0604/SelfExSR/tree/master/data" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Set14</td><td>â€œimage restoration(å›¾åƒä¿®å¤)super resolutionè¶…åˆ†è¾¨ç‡é‡å»ºâ€</td><td>image num:14</td><td><a href="https://github.com/jbhuang0604/SelfExSR/tree/master/data" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Urban100</td><td>â€œimage restoration(å›¾åƒä¿®å¤)super resolutionè¶…åˆ†è¾¨ç‡é‡å»ºâ€</td><td>image num:100</td><td><a href="https://github.com/jbhuang0604/SelfExSR/tree/master/data" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>NYU v2 dataset</td><td>â€œimage restoration(å›¾åƒä¿®å¤)depth super resolutionæ·±åº¦è¶…åˆ†è¾¨ç‡é‡å»ºâ€</td><td>image num:1449</td><td><a href="https://cs.nyu.edu/~silberman/datasets/nyu_depth_v2.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Middlebury dataset</td><td>â€œimage restoration(å›¾åƒä¿®å¤)depth super resolutionæ·±åº¦è¶…åˆ†è¾¨ç‡é‡å»ºâ€</td><td>image pair num: 33</td><td><a href="http://vision.middlebury.edu/stereo/data/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>alpha matting benchmark</td><td>Natural image matting(æŠ å›¾)</td><td>â€œtrain num:27,test num:8â€</td><td><a href="http://www.alphamatting.com/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>real image benchmark</td><td>Natural image matting(æŠ å›¾)</td><td>â€œtrain num:49300,test num:1000â€</td><td><a href="https://sites.google.com/view/deepimagematting" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>MSRA10K/MSRA-B</td><td>Image saliency detection(æ˜¾è‘—æ€§åŒºåŸŸæ£€æµ‹)</td><td>image num(MSRA10K):10000 image num(MSRA-B):5000</td><td><a href="https://mmcheng.net/zh/msra10k/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>ECSSD</td><td>Image saliency detection(æ˜¾è‘—æ€§åŒºåŸŸæ£€æµ‹)</td><td>image num:1000</td><td><a href="http://www.cse.cuhk.edu.hk/leojia/projects/hsaliency/dataset.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>DUT-OMRON</td><td>Image saliency detection(æ˜¾è‘—æ€§åŒºåŸŸæ£€æµ‹)</td><td>image num:5168</td><td><a href="http://saliencydetection.net/dut-omron/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>PASCAL-S</td><td>Image saliency detection(æ˜¾è‘—æ€§åŒºåŸŸæ£€æµ‹)</td><td>image num:850</td><td><a href="http://cbi.gatech.edu/salobj/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>HKU-IS</td><td>Image saliency detection(æ˜¾è‘—æ€§åŒºåŸŸæ£€æµ‹)</td><td>image num:4447</td><td><a href="http://i.cs.hku.hk/~gbli/deep_saliency.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>SOD</td><td>Image saliency detection(æ˜¾è‘—æ€§åŒºåŸŸæ£€æµ‹)</td><td>image num:300</td><td><a href="http://i.cs.hku.hk/~gbli/deep_saliency.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Describable Textures Dataset</td><td>texture synthesis(çº¹ç†åˆæˆ)</td><td>image num:5640 category num:47 split train:val:test = 1:1:1</td><td><a href="https://www.robots.ox.ac.uk/~vgg/data/dtd/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>CVPPP leaf segmentation</td><td>Instance segmentation(æ ·ä¾‹åˆ†å‰²)</td><td>image num: 161 train num: 128 test num: 33</td><td><a href="https://www.plant-phenotyping.org/CVPPP2014-dataset" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>KITTI car segmentation</td><td>Instance segmentation(æ ·ä¾‹åˆ†å‰²)</td><td>image num: 3976 train num: 3712 test num: 144 val:120</td><td><a href="http://www.cvlibs.net/datasets/kitti/eval_semantics.php" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Cityscapes</td><td>Instance segmentation(æ ·ä¾‹åˆ†å‰²)</td><td>image num: 5000 train num: 2975 test num: 1525 val:500</td><td><a href="https://www.cityscapes-dataset.com/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>SYMMAX</td><td>Symmetry Detection(å¯¹ç§°æ€§æ£€æµ‹)</td><td>image num: train:200 test:100</td><td><a href="https://github.com/KevinKecc/SRN" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>WHSYMMAX</td><td>Symmetry Detection(å¯¹ç§°æ€§æ£€æµ‹)</td><td>image num: train:228 test:100 object num: 1</td><td><a href="https://github.com/KevinKecc/SRN" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>SK506</td><td>Symmetry Detection(å¯¹ç§°æ€§æ£€æµ‹)</td><td>image num: train:300 test:206 object num: 16</td><td><a href="https://github.com/KevinKecc/SRN" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Sym-PASCAL</td><td>Symmetry Detection(å¯¹ç§°æ€§æ£€æµ‹)</td><td>image num: train:648 test:787 object num: 14</td><td><a href="https://github.com/KevinKecc/SRN" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Color Checker Dataset</td><td>Color constancy(é¢œè‰²æ’å®š)</td><td>image num: 568</td><td><a href="http://www.eecs.harvard.edu/~ayanc/oldcc/dbs.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>NUS 8-Camera Dataset</td><td>Color constancy(é¢œè‰²æ’å®š)</td><td>image num: 1736</td><td><a href="http://www.comp.nus.edu.sg/~whitebal/illuminant/illuminant.html" target="_blank" rel="noopener">é“¾æ¥</a></td></tr></tbody></table><p><a href="#%E5%BC%80%E6%BA%90%E6%95%B0%E6%8D%AE%E9%9B%86">top</a></p><h1 id="text"><a class="markdownIt-Anchor" href="#text"></a> Text</h1><table><thead><tr><th>æ•°æ®é›†</th><th>ä»‹ç»</th><th>å¤‡æ³¨</th><th>ç½‘å€</th></tr></thead><tbody><tr><td>Stanford Sentiment Treebank</td><td>æ–‡æœ¬æƒ…æ„Ÿåˆ†æ</td><td>11855ä¸ªå¥å­åˆ’åˆ†ä¸º239231ä¸ªçŸ­è¯­ï¼Œæ¯ä¸ªçŸ­è¯­æœ‰ä¸ªæ¦‚ç‡å€¼ï¼Œè¶Šå°è¶Šè´Ÿé¢ï¼Œè¶Šå¤§è¶Šæ­£é¢</td><td><a href="https://nlp.stanford.edu/sentiment/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>IMDB</td><td>æ–‡æœ¬æƒ…æ„Ÿåˆ†æ</td><td>100,000å¥å­ï¼Œæ­£é¢è´Ÿé¢ä¸¤ç±»</td><td><a href="http://ai.stanford.edu/~amaas/data/sentiment/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Yelp</td><td>æ–‡æœ¬æƒ…æ„Ÿåˆ†æ</td><td>æ— </td><td><a href="https://www.yelp.com/dataset/challenge" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Multi-Domain Sentiment Dataset(Amazon product)</td><td>æ–‡æœ¬æƒ…æ„Ÿåˆ†æ</td><td>100,000+å¥å­ï¼Œæ­£é¢è´Ÿé¢2ç±»æˆ–å¼ºæ­£é¢ã€å¼±æ­£é¢ã€ä¸­ç«‹ã€å¼±è´Ÿé¢ã€å¼ºè´Ÿé¢5ç±»</td><td><a href="http://www.cs.jhu.edu/~mdredze/datasets/sentiment/" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>SemEval</td><td>æ–‡æœ¬æƒ…æ„Ÿåˆ†æ</td><td>20,632å¥å­ï¼Œä¸‰ç±»ï¼ˆæ­£é¢ã€è´Ÿé¢ã€ä¸­ç«‹ï¼‰</td><td><a href="http://alt.qcri.org/semeval2017/task4/index.php?id=data-and-tools" target="_blank" rel="noopener">é“¾æ¥</a></td></tr><tr><td>Sentiment140(STS)</td><td>æ–‡æœ¬æƒ…æ„Ÿåˆ†æ</td><td>1,600,000å¥å­,ä¸‰ç±»ï¼ˆæ­£é¢ã€è´Ÿé¢ã€ä¸­ç«‹ï¼‰</td><td><a href="https://drive.google.com/uc?id=0B04GJPshIjmPRnZManQwWEdTZjg&amp;export=download" target="_blank" rel="noopener">é“¾æ¥</a></td></tr></tbody></table><p><a href="#%E5%BC%80%E6%BA%90%E6%95%B0%E6%8D%AE%E9%9B%86">top</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="äººå·¥æ™ºèƒ½" scheme="https://Castile.github.io/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
    
      <category term="äººå·¥æ™ºèƒ½" scheme="https://Castile.github.io/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
      <category term="æ•°æ®é›†" scheme="https://Castile.github.io/tags/%E6%95%B0%E6%8D%AE%E9%9B%86/"/>
    
  </entry>
  
  <entry>
    <title>Javaä¸­çš„Pair</title>
    <link href="https://castile.github.io/2020/02/12/Java%E4%B8%AD%E7%9A%84Pair/"/>
    <id>https://castile.github.io/2020/02/12/Java%E4%B8%AD%E7%9A%84Pair/</id>
    <published>2020-02-12T04:52:45.000Z</published>
    <updated>2020-02-12T05:06:16.133Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="java-ä¸­çš„pair"><a class="markdownIt-Anchor" href="#java-ä¸­çš„pair"></a> Java ä¸­çš„Pair</h1><p>â€‹Pairï¼ˆé…å¯¹ï¼‰ï¼š  å½“ä¸€ä¸ªå‡½æ•°è¿”å›ä¸¤ä¸ªå€¼å¹¶ä¸”ä¸¤ä¸ªå€¼éƒ½æœ‰é‡è¦æ„ä¹‰æ—¶æˆ‘ä»¬ä¸€èˆ¬ä¼šç”¨Mapçš„keyå’Œvalueæ¥è¡¨è¾¾ï¼Œä½†æ˜¯è¿™æ ·çš„è¯å°±éœ€è¦ä¸¤ä¸ªé”®å€¼å¯¹ï¼Œç”¨Mapæ˜ å°„å»åšå¤„ç†æ—¶ï¼Œæ­¤æ—¶çš„keyç›¸å½“äºvalueçš„ä¸€ä¸ªæè¿°æˆ–è€…å¼•ç”¨ï¼Œè€Œå…·ä½“çš„ä¿¡æ¯éƒ½ä¿å­˜åœ¨valueä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡keyå»è·å–å¯¹åº”çš„valueã€‚<strong>ä½†æ˜¯å½“keyå’Œvalueéƒ½ä¿å­˜å…·ä½“ä¿¡æ¯æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°Pairå¯¹äº†ã€‚Pairå¯¹ä¹Ÿæ˜¯é”®å€¼å¯¹çš„å½¢å¼ã€‚</strong></p><p>â€‹å®é™…ä¸ŠPairä¿å­˜çš„åº”è¯¥è¯´æ˜¯ä¸€ä¸ªä¿¡æ¯å¯¹ï¼Œä¸¤ä¸ªä¿¡æ¯éƒ½æ˜¯æˆ‘ä»¬éœ€è¦çš„ï¼Œæ²¡æœ‰keyå’Œvalueä¹‹åˆ†ã€‚</p><h1 id="å®ç°"><a class="markdownIt-Anchor" href="#å®ç°"></a> å®ç°</h1><p>â€‹åœ¨<code>javax.util</code>åŒ…ä¸‹ï¼Œæœ‰ä¸€ä¸ªç®€å•<code>Pair</code>ç±»å¯ä»¥ç›´æ¥è°ƒç”¨ï¼Œç”¨æ³•æ˜¯ç›´æ¥é€šè¿‡æ„é€ å‡½æ•°å°†æ‰€å¸å¼•ç±»å‹çš„Keyå’Œvalueå­˜å…¥ï¼Œè¿™ä¸ªkeyå’Œvalueæ²¡æœ‰ä»»ä½•çš„å¯¹åº”å…³ç³»ç±»å‹ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javafx.util.Pair;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Hongliang Zhu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020-02-12 13:02</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">pair</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Pair&lt;Integer, String&gt; p = <span class="keyword">new</span> Pair&lt;&gt;(<span class="number">1</span>, <span class="string">"zhuhongliang"</span>);  <span class="comment">// è¦ä¼ å…¥å¯¹åº”çš„å€¼</span></span><br><span class="line">        System.out.println(p.getKey());</span><br><span class="line">        System.out.println(p.getValue());</span><br><span class="line"></span><br><span class="line">        Pair&lt;String, String&gt; p2 = <span class="keyword">new</span> Pair&lt;&gt;(<span class="string">"Tony"</span>, <span class="string">"Jane"</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(p2.getKey());</span><br><span class="line">        System.out.println(p2.getValue());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><blockquote><p>1<br>zhuhongliang<br>Tony<br>Jane</p></blockquote><pre><code>è¿™ç§Pairçš„è¿”å›å¯¹ä¸€ä¸ªå‡½æ•°è¿”å›ä¸¤ä¸ªéƒ½æœ‰æ„ä¹‰çš„å€¼æœ‰ç‰¹åˆ«ç”¨å¤„ã€‚ </code></pre>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Java" scheme="https://Castile.github.io/categories/Java/"/>
    
    
      <category term="Java" scheme="https://Castile.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>leetcode-50-å¹‚å‡½æ•°</title>
    <link href="https://castile.github.io/2020/02/12/leetcode-50-%E5%B9%82%E5%87%BD%E6%95%B0/"/>
    <id>https://castile.github.io/2020/02/12/leetcode-50-%E5%B9%82%E5%87%BD%E6%95%B0/</id>
    <published>2020-02-12T04:29:27.000Z</published>
    <updated>2020-02-12T09:02:10.317Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="æè¿°"><a class="markdownIt-Anchor" href="#æè¿°"></a> æè¿°</h1><h2 id="leetcode-50-powx-n"><a class="markdownIt-Anchor" href="#leetcode-50-powx-n"></a> leetcode-50 Pow(x, n)</h2><blockquote><p>å®ç° pow(x, n) ï¼Œå³è®¡ç®— x çš„ n æ¬¡å¹‚å‡½æ•°ã€‚</p><p>ç¤ºä¾‹ 1:</p><p>è¾“å…¥: 2.00000, 10<br>è¾“å‡º: 1024.00000<br>ç¤ºä¾‹ 2:</p><p>è¾“å…¥: 2.10000, 3<br>è¾“å‡º: 9.26100<br>ç¤ºä¾‹ 3:</p><p>è¾“å…¥: 2.00000, -2<br>è¾“å‡º: 0.25000<br>è§£é‡Š: 2-2 = 1/22 = 1/4 = 0.25<br>è¯´æ˜:</p><p>-100.0 &lt; x &lt; 100.0<br>n æ˜¯ 32 ä½æœ‰ç¬¦å·æ•´æ•°ï¼Œå…¶æ•°å€¼èŒƒå›´æ˜¯ [âˆ’231, 231 âˆ’ 1] ã€‚</p><p>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/powx-n" target="_blank" rel="noopener">https://leetcode-cn.com/problems/powx-n</a></p></blockquote><h1 id="åˆ†æ"><a class="markdownIt-Anchor" href="#åˆ†æ"></a> åˆ†æ</h1><ol><li><p>æš´åŠ›æ±‚è§£ï¼š è¿™ä¸ªä¼šè¶…æ—¶ï¼Œè¿™é‡Œè¦å¤„ç†ä¸€ä¸‹nå°äº0çš„æƒ…å†µï¼Œ å½“nå°äº0çš„æ—¶å€™ï¼Œå°†xå˜æˆ1/xï¼Œ n = -nï¼›</p></li><li><p>å¿«é€Ÿå¹‚ï¼š <a href="https://blog.csdn.net/qq_19782019/article/details/85621386" target="_blank" rel="noopener">https://blog.csdn.net/qq_19782019/article/details/85621386</a></p><p>â€‹å¿«é€Ÿå¹‚ç®—æ³•èƒ½å¸®æˆ‘ä»¬ç®—å‡ºæŒ‡æ•°éå¸¸å¤§çš„å¹‚ï¼Œä¼ ç»Ÿçš„æ±‚å¹‚ç®—æ³•ä¹‹æ‰€ä»¥æ—¶é—´å¤æ‚åº¦éå¸¸é«˜ï¼ˆä¸ºO(æŒ‡æ•°n)ï¼‰ï¼Œå°±æ˜¯å› ä¸ºå½“æŒ‡æ•°néå¸¸å¤§çš„æ—¶å€™ï¼Œéœ€è¦æ‰§è¡Œçš„å¾ªç¯æ“ä½œæ¬¡æ•°ä¹Ÿéå¸¸å¤§ã€‚æ‰€ä»¥æˆ‘ä»¬å¿«é€Ÿå¹‚ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯æ¯ä¸€æ­¥éƒ½æŠŠæŒ‡æ•°åˆ†æˆä¸¤åŠï¼Œè€Œç›¸åº”çš„åº•æ•°åšå¹³æ–¹è¿ç®—ã€‚è¿™æ ·ä¸ä»…èƒ½æŠŠéå¸¸å¤§çš„æŒ‡æ•°ç»™ä¸æ–­å˜å°ï¼Œæ‰€éœ€è¦æ‰§è¡Œçš„å¾ªç¯æ¬¡æ•°ä¹Ÿå˜å°ï¼Œè€Œæœ€åè¡¨ç¤ºçš„ç»“æœå´ä¸€ç›´ä¸ä¼šå˜ã€‚</p></li></ol><h1 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h1><p><a href="https://github.com/Castile/algorithm/blob/master/leetcode/src/RecurrenceAndDynamicProgramming/leetcode50_pow.java" target="_blank" rel="noopener">https://github.com/Castile/algorithm/blob/master/leetcode/src/RecurrenceAndDynamicProgramming/leetcode50_pow.java</a></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> RecurrenceAndDynamicProgramming;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Hongliang Zhu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020-02-12 15:39</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">leetcode50_pow</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">pow</span><span class="params">(<span class="keyword">double</span> x, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> N = n;</span><br><span class="line">        <span class="keyword">if</span> (n &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            N = -N;</span><br><span class="line">            x = <span class="number">1</span> / x;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">double</span> ans = <span class="number">1.0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">            ans *= x;</span><br><span class="line">            ans %= <span class="number">1000</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  å¿«é€Ÿå¹‚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x åº•æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> n æŒ‡æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>  ç»“æœ   æ±‚æœ€åä¸‰ä½æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">fast_pow</span><span class="params">(<span class="keyword">double</span> x, <span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">        <span class="keyword">double</span> result = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (n &gt; <span class="number">0</span> )&#123;</span><br><span class="line"><span class="comment">//            if(n % 2 == 0)&#123;</span></span><br><span class="line"><span class="comment">//                // å¦‚æœæŒ‡æ•°ä¸ºå¶æ•°</span></span><br><span class="line"><span class="comment">//                n /= 2;</span></span><br><span class="line"><span class="comment">//                x = x * x % 1000;</span></span><br><span class="line"><span class="comment">//            &#125;if(n % 2 != 0 )&#123;</span></span><br><span class="line"><span class="comment">//                // æŒ‡æ•°ä¸ºå¥‡æ•°</span></span><br><span class="line"><span class="comment">//                n--; //  æŒ‡æ•°å‡ä¸€ä¸ºå¶æ•°</span></span><br><span class="line"><span class="comment">//                result = result * x % 1000;</span></span><br><span class="line"><span class="comment">//                n /= 2;</span></span><br><span class="line"><span class="comment">//                x = x * x % 1000;</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line">            <span class="keyword">if</span>( (n &amp; <span class="number">1</span>) == <span class="number">1</span>) &#123;  <span class="comment">// n%2 == 1  å¥‡æ•°   ä½¿ç”¨ä½è¿ç®—æ›´åŠ é«˜æ•ˆ</span></span><br><span class="line">                result = result * x % <span class="number">1000</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// n /= 2;</span></span><br><span class="line">            n &gt;&gt;= <span class="number">2</span>; <span class="comment">// å³ç§»</span></span><br><span class="line">            x = x * x % <span class="number">1000</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result % <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">long</span> start =  System.nanoTime();</span><br><span class="line"><span class="comment">//        double ans = pow(2, 1000000000);</span></span><br><span class="line">        <span class="keyword">double</span> anss = fast_pow(<span class="number">2</span>, <span class="number">10000000</span>);</span><br><span class="line">        <span class="keyword">long</span> end = System.nanoTime();</span><br><span class="line"></span><br><span class="line">        System.out.println(anss);</span><br><span class="line">        System.out.println(<span class="string">"è€—æ—¶ï¼š"</span> +  (end - start)   +<span class="string">" ns"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>é™„ä¸ŠACçš„ç»“æœï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">myPow</span><span class="params">(<span class="keyword">double</span> x, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> N = n;</span><br><span class="line">        <span class="keyword">if</span> (N &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            x = <span class="number">1</span> / x;</span><br><span class="line">            N = -N;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> fastPow(x, N);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">double</span> <span class="title">fastPow</span><span class="params">(<span class="keyword">double</span> x, <span class="keyword">long</span> n)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">0</span>)  <span class="keyword">return</span> <span class="number">1.0</span>;</span><br><span class="line">        <span class="keyword">double</span> ans = <span class="number">1.0</span>;</span><br><span class="line">        <span class="keyword">while</span>(n &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>((n &amp; <span class="number">1</span> ) == <span class="number">1</span>)&#123;</span><br><span class="line">                ans = ans*x;</span><br><span class="line">            &#125;</span><br><span class="line">            n &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">            x = x * x;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><a href="/2020/02/12/leetcode-50-%E5%B9%82%E5%87%BD%E6%95%B0/1581498031170.png" data-fancybox="group" data-caption="1581498031170" class="fancybox"><img alt="1581498031170" style="zoom:80%;" align="center" data-src="/2020/02/12/leetcode-50-%E5%B9%82%E5%87%BD%E6%95%B0/1581498031170.png" class="lazyload" title="1581498031170"></a><p>å¿«é€Ÿå¹‚å¾ˆå·§å¦™ï¼å€¼å¾—å­¦ä¹ ï¼åŠ æ²¹ï¼ï¼ï¼</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Algorithm" scheme="https://Castile.github.io/categories/Algorithm/"/>
    
    
      <category term="é€’å½’" scheme="https://Castile.github.io/tags/%E9%80%92%E5%BD%92/"/>
    
      <category term="ç®—æ³•" scheme="https://Castile.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="ä¸­ç­‰" scheme="https://Castile.github.io/tags/%E4%B8%AD%E7%AD%89/"/>
    
      <category term="æ•°å­¦" scheme="https://Castile.github.io/tags/%E6%95%B0%E5%AD%A6/"/>
    
  </entry>
  
  <entry>
    <title>leetcode-104-äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦</title>
    <link href="https://castile.github.io/2020/02/12/leetcode-104-%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E6%9C%80%E5%A4%A7%E6%B7%B1%E5%BA%A6/"/>
    <id>https://castile.github.io/2020/02/12/leetcode-104-%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E6%9C%80%E5%A4%A7%E6%B7%B1%E5%BA%A6/</id>
    <published>2020-02-12T04:29:06.000Z</published>
    <updated>2020-02-12T06:08:50.624Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="æè¿°"><a class="markdownIt-Anchor" href="#æè¿°"></a> æè¿°</h1><h2 id="leetcode-104-äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ç®€å•"><a class="markdownIt-Anchor" href="#leetcode-104-äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ç®€å•"></a> leetcode-104ï¼š äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ã€ç®€å•ã€‘</h2><blockquote><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ‰¾å‡ºå…¶æœ€å¤§æ·±åº¦ã€‚</p><p>äºŒå‰æ ‘çš„æ·±åº¦ä¸ºæ ¹èŠ‚ç‚¹åˆ°æœ€è¿œå¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ•°ã€‚</p><p>è¯´æ˜: å¶å­èŠ‚ç‚¹æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚</p><p>ç¤ºä¾‹ï¼š<br>ç»™å®šäºŒå‰æ ‘ [3,9,20,null,null,15,7]ï¼Œ</p><p>â€‹3</p><p>/ <br>9  20<br>/  <br>15   7<br>è¿”å›å®ƒçš„æœ€å¤§æ·±åº¦ 3 ã€‚</p><p>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/maximum-depth-of-binary-tree" target="_blank" rel="noopener">https://leetcode-cn.com/problems/maximum-depth-of-binary-tree</a></p></blockquote><h1 id="åˆ†æ"><a class="markdownIt-Anchor" href="#åˆ†æ"></a> åˆ†æ</h1><ol><li>å¾ˆç›´è§‚æƒ³åˆ°é€’å½’æ¥è§£å†³ï¼Œæ ¹èŠ‚ç‚¹çš„æ•°çš„é«˜åº¦ç­‰äº 1 åŠ ä¸Š å·¦å­æ ‘çš„é«˜åº¦ä¸å³å­æ•°é«˜åº¦çš„æœ€å¤§å€¼ã€‚</li></ol><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mi>o</mi><mi>o</mi><msub><mi>t</mi><mi>h</mi></msub><mo>=</mo><mn>1</mn><mo>+</mo><mi>max</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>S</mi><mi>u</mi><msub><mi>b</mi><mi>L</mi></msub><mo>+</mo><mi>S</mi><mi>u</mi><msub><mi>b</mi><mi>R</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Root_h = 1 + \max(Sub_L + Sub_R)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault">o</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">h</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">max</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">u</span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">L</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">u</span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><ol start="2"><li>è¿­ä»£ï¼š BFSå¹¿åº¦ä¼˜å…ˆéå†ï¼Œå› ä¸ºBFSæ˜¯æŒ‰å±‚æ¬¡éå†ï¼Œæ‰€ä»¥äºŒå‰æ ‘æœ‰å¤šå°‘å±‚ï¼ŒäºŒå‰æ ‘çš„é«˜åº¦å°±ç­‰äºå±‚æ•°ã€‚</li><li>dfsï¼š å…¶å®æ˜¯æŒ‰ç…§äºŒå‰æ ‘çš„å‰åºéå†é¡ºåºï¼Œå°†æ¯ä¸ªèŠ‚ç‚¹çš„å½“å‰æ·±åº¦è®°å½•ä¸‹æ¥ï¼Œè¿™é‡Œä½¿ç”¨äº†Pairç»“æ„</li></ol><p>æ—¶é—´å¤æ‚åº¦å‡ä¸ºO(n)ï¼Œ ç©ºé—´å¤æ‚åº¦å‡ä¸ºO(n)ï¼Œå¦‚æœæ˜¯å¹³è¡¡äºŒå‰æ ‘çš„è¯ï¼Œæ—¶é—´å¤æ‚åº¦æœ€å¥½æƒ…å†µä¸ºO(logN)ã€‚</p><h1 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h1><p>github:  <a href="https://github.com/Castile/algorithm/blob/master/leetcode/src/Tree/leetcode104_MaximumDepthofBinaryTree.java" target="_blank" rel="noopener">https://github.com/Castile/algorithm/blob/master/leetcode/src/Tree/leetcode104_MaximumDepthofBinaryTree.java</a></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.sun.org.apache.xalan.internal.xsltc.util.IntegerArray;</span><br><span class="line"><span class="keyword">import</span> javafx.util.Pair;</span><br><span class="line"><span class="keyword">import</span> jdk.internal.org.objectweb.asm.commons.InstructionAdapter;</span><br><span class="line"><span class="keyword">import</span> sun.awt.TracedEventQueue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Hongliang Zhu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020-02-06 22:38</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> val;</span><br><span class="line">    TreeNode left;</span><br><span class="line">    TreeNode right;</span><br><span class="line"></span><br><span class="line">    TreeNode(<span class="keyword">int</span> x) &#123;</span><br><span class="line">        val = x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">leetcode104_MaximumDepthofBinaryTree</span> </span>&#123;</span><br><span class="line">    <span class="comment">//    static  int i =0;</span></span><br><span class="line"><span class="comment">//    static  int j = 0;   // ä¸èƒ½åœ¨è¿™é‡Œå®šä¹‰</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">maxDepth</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> i = maxDepth(root.left);</span><br><span class="line">        <span class="keyword">int</span> j = maxDepth(root.right);</span><br><span class="line">        <span class="keyword">return</span> Math.max(i, j) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * BFS å±‚æ¬¡éå†ï¼Œ è®°å½•å±‚æ•°ï¼Œå³ä¸ºæ·±åº¦</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> root æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> äºŒå‰æ ‘çš„æ·±åº¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">maxDepth_BFS</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        LinkedList&lt;TreeNode&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;(); <span class="comment">// é˜Ÿåˆ—</span></span><br><span class="line">        queue.add(root);</span><br><span class="line">        <span class="keyword">int</span> maxDepth = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">            maxDepth++;<span class="comment">// å±‚æ•°åŠ 1</span></span><br><span class="line">            <span class="comment">// å°†å½“å‰å±‚å‡ºé˜Ÿåˆ—</span></span><br><span class="line">            <span class="keyword">int</span> currSize = queue.size();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; currSize; i++) &#123;</span><br><span class="line">                TreeNode node = queue.poll();</span><br><span class="line">                <span class="keyword">if</span> (node.left != <span class="keyword">null</span>) queue.add(node.left);</span><br><span class="line">                <span class="keyword">if</span> (node.right != <span class="keyword">null</span>) queue.add(node.right);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxDepth;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">maxDepth_DFS</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        LinkedList&lt;Pair&lt;TreeNode, Integer&gt;&gt; stack = <span class="keyword">new</span> LinkedList&lt;&gt;(); <span class="comment">// æ ˆ</span></span><br><span class="line">        stack.push(<span class="keyword">new</span> Pair&lt;&gt;(root, <span class="number">1</span>));  <span class="comment">// æ ¹èŠ‚ç‚¹çš„æ·±åº¦ä¸º1</span></span><br><span class="line">        <span class="keyword">int</span> maxDepth = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">            Pair&lt;TreeNode, Integer&gt; currNode = stack.pop(); <span class="comment">// å½“å‰èŠ‚ç‚¹</span></span><br><span class="line">            maxDepth = Math.max(maxDepth, currNode.getValue()); <span class="comment">// ä¸å½“å‰èŠ‚ç‚¹çš„æ·±åº¦æ¯”è¾ƒ</span></span><br><span class="line">            <span class="comment">// å·¦å³å­æ ‘è¿›æ ˆ</span></span><br><span class="line">            <span class="keyword">if</span> (currNode.getKey().left != <span class="keyword">null</span>) &#123;</span><br><span class="line">                stack.push(<span class="keyword">new</span> Pair&lt;&gt;(currNode.getKey().left, currNode.getValue() + <span class="number">1</span>)); <span class="comment">// æ·±åº¦åŠ 1</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (currNode.getKey().right != <span class="keyword">null</span>) &#123;</span><br><span class="line">                stack.push(<span class="keyword">new</span> Pair&lt;&gt;(currNode.getKey().right, currNode.getValue() + <span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxDepth;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        TreeNode root = <span class="keyword">new</span> TreeNode(<span class="number">1</span>);</span><br><span class="line">        TreeNode t2 = <span class="keyword">new</span> TreeNode(<span class="number">2</span>);</span><br><span class="line">        TreeNode t3 = <span class="keyword">new</span> TreeNode(<span class="number">3</span>);</span><br><span class="line">        TreeNode t4 = <span class="keyword">new</span> TreeNode(<span class="number">4</span>);</span><br><span class="line">        TreeNode t5 = <span class="keyword">new</span> TreeNode(<span class="number">5</span>);</span><br><span class="line">        root.left = t2;</span><br><span class="line">        root.right = t3;</span><br><span class="line">        t2.left = t4;</span><br><span class="line">        t2.right = t5;</span><br><span class="line"></span><br><span class="line">        System.out.println(maxDepth(root));  <span class="comment">// 3</span></span><br><span class="line">        System.out.println(maxDepth_BFS(root));  <span class="comment">// 3</span></span><br><span class="line">        System.out.println(maxDepth_DFS(root)); <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Algorithm" scheme="https://Castile.github.io/categories/Algorithm/"/>
    
    
      <category term="äºŒå‰æ ‘" scheme="https://Castile.github.io/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/"/>
    
      <category term="é€’å½’" scheme="https://Castile.github.io/tags/%E9%80%92%E5%BD%92/"/>
    
      <category term="ç®—æ³•" scheme="https://Castile.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="ç®€å•" scheme="https://Castile.github.io/tags/%E7%AE%80%E5%8D%95/"/>
    
  </entry>
  
  <entry>
    <title>leetcode-206-åè½¬é“¾è¡¨</title>
    <link href="https://castile.github.io/2020/02/06/leetcode-206-%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8/"/>
    <id>https://castile.github.io/2020/02/06/leetcode-206-%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8/</id>
    <published>2020-02-06T09:39:44.000Z</published>
    <updated>2020-02-06T10:06:18.234Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="æè¿°"><a class="markdownIt-Anchor" href="#æè¿°"></a> æè¿°</h1><blockquote><p>leetcode206ï¼š åè½¬é“¾è¡¨ ã€ç®€å•ã€‘</p><p>åè½¬ä¸€ä¸ªå•é“¾è¡¨ã€‚</p><p>ç¤ºä¾‹:</p><p>è¾“å…¥: 1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;NULL<br>è¾“å‡º: 5-&gt;4-&gt;3-&gt;2-&gt;1-&gt;NULL<br>è¿›é˜¶:<br>ä½ å¯ä»¥è¿­ä»£æˆ–é€’å½’åœ°åè½¬é“¾è¡¨ã€‚ä½ èƒ½å¦ç”¨ä¸¤ç§æ–¹æ³•è§£å†³è¿™é“é¢˜ï¼Ÿ</p><p>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/reverse-linked-list" target="_blank" rel="noopener">https://leetcode-cn.com/problems/reverse-linked-list</a></p></blockquote><h1 id="åˆ†æ"><a class="markdownIt-Anchor" href="#åˆ†æ"></a> åˆ†æ</h1><ul><li><p>è¿­ä»£ï¼š å¦‚ä¸‹å›¾ï¼š</p><a href="/2020/02/06/leetcode-206-%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8/1580982171220.png" data-fancybox="group" data-caption="1580982171220" class="fancybox"><img alt="1580982171220" style="zoom:80%;" align="center" data-src="/2020/02/06/leetcode-206-%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8/1580982171220.png" class="lazyload" title="1580982171220"></a></li></ul><a href="/2020/02/06/leetcode-206-%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8/1580982209880.png" data-fancybox="group" data-caption="1580982209880" class="fancybox"><img alt="1580982209880" style="zoom:80%;" align="center" data-src="/2020/02/06/leetcode-206-%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8/1580982209880.png" class="lazyload" title="1580982209880"></a><p>â€‹æ—¶é—´å¤æ‚åº¦ï¼šO(n) ã€‚ å‡è®¾ <em>n</em> æ˜¯åˆ—è¡¨çš„é•¿åº¦ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚</p><p>â€‹ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚</p><ol start="2"><li><p>é€’å½’</p><p>1ã€æ‰¾åˆ°é€’å½’å‡ºå£</p><p>2ã€ç¡®å®šè¿”å›å€¼</p><p>3ã€åˆ†æå•æ¬¡é€’å½’éœ€è¦åšçš„äº‹æƒ…</p><p>ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥å…·ä½“åˆ†æä¸€ä¸‹ï¼š</p><p>é¦–å…ˆï¼Œæ‰¾åˆ°é€’å½’å‡ºå£ï¼Œè¿™ä¸ªè¿˜æ˜¯éå¸¸ç®€å•çš„ï¼Œå°±æ˜¯å½“å‰å³å°†åè½¬çš„èŠ‚ç‚¹ä¸º null æˆ–è€…æ˜¯ åè½¬é“¾è¡¨ ä¸º null æ—¶ï¼ˆä¸€è½®é€’å½’å…¶å®å°±åªæœ‰ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œåé¢ä¼šè®²ï¼‰ï¼Œè¯´æ˜å·²ç»å…¨éƒ¨åè½¬å®Œæ¯•äº†ï¼Œå³é€’å½’å‡ºå£ï¼›<br>å…¶æ¬¡ï¼Œç¡®å®šè¿”å›å€¼ï¼Œæˆ‘ä»¬åªéœ€è¦è¿”å›åè½¬é“¾è¡¨çš„å¤´ç»“ç‚¹å³å¯ï¼›<br>æœ€åï¼Œåˆ†æå•æ¬¡é€’å½’éœ€è¦åšçš„äº‹æƒ…ï¼Œé€’å½’å…¶å®æ¯ä¸€è½®åšçš„äº‹æƒ…éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬ä¸éœ€è¦å»é‡å¤è€ƒè™‘ï¼Œè¿™æ ·åè€Œä¼šå¾ˆä¹±ï¼Œåªéœ€è¦è€ƒè™‘å•è½®é€’å½’éœ€è¦åšä»€ä¹ˆå°±å¯ä»¥äº†ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°±åªæœ‰ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œä¸€ä¸ªæ˜¯å³å°†åè½¬çš„èŠ‚ç‚¹å…ƒç´ ï¼Œä¸€ä¸ªæ˜¯å·²ç»åè½¬å®Œæ¯•çš„é“¾è¡¨å¤´ç»“ç‚¹ã€‚ æˆ‘ä»¬è¦åšçš„ä¸€è½®é€’å½’åªæ˜¯ å°†å½“å‰èŠ‚ç‚¹åŠ å…¥åˆ°åè½¬é“¾è¡¨ä¸­ï¼Œä»…æ­¤è€Œå·²ã€‚<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/reverse-linked-list/solution/bang-zhu-da-jia-li-jie-di-gui-zuo-fa-by-jeromememo/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/reverse-linked-list/solution/bang-zhu-da-jia-li-jie-di-gui-zuo-fa-by-jeromememo/</a></p></li></ol><h1 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h1><p><a href="https://github.com/Castile/algorithm/blob/master/leetcode/src/LinkedList/leetcode206_ReverseLinkedList.java" target="_blank" rel="noopener">https://github.com/Castile/algorithm/blob/master/leetcode/src/LinkedList/leetcode206_ReverseLinkedList.java</a></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> LinkedList;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Hongliang Zhu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020-02-06 17:09</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    åè½¬å•é“¾è¡¨ï¼š è¦æ±‚æ—¶é—´å¤æ‚åº¦ä¸ºO((n) ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(1)ï¼›</span></span><br><span class="line"><span class="comment">    Input: 1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;NULL</span></span><br><span class="line"><span class="comment">    Output: 5-&gt;4-&gt;3-&gt;2-&gt;1-&gt;NULL</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">leetcode206_ReverseLinkedList</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è¿­ä»£</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ListNode <span class="title">reverseList</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(head == <span class="keyword">null</span>)   <span class="keyword">return</span> head;</span><br><span class="line">        ListNode pre = <span class="keyword">null</span>;</span><br><span class="line">        ListNode next = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">while</span> (head != <span class="keyword">null</span>) &#123;</span><br><span class="line">            next = head.next;</span><br><span class="line">            head.next = pre;</span><br><span class="line">            pre = head;</span><br><span class="line">            head = next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> pre;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// é€’å½’ç‰ˆæœ¬</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span>  ListNode <span class="title">reverdeList_Recur</span><span class="params">(ListNode head)</span></span>&#123;</span><br><span class="line">       <span class="keyword">return</span> help(head, <span class="keyword">null</span>, head.next);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ListNode <span class="title">help</span><span class="params">(ListNode head, ListNode pre, ListNode next)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(head == <span class="keyword">null</span>)    <span class="keyword">return</span> pre;</span><br><span class="line">        next = head.next;</span><br><span class="line">        head.next = pre;</span><br><span class="line">        pre = head;</span><br><span class="line">        head = next;</span><br><span class="line">        <span class="keyword">return</span> help(head, pre, next);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¼˜ç¾é€’å½’</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ListNode <span class="title">reverseListRR</span><span class="params">(ListNode head)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span>)   <span class="keyword">return</span> head;</span><br><span class="line">        ListNode p = reverseListRR(head.next);</span><br><span class="line">        <span class="comment">//è¿™é‡Œçš„curå°±æ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        ListNode cur = reverseList(head.next);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¦‚æœé“¾è¡¨æ˜¯ 1-&gt;2-&gt;3-&gt;4-&gt;5ï¼Œé‚£ä¹ˆæ­¤æ—¶çš„curå°±æ˜¯5</span></span><br><span class="line">        <span class="comment">//è€Œheadæ˜¯4ï¼Œheadçš„ä¸‹ä¸€ä¸ªæ˜¯5ï¼Œä¸‹ä¸‹ä¸€ä¸ªæ˜¯ç©º</span></span><br><span class="line">        <span class="comment">//æ‰€ä»¥head.next.next å°±æ˜¯5-&gt;4</span></span><br><span class="line">        head.next.next = head; <span class="comment">//é˜²æ­¢é“¾è¡¨å¾ªç¯ï¼Œéœ€è¦å°†head.nextè®¾ç½®ä¸ºç©º</span></span><br><span class="line">        head.next  = <span class="keyword">null</span>; <span class="comment">//æ¯å±‚é€’å½’å‡½æ•°éƒ½è¿”å›curï¼Œä¹Ÿå°±æ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printLinkedList</span><span class="params">(ListNode head)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(head == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">        ListNode p = head;</span><br><span class="line">        <span class="keyword">while</span> (p != <span class="keyword">null</span>)&#123;</span><br><span class="line">            System.out.print(p.val +<span class="string">"\t"</span>);</span><br><span class="line">            p = p.next;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ListNode head = <span class="keyword">new</span> ListNode(<span class="number">1</span>);</span><br><span class="line">        ListNode n1 = <span class="keyword">new</span> ListNode(<span class="number">2</span>);</span><br><span class="line">        ListNode n2 = <span class="keyword">new</span> ListNode(<span class="number">3</span>);</span><br><span class="line">        ListNode n3 = <span class="keyword">new</span> ListNode(<span class="number">4</span>);</span><br><span class="line">        ListNode n4 = <span class="keyword">new</span> ListNode(<span class="number">5</span>);</span><br><span class="line">        head.next = n1;</span><br><span class="line">        n1.next = n2;</span><br><span class="line">        n2.next = n3;</span><br><span class="line">        n3.next = n4;</span><br><span class="line"></span><br><span class="line">        printLinkedList(head);</span><br><span class="line"></span><br><span class="line">        ListNode re = reverseListRR(head);</span><br><span class="line"></span><br><span class="line">        printLinkedList(re);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><a href="/2020/02/06/leetcode-206-%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8/1580982603520.png" data-fancybox="group" data-caption="1580982603520" class="fancybox"><img alt="1580982603520" align="center" data-src="/2020/02/06/leetcode-206-%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8/1580982603520.png" class="lazyload" title="1580982603520"></a>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Algorithm" scheme="https://Castile.github.io/categories/Algorithm/"/>
    
    
      <category term="é€’å½’" scheme="https://Castile.github.io/tags/%E9%80%92%E5%BD%92/"/>
    
      <category term="ç®€å•" scheme="https://Castile.github.io/tags/%E7%AE%80%E5%8D%95/"/>
    
      <category term="é“¾è¡¨" scheme="https://Castile.github.io/tags/%E9%93%BE%E8%A1%A8/"/>
    
  </entry>
  
  <entry>
    <title>leetcode-119-æ¨è¾‰ä¸‰è§’2</title>
    <link href="https://castile.github.io/2020/02/06/leetcode-119-%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%922/"/>
    <id>https://castile.github.io/2020/02/06/leetcode-119-%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%922/</id>
    <published>2020-02-06T07:28:31.000Z</published>
    <updated>2020-02-06T08:26:20.916Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="æè¿°"><a class="markdownIt-Anchor" href="#æè¿°"></a> æè¿°</h1><blockquote><p>leetcode119ï¼š æ¨è¾‰ä¸‰è§’2 ã€ç®€å•ã€‘</p><p>ç»™å®šä¸€ä¸ªéè´Ÿç´¢å¼• <em>k</em>ï¼Œå…¶ä¸­ <em>k</em> â‰¤ 33ï¼Œè¿”å›æ¨è¾‰ä¸‰è§’çš„ç¬¬ <em>k</em> è¡Œã€‚</p><a href="/2020/02/06/leetcode-119-%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%922/blog\source\_posts\leetcode-119-æ¨è¾‰ä¸‰è§’2\PascalTriangleAnimated2.gif" data-fancybox="group" data-caption="img" class="fancybox"><img alt="img" style="zoom:80%;" data-src="/2020/02/06/leetcode-119-%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%922/blog\source\_posts\leetcode-119-æ¨è¾‰ä¸‰è§’2\PascalTriangleAnimated2.gif" class="lazyload" title="img"></a><p>åœ¨æ¨è¾‰ä¸‰è§’ä¸­ï¼Œæ¯ä¸ªæ•°æ˜¯å®ƒå·¦ä¸Šæ–¹å’Œå³ä¸Šæ–¹çš„æ•°çš„å’Œã€‚</p><p><strong>ç¤ºä¾‹:</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: 3</span><br><span class="line">è¾“å‡º: [1,3,3,1]</span><br></pre></td></tr></table></figure></div></blockquote><h1 id="åˆ†æ"><a class="markdownIt-Anchor" href="#åˆ†æ"></a> åˆ†æ</h1><ol><li>è¿™é¢˜å’Œå‰ä¸€é¢˜ä¸€æ ·ï¼Œåªä¸è¿‡è¿”å›ç‰¹å®šå±‚ï¼ŒåŒæ ·çš„æ€è·¯</li></ol>   <div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">getRow</span><span class="params">(<span class="keyword">int</span> rowIndex)</span> </span>&#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; triangle = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[rowIndex+<span class="number">2</span>][rowIndex+<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">if</span>(rowIndex+<span class="number">1</span> == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i &lt;= rowIndex+<span class="number">1</span>; i++)&#123;</span><br><span class="line">            List&lt;Integer&gt; list =  <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= i ; j++)&#123;</span><br><span class="line">                list.add(calc(dp, i, j));</span><br><span class="line">            &#125;</span><br><span class="line">            triangle.add(list);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> triangle.get(rowIndex);  <span class="comment">// æ³¨æ„è¿”å›çš„æ˜¯æŒ‡å®šå±‚</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span>[][] dp, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>( j == <span class="number">1</span> || i == j)&#123;</span><br><span class="line">            dp[i][j] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;      </span><br><span class="line">        <span class="keyword">if</span>(dp[i][j] != <span class="number">0</span>)   <span class="keyword">return</span> dp[i][j];</span><br><span class="line">        dp[i][j] = calc(dp, i - <span class="number">1</span>, j - <span class="number">1</span>) + calc(dp, i - <span class="number">1</span>, j);</span><br><span class="line">        <span class="keyword">return</span> dp[i][j];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><ol start="2"><li><p>è¿™é¢˜å’Œ<a href="%5Bhttps:/Castile.github.io/2020/02/06/leetcode-118-%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%921/%5D(%5Bhttps:/Castile.github.io/2020/02/06/leetcode-118-%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%921/)">æ¨è¾‰ä¸‰è§’1</a>çš„é¢˜ç›®å·®ä¸å¤šï¼Œ118é¢˜éœ€è¦ä¿å­˜æ‰€æœ‰çš„ï¼Œä½†æ˜¯è¿™é¢˜åªéœ€è¦è¿”å›æŒ‡å®šå±‚ï¼Œå› ä¸ºå½“å‰å±‚çš„å€¼åªä¾èµ–äºä¸Šä¸€å±‚çš„å€¼ï¼Œæ•…ä½¿ç”¨ä¸€ä¸ªlistæ¥ä¿å­˜ä¸Šä¸€å±‚çš„å€¼ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">getRow</span><span class="params">(<span class="keyword">int</span> rowIndex)</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; pre = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        List&lt;Integer&gt; cur = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= rowIndex; i++)&#123;</span><br><span class="line">            cur = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= i ; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(j == <span class="number">0</span> || i == j)&#123;</span><br><span class="line">                    cur.add(<span class="number">1</span>);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    cur.add(pre.get(j - <span class="number">1</span>) + pre.get(j));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            pre = cur;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cur;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div></li><li><p>åŸºäº2å¯ä»¥ç»§ç»­ä¼˜åŒ–ï¼šä»¥æŠŠ pre çš„ List çœå»ã€‚è¿™æ ·çš„è¯ï¼Œcuræ¯æ¬¡ä¸å»æ–°å»º Listï¼Œè€Œæ˜¯æŠŠcurå½“ä½œpreã€‚</p><p>åˆå› ä¸ºæ›´æ–°å½“å‰ <code>j</code> çš„æ—¶å€™ï¼Œå°±æŠŠä¹‹å‰<code>j</code>çš„ä¿¡æ¯è¦†ç›–æ‰äº†ã€‚è€Œæ›´æ–° <code>j + 1</code> çš„æ—¶å€™åˆéœ€è¦ä¹‹å‰jçš„ä¿¡æ¯ï¼Œæ‰€ä»¥åœ¨æ›´æ–°å‰ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå˜é‡æŠŠä¹‹å‰<code>j</code>çš„ä¿¡æ¯ä¿å­˜èµ·æ¥ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">getRow</span><span class="params">(<span class="keyword">int</span> rowIndex)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">int</span> pre = <span class="number">1</span>;</span><br><span class="line">       List&lt;Integer&gt; cur = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">       cur.add(<span class="number">1</span>); <span class="comment">// j == 0</span></span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= rowIndex; i++)&#123;</span><br><span class="line">           <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; i; j++)&#123;</span><br><span class="line">               <span class="keyword">int</span> tmp = cur.get(j);</span><br><span class="line">               cur.set(j, pre + cur.get(j));</span><br><span class="line">               pre = tmp;</span><br><span class="line">           &#125;</span><br><span class="line">           cur.add(<span class="number">1</span>);  <span class="comment">// j == i</span></span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> cur;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></div></li><li><p>é™¤äº†ä¸Šè¾¹ä¼˜åŒ–çš„æ€è·¯ï¼Œè¿˜æœ‰ä¸€ç§æƒ³æ³•ï¼Œé‚£å°±æ˜¯å€’ç€è¿›è¡Œï¼Œè¿™æ ·å°±ä¸ä¼šå­˜åœ¨è¦†ç›–çš„æƒ…å†µäº†ã€‚å› ä¸ºæ›´æ–°å®Œjçš„ä¿¡æ¯åï¼Œè™½ç„¶æŠŠ<code>j</code>ä¹‹å‰çš„ä¿¡æ¯è¦†ç›–æ‰äº†ã€‚ä½†æ˜¯ä¸‹ä¸€æ¬¡æˆ‘ä»¬æ›´æ–°çš„æ˜¯<code>j - 1</code>ï¼Œéœ€è¦çš„æ˜¯<code>j - 1</code>å’Œ<code>j - 2</code> çš„ä¿¡æ¯ï¼Œ<code>j</code>ä¿¡æ¯è¦†ç›–å°±ä¸ä¼šé€ æˆå½±å“äº†ã€‚</p></li></ol><h1 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h1><p><a href="https://github.com/Castile/algorithm/blob/master/leetcode/src/RecurrenceAndDynamicProgramming/leetcode119_PascalTriangle2.java" target="_blank" rel="noopener">https://github.com/Castile/algorithm/blob/master/leetcode/src/RecurrenceAndDynamicProgramming/leetcode119_PascalTriangle2.java</a></p><p>ç›¸ä¼¼é¢˜ç›®ï¼š<a href="https:/Castile.github.io/2020/02/06/leetcode-118-%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%921/">æ¨è¾‰ä¸‰è§’</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Algorithm" scheme="https://Castile.github.io/categories/Algorithm/"/>
    
    
      <category term="é€’å½’" scheme="https://Castile.github.io/tags/%E9%80%92%E5%BD%92/"/>
    
      <category term="ç®—æ³•" scheme="https://Castile.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="ç®€å•" scheme="https://Castile.github.io/tags/%E7%AE%80%E5%8D%95/"/>
    
      <category term="dp" scheme="https://Castile.github.io/tags/dp/"/>
    
  </entry>
  
  <entry>
    <title>leetcode-118-æ¨è¾‰ä¸‰è§’1</title>
    <link href="https://castile.github.io/2020/02/06/leetcode-118-%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%921/"/>
    <id>https://castile.github.io/2020/02/06/leetcode-118-%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%921/</id>
    <published>2020-02-06T07:28:12.000Z</published>
    <updated>2020-02-12T04:33:54.279Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="æè¿°"><a class="markdownIt-Anchor" href="#æè¿°"></a> æè¿°</h1><blockquote><p>ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•° numRowsï¼Œç”Ÿæˆæ¨è¾‰ä¸‰è§’çš„å‰ numRows è¡Œã€‚</p><p>åœ¨æ¨è¾‰ä¸‰è§’ä¸­ï¼Œæ¯ä¸ªæ•°æ˜¯å®ƒå·¦ä¸Šæ–¹å’Œå³ä¸Šæ–¹çš„æ•°çš„å’Œã€‚</p><p>ç¤ºä¾‹:</p><p>è¾“å…¥: 5<br>è¾“å‡º:<br>[<br>[1],<br>[1,1],<br>[1,2,1],<br>[1,3,3,1],<br>[1,4,6,4,1]<br>]</p><p>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/pascals-triangle" target="_blank" rel="noopener">https://leetcode-cn.com/problems/pascals-triangle</a></p></blockquote> <a href="/2020/02/06/leetcode-118-%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%921/PascalTriangleAnimated2.gif" data-fancybox="group" data-caption="img" class="fancybox"><img alt="img" style="zoom:80%;" align="center" data-src="/2020/02/06/leetcode-118-%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%921/PascalTriangleAnimated2.gif" class="lazyload" title="img"></a> <h1 id="åˆ†æ"><a class="markdownIt-Anchor" href="#åˆ†æ"></a> åˆ†æ</h1><ol><li><p>æš´åŠ›é€’å½’ï¼šbasecaseï¼šå¯ä»¥çœ‹åˆ°ï¼Œæ¯è¡Œçš„æœ€å·¦è¾¹å’Œæœ€å³è¾¹çš„æ•°å­—æ˜¯1ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†åŸºæœ¬æƒ…å†µå®šä¹‰å¦‚ä¸‹:  <code>f(i, j)=1 where j=1 or j==i</code></p><p>é€’æ¨å…³ç³»ï¼š</p><p>â€‹é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå‡½æ•° <code>f(i,j)</code>å®ƒå°†ä¼šè¿”å›å¸•æ–¯å¡ä¸‰è§’å½¢<code>ç¬¬ i è¡Œ</code>ã€<code>ç¬¬ j åˆ—</code>çš„æ•°å­—ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„å…¬å¼æ¥è¡¨ç¤ºè¿™ä¸€é€’æ¨å…³ç³»ï¼š<code>f(i,j)=f(iâˆ’1,jâˆ’1)+f(iâˆ’1,j)</code></p></li><li><p>åŠ¨æ€è§„åˆ’ï¼šå› ä¸ºæš´åŠ›é€’å½’è¿˜æœ‰å¾ˆå¤šå€¼ä¼šé‡å¤è®¡ç®—ï¼Œæ‰€ä»¥ä½¿ç”¨ä¸€ä¸ªæ•°ç»„ä¿å­˜å·²ç»è®¡ç®—è¿‡çš„å€¼ã€‚</p></li></ol><h1 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h1><p>æºç ï¼š  <a href="https://github.com/Castile/algorithm/blob/master/leetcode/src/RecurrenceAndDynamicProgramming/leetcode118_PascalTriangle.java" target="_blank" rel="noopener">https://github.com/Castile/algorithm/blob/master/leetcode/src/RecurrenceAndDynamicProgramming/leetcode118_PascalTriangle.java</a></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æš´åŠ›é€’å½’ï¼š ä½†æ˜¯ä¼šè¶…æ—¶</span></span><br><span class="line">   <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; generate(<span class="keyword">int</span> numRows) &#123;</span><br><span class="line">       List&lt;List&lt;Integer&gt;&gt; triangle = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">       <span class="keyword">if</span>(numRows == <span class="number">0</span>) <span class="keyword">return</span> triangle;</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i &lt;= numRows; i++)&#123;</span><br><span class="line">           List&lt;Integer&gt; list =  <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">           <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= i ; j++)&#123;</span><br><span class="line">               list.add(calc(i, j));</span><br><span class="line">           &#125;</span><br><span class="line">           triangle.add(list);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> triangle;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">       <span class="keyword">if</span>( j == <span class="number">1</span> || i == j)   <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">       <span class="keyword">return</span> calc(i - <span class="number">1</span>, j - <span class="number">1</span>) + calc(i - <span class="number">1</span>, j);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></div><p>åŠ¨æ€è§„åˆ’ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŠ¨æ€è§„åˆ’</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; generate(<span class="keyword">int</span> numRows) &#123;</span><br><span class="line">            List&lt;List&lt;Integer&gt;&gt; triangle = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[numRows+<span class="number">1</span>][numRows+<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span>(numRows == <span class="number">0</span>) <span class="keyword">return</span> triangle;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i &lt;= numRows; i++)&#123;</span><br><span class="line">                List&lt;Integer&gt; list =  <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= i ; j++)&#123;</span><br><span class="line">                    list.add(calc(dp, i, j));</span><br><span class="line">                &#125;</span><br><span class="line">                triangle.add(list);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> triangle;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span>[][] dp, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">            <span class="keyword">if</span>( j == <span class="number">1</span> || i == j)&#123;</span><br><span class="line">                dp[i][j] = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(dp[i][j] != <span class="number">0</span>)   <span class="keyword">return</span> dp[i][j];</span><br><span class="line">            dp[i][j] = calc(dp, i - <span class="number">1</span>, j - <span class="number">1</span>) + calc(dp, i - <span class="number">1</span>, j);</span><br><span class="line">            <span class="keyword">return</span> dp[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div><p>ç›¸ä¼¼é¢˜ç›®ï¼š  <a href="https://castile.github.io/Castile.github.io/2020/02/06/leetcode-119-%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%922/">leetcode-119-æ¨è¾‰ä¸‰è§’2</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Algorithm" scheme="https://Castile.github.io/categories/Algorithm/"/>
    
    
      <category term="é€’å½’" scheme="https://Castile.github.io/tags/%E9%80%92%E5%BD%92/"/>
    
      <category term="ç®€å•" scheme="https://Castile.github.io/tags/%E7%AE%80%E5%8D%95/"/>
    
      <category term="dp" scheme="https://Castile.github.io/tags/dp/"/>
    
  </entry>
  
  <entry>
    <title>CosNet:åŸºäºååŒæ³¨æ„å­ªç”Ÿç½‘ç»œçš„æ— ç›‘ç£è§†é¢‘ç›®æ ‡åˆ†å‰²</title>
    <link href="https://castile.github.io/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/"/>
    <id>https://castile.github.io/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/</id>
    <published>2020-02-05T13:42:03.000Z</published>
    <updated>2020-02-12T10:16:51.359Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="cvpr2019cosnetsee-more-know-more-unsupervised-video-object-segmentation-with-co-attention-siamese-networks"><a class="markdownIt-Anchor" href="#cvpr2019cosnetsee-more-know-more-unsupervised-video-object-segmentation-with-co-attention-siamese-networks"></a> ã€CVPR2019ã€‘CosNetï¼šSee More, Know More: Unsupervised Video Object Segmentation with Co-Attention Siamese Networks</h1><h2 id="åŸºäºååŒæ³¨æ„å­ªç”Ÿç½‘ç»œçš„æ— ç›‘ç£è§†é¢‘ç›®æ ‡åˆ†å‰²"><a class="markdownIt-Anchor" href="#åŸºäºååŒæ³¨æ„å­ªç”Ÿç½‘ç»œçš„æ— ç›‘ç£è§†é¢‘ç›®æ ‡åˆ†å‰²"></a> åŸºäºååŒæ³¨æ„å­ªç”Ÿç½‘ç»œçš„æ— ç›‘ç£è§†é¢‘ç›®æ ‡åˆ†å‰²</h2><p><strong>ä»£ç ï¼š <a href="https://github.com/Castile/COSNet" target="_blank" rel="noopener">https://github.com/Castile/COSNet</a></strong></p><h1 id="æ¦‚è¿°"><a class="markdownIt-Anchor" href="#æ¦‚è¿°"></a> æ¦‚è¿°</h1><p>â€‹         ä»¥å¾€çš„æ— ç›‘ç£è§†é¢‘ç›®æ ‡åˆ†å‰²åŸºäºæ·±åº¦å­¦ä¹ çš„æ–¹æ³•ä»…ä»…è€ƒè™‘çŸ­æœŸæ—¶åŸŸä¿¡æ¯ï¼Œæ²¡æœ‰è€ƒè™‘æ•´ä¸ªè§†é¢‘çš„å…¨å±€ä¿¡æ¯ï¼Œè€Œä¸”å¹¶æ²¡æœ‰æœ‰æ•ˆåˆ©ç”¨è§†é¢‘å†…å®¹çš„å†…åœ¨ç›¸å…³ä¿¡æ¯ ï¼Œ**Co-attention Siamese Network(CosNet)**æå‡ºäº†ä¸€ä¸ªç»Ÿä¸€çš„ç«¯åˆ°ç«¯çš„æ— ç›‘ç£è§†é¢‘ç›®æ ‡åˆ†å‰²ç½‘ç»œã€‚</p><p>â€‹CosNetå°†UVOSä½œä¸ºco-attentionçš„è¿‡ç¨‹ã€‚ä¸€ä¸ªco-attentionæ¨¡å—å­¦ä¹ å»æ˜¾ç¤ºç¼–ç å¸§ä¸å¸§ä¹‹é—´çš„å…³ç³»ï¼Œä½¿CosNetå¯ä»¥è·å–é¢‘ç¹ç›¸å…³çš„åŒºåŸŸï¼Œè¿›è€Œå¯ä»¥å¸®åŠ©å‘ç°å‰æ™¯ç›®æ ‡æ¥è¿›è¡Œåˆ†å‰²ã€‚å…·ä½“çš„ï¼Œåœ¨è®­ç»ƒé˜¶æ®µï¼Œco-attentionè¿‡ç¨‹èƒ½å¤Ÿåˆ†è§£ä¸ºåŒä¸€è§†é¢‘ä¸­ä»»æ„å¸§å¯¹ä¹‹é—´çš„ç›¸å…³æ€§å­¦ä¹ ï¼Œåœ¨æµ‹è¯•çš„æ—¶å€™ï¼ŒCosNetä½¿ç”¨å…¨å±€è§†è§’æ¨æ–­å‰æ™¯ç›®æ ‡ï¼Œä¹Ÿå°±æ˜¯è¯´åˆ©ç”¨æµ‹è¯•å¸§ä¸å¤šä¸ªç›¸å…³çš„å¸§çš„co-attentionä¿¡æ¯æ¥åˆ¤æ–­ä¸»è¦çš„å‰æ™¯ç›®æ ‡ã€‚CosNetçš„ç½‘ç»œç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚è¿™æ˜¯æ— ç›‘ç£è§†é¢‘ç›®æ ‡åˆ†å‰²æœ€å¥½çš„æ¨¡å‹ï¼Œåœ¨Davis2016æ•°æ®é›†ä¸Šçš„J-meansè¾¾åˆ°äº†80.5çš„åˆ†æ•°ã€‚</p><a href="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580910682924.png" data-fancybox="group" data-caption="1580910682924" class="fancybox"><img alt="1580910682924" style="zoom:80%;" data-src="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580910682924.png" class="lazyload" title="1580910682924"></a><p>â€‹CosNetè®¤ä¸ºæ— ç›‘ç£è§†é¢‘ç›®æ ‡åˆ†å‰²ä¸‹çš„ä¸»è¦ç›®æ ‡æ‹¥æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><blockquote><p>1)å•å¸§å¯åŒºåˆ†(æœ¬åœ°æ˜¾è‘—æ€§)ï¼›</p><p>2)åœ¨æ•´ä¸ªè§†é¢‘åºåˆ—ä¸­é¢‘ç¹å‡ºç°çš„ç›®æ ‡(å…¨å±€ä¸€è‡´æ€§)ã€‚</p></blockquote><p>â€‹è¿™ä¸¤ä¸ªç‰¹ç‚¹å¯¹äºåŒºåˆ†è§†é¢‘åºåˆ—ä¸­çš„ä¸»è¦ç›®æ ‡çš„éå¸¸é‡è¦çš„ã€‚é€šè¿‡è€ƒè™‘è§†é¢‘çš„å…¨å±€ä¿¡æ¯ï¼Œå¯ä»¥é”å®šä¸»è¦ç›®æ ‡ï¼Œè¿›è€Œè¿›è¡Œåˆ†å‰²ã€‚</p><h1 id="ç½‘ç»œç»“æ„"><a class="markdownIt-Anchor" href="#ç½‘ç»œç»“æ„"></a> ç½‘ç»œç»“æ„</h1><p><a href="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580910735819.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580910735819.png" class="lazyload" title></a></p><p>â€‹è¾“å…¥æ˜¯å›¾ç‰‡å¯¹ï¼Œå›¾ç‰‡å¯¹å¯ä»¥ä»è§†é¢‘ä¸­éšæœºå–å¾—ã€‚ä¸¤å¸§å›¾ç‰‡ç»è¿‡åŸºç½‘ç»œï¼ˆDeeplabV3ï¼‰ï¼Œä¹Ÿç§°ç¼–ç ç½‘ç»œï¼ˆEncoderï¼‰ï¼Œ å°†ä¸¤å¸§ç¼–ç æˆåµŒå…¥ç‰¹å¾ï¼Œç„¶åååŒæ³¨æ„åŠ›æ¨¡å—ä¼šè®¡ç®—ä¸¤å¸§çš„ç›¸ä¼¼æ€§ï¼Œå³ä¸¤å¸§ä¹‹é—´çš„ç›¸å…³æ³¨æ„åŠ›ç‰¹å¾ã€‚æœ€åè¾“å…¥åˆ°åˆ†å‰²æ¨¡å—å¾—åˆ°æœ€åçš„åˆ†å‰²ç»“æœã€‚</p><h1 id="ç®—æ³•"><a class="markdownIt-Anchor" href="#ç®—æ³•"></a> ç®—æ³•</h1><h2 id="co-attention-mechanisms-in-cosnet"><a class="markdownIt-Anchor" href="#co-attention-mechanisms-in-cosnet"></a> Co-attention Mechanisms in COSNet</h2><p>ä½œè€…æå‡ºäº†ä¸‰ç§ååŒæ³¨æ„åŠ›æœºåˆ¶ï¼Œåˆ†åˆ«ä¸ºVanilla co-attentionï¼Œ Symmetric co-attentionï¼ŒChannel-wise co-attentionã€‚ä¸€ä¸ªæ³¨æ„åŠ›æ¨¡å—è¿™æ˜¾å¼åœ°ç¼–ç ä¸¤å¸§ä¹‹é—´çš„ç›¸å…³æ€§ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—COsNetå­¦ä¹ åˆ°é¢‘ç¹ç›¸å…³çš„åŒºåŸŸã€‚</p><h3 id="vanilla-co-attention"><a class="markdownIt-Anchor" href="#vanilla-co-attention"></a> Vanilla co-attention</h3><p><a href="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580911492126.png" data-fancybox="group" data-caption="1580911492126" class="fancybox"><img alt="1580911492126" data-src="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580911492126.png" class="lazyload" title="1580911492126"></a></p><p>S æ˜¯ä¸¤å¸§ä¹‹é—´çš„afï¬nity matrixï¼ˆç›¸ä¼¼çŸ©é˜µï¼‰ï¼ŒVaå’ŒVbçš„shapeæ˜¯</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>W</mi><mo>âˆ—</mo><mi>H</mi><mo>âˆ—</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">W * H  * C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span></span></span></span></span></p><p>Vaçš„æ¯ä¸€åˆ—è¡¨ç¤ºç‰¹å¾å‘é‡ï¼ŒWæ˜¯ä¸€ä¸ªæ–¹é˜µ</p><p><a href="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580911687054.png" data-fancybox="group" data-caption="1580911687054" class="fancybox"><img alt="1580911687054" data-src="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580911687054.png" class="lazyload" title="1580911687054"></a></p><p>æ‰€ä»¥Såˆå¯ä»¥å†™æˆï¼š</p><div align="center"> <p><a href="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580911733141.png" data-fancybox="group" data-caption="1580911733141" class="fancybox"><img alt="1580911733141" data-src="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580911733141.png" class="lazyload" title="1580911733141"></a></p></div><p>é€šè¿‡ä¸Šé¢å…¬å¼ï¼Œé¦–å…ˆå¯¹æ¯ä¸€å¸§çš„ç‰¹å¾è¡¨ç¤ºè¿›è¡Œçº¿æ€§å˜æ¢ï¼Œç„¶åè®¡ç®—å®ƒä»¬ä¹‹é—´çš„è·ç¦» ã€‚</p><h3 id="symmetric-co-attention"><a class="markdownIt-Anchor" href="#symmetric-co-attention"></a> Symmetric co-attention</h3><p>å¦‚æœå¯¹æƒé‡çŸ©é˜µè¿›è¡Œçº¦æŸï¼Œä»¤æƒé‡çŸ©é˜µä¸ºä¸€ä¸ªå¯¹ç§°çŸ©é˜µã€‚åˆ™æŠ•å½±çŸ©é˜µPå°±å˜æˆä¸€ä¸ªæ­£äº¤çŸ©é˜µ<a href="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580912078801.png" data-fancybox="group" data-caption="1580912078801" class="fancybox"><img alt="1580912078801" style="zoom: 80%;" data-src="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580912078801.png" class="lazyload" title="1580912078801"></a></p><p>Iæ˜¯ä¸€ä¸ªC * Cçš„å•ä½é˜µã€‚åˆ™Symmetric co-attentionçš„è®¡ç®—å…¬å¼ä¸ºï¼š</p><a href="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580912157546.png" data-fancybox="group" data-caption="1580912157546" class="fancybox"><img alt="1580912157546" style="zoom:80%;" align="center" data-src="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580912157546.png" class="lazyload" title="1580912157546"></a><p>ä¸Šè¿°å…¬å¼è¡¨æ˜å°†åµŒå…¥å‘é‡Vaå’ŒVbçš„ç‰¹å¾æŠ•å½±åˆ°æ­£äº¤å…¬å…±ç©ºé—´ä¸­ï¼Œå¹¶ä¿æŒå®ƒä»¬çš„èŒƒæ•°ã€‚è¿™ä¸€ç‰¹æ€§å¯ä»¥æ¶ˆé™¤ä¸åŒé€šé“ä¹‹é—´çš„ç›¸å…³æ€§å’Œæé«˜ç½‘ç»œçš„æ³›åŒ–èƒ½åŠ›ã€‚</p><h2 id="channel-wise-co-attention"><a class="markdownIt-Anchor" href="#channel-wise-co-attention"></a> Channel-wise co-attention</h2><p>å°†æŠ•å½±çŸ©é˜µPç®€å•åœ°è¡¨ç¤ºæˆå•ä½çŸ©é˜µ I ï¼ˆä¹Ÿå°±æ˜¯æ²¡æœ‰è¿›è¡Œç©ºé—´çš„è½¬æ¢ï¼‰ï¼Œç„¶åæƒé‡çŸ©é˜µWå˜æˆå¯¹è§’çŸ©é˜µï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒWï¼ˆä¹Ÿå°±æ˜¯Dï¼‰å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªå¯¹è§’çŸ©é˜µDaå’ŒDbï¼Œ å› æ­¤ï¼Œå…¬å¼3å¯ä»¥é‡æ–°å†™æˆä¸€ä¸‹å½¢å¼ï¼Œä¹Ÿå°±æ˜¯Channel-wise co-attentionï¼š</p><a href="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580912721357.png" data-fancybox="group" data-caption="1580912721357" class="fancybox"><img alt="1580912721357" style="zoom:80%;" align="center" data-src="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580912721357.png" class="lazyload" title="1580912721357"></a><p>è¿™ä¸ªæ“ä½œç›¸å½“äºåœ¨è®¡ç®—ç›¸ä¼¼åº¦ä¹‹å‰å¯¹Vaå’ŒVbåº”ç”¨ä¸€ä¸ªä¿¡é“æƒå€¼, è¿™æœ‰åŠ©äºç¼“è§£é€šé“å†—ä½™ .</p><h1 id="ååŒæ³¨æ„åŠ›æ“ä½œ"><a class="markdownIt-Anchor" href="#ååŒæ³¨æ„åŠ›æ“ä½œ"></a> ååŒæ³¨æ„åŠ›æ“ä½œ</h1><a href="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580912845406.png" data-fancybox="group" data-caption="1580912845406" class="fancybox"><img alt="1580912845406" style="zoom:80%;" align="center" data-src="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580912845406.png" class="lazyload" title="1580912845406"></a><p>ååŒæ³¨æ„åŠ›æ“ä½œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œåœ¨è·å–äº†ç›¸ä¼¼åº¦çŸ©é˜µSä¹‹åï¼Œå¯¹Sçš„è¡Œå‘é‡å’Œåˆ—å‘é‡è¿›è¡ŒSoftMaxæ“ä½œï¼š</p><a href="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580912943618.png" data-fancybox="group" data-caption="1580912943618" class="fancybox"><img alt="1580912943618" style="zoom:80%;" align="center" data-src="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580912943618.png" class="lazyload" title="1580912943618"></a><p>ç»“åˆä¸Šå›¾ï¼š</p><a href="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580913044245.png" data-fancybox="group" data-caption="1580913044245" class="fancybox"><img alt="1580913044245" style="zoom:80%;" align="center" data-src="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580913044245.png" class="lazyload" title="1580913044245"></a><a href="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580910735819.png" data-fancybox="group" data-caption="1580910735819" class="fancybox"><img alt="1580910735819" style="zoom:80%;" data-src="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580910735819.png" class="lazyload" title="1580910735819"></a><p>åœ¨ç½‘ç»œä¸­çš„ååŒæ³¨æ„åŠ›æ¨¡å—è¿˜æœ‰ä¸€ä¸ªGated co-attentionæ“ä½œï¼Œ è€ƒè™‘åˆ°è¾“å…¥å¯¹ã€é®æŒ¡å’ŒèƒŒæ™¯å™ªå£°ä¹‹é—´æ½œåœ¨çš„å¤–è§‚å˜åŒ–ï¼Œæœ€å¥½å¯¹æ¥è‡ªä¸åŒè¾“å…¥å¸§çš„ä¿¡æ¯è¿›è¡ŒåŠ æƒï¼Œè€Œä¸æ˜¯å¹³å‡å¤„ç†æ‰€æœ‰çš„å…±åŒæ³¨æ„ä¿¡æ¯ã€‚</p><a href="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580913182677.png" data-fancybox="group" data-caption="1580913182677" class="fancybox"><img alt="1580913182677" style="zoom:150%;" align="center" data-src="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580913182677.png" class="lazyload" title="1580913182677"></a> $$\sigmaæ˜¯ä¸€ä¸ªsigmoidæ¿€æ´»å‡½æ•°ï¼Œw_få’Œb_fè¡¨ç¤ºå·ç§¯æ ¸å’Œåç½®å‚æ•°ã€‚$$<p>è®¡ç®—å®Œgateçš„ç½®ä¿¡åº¦ä¹‹åï¼Œæ³¨æ„åŠ›Zè¡¨ç¤ºä¸ºï¼š<br><a href="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580913526624.png" data-fancybox="group" data-caption="1580913526624" class="fancybox"><img alt="1580913526624" align="center" data-src="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580913526624.png" class="lazyload" title="1580913526624"></a></p><a href="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580913588288.png" data-fancybox="group" data-caption="1580913588288" class="fancybox"><img alt="1580913588288" style="zoom:80%;" data-src="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580913588288.png" class="lazyload" title="1580913588288"></a><hr><h1 id="cosnet-æ•´ä½“æ¶æ„"><a class="markdownIt-Anchor" href="#cosnet-æ•´ä½“æ¶æ„"></a> CosNet æ•´ä½“æ¶æ„</h1><a href="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580913733433.png" data-fancybox="group" data-caption="1580913733433" class="fancybox"><img alt="1580913733433" align="center" data-src="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580913733433.png" class="lazyload" title="1580913733433"></a><p>CosNetæ˜¯ä¸€ä¸ªå­ªç”Ÿç½‘ç»œï¼Œç”±ä¸‰ä¸ªçº§è”çš„éƒ¨åˆ†ï¼Œä¸€ä¸ªåŸºäºDeepLabV3çš„ç‰¹å¾åµŒå…¥æ¨¡å—ï¼Œä¸€ä¸ªååŒæ³¨æ„åŠ›æ¨¡å—ä»¥åŠåˆ†å‰²æ¨¡å—ã€‚</p><h2 id="è®­ç»ƒé˜¶æ®µ"><a class="markdownIt-Anchor" href="#è®­ç»ƒé˜¶æ®µ"></a> è®­ç»ƒé˜¶æ®µ</h2><p>â€‹ä¸Šæ–‡è¯´åˆ°ï¼Œè§†é¢‘ä¸­çš„ä¸»è¦å¯¹è±¡ï¼ˆå³è¦åˆ†å‰²çš„å¯¹è±¡ï¼‰æœ‰ä¸¤ä¸ªåŸºæœ¬å±æ€§:(i)å¸§å†…å¯åˆ†è¾¨æ€§ï¼Œ(ii)å¸§é—´ä¸€è‡´æ€§ã€‚ä¸ºäº†åŒºåˆ†å‰æ™¯ç›®æ ‡å’ŒèƒŒæ™¯(å±æ€§(i))ï¼Œæˆ‘ä»¬åˆ©ç”¨ç°æœ‰çš„æ˜¾è‘—æ€§ç›®æ ‡åˆ†å‰²æ•°æ®é›†DUTSå’ŒMSRA 10Kæ¥è®­ç»ƒæˆ‘ä»¬çš„backboneç‰¹å¾åµŒå…¥æ¨¡å—ã€‚åŒæ—¶ï¼Œä¸ºäº†ç¡®ä¿COSNetèƒ½å¤Ÿæ•è·ä¸»è¦è§†é¢‘å¯¹è±¡çš„å…¨å±€å¸§é—´ç›¸å¹²æ€§(property (ii))ï¼Œæˆ‘ä»¬ä½¿ç”¨è§†é¢‘åˆ†å‰²æ•°æ®è®­ç»ƒæ•´ä¸ªCOSNetï¼Œå…¶ä¸­co-attentionæ¨¡å—åœ¨æ•è·è§†é¢‘å¸§ä¹‹é—´çš„ç›¸å…³æ€§æ–¹é¢èµ·ç€å…³é”®ä½œç”¨ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬åœ¨ä¸€ä¸ªè§†é¢‘åºåˆ—ä¸­éšæœºé€‰å–ä¸¤å¸§æ¥å»ºç«‹è®­ç»ƒå¯¹ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä¸ä»¥å¾€çš„åŸºäºå¾ªç¯ç¥ç»ç½‘ç»œçš„UVOSæ¨¡å‹åªéœ€è¦è¿ç»­å¸§ç›¸æ¯”ï¼Œè¿™ç§æ“ä½œè‡ªç„¶æœ‰æ•ˆåœ°æ‰©å……äº†è®­ç»ƒæ•°æ®, å³æ•°æ®å¢å¼ºã€‚</p><p>â€‹é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒCOSNetå¯ä»¥äº¤æ›¿ä½¿ç”¨é™æ€å›¾åƒæ•°æ®å’ŒåŠ¨æ€è§†é¢‘æ•°æ®è¿›è¡Œè®­ç»ƒã€‚åœ¨ä½¿ç”¨å›¾åƒæ•°æ®æ—¶ï¼Œæˆ‘ä»¬åªè®­ç»ƒäº†ç‰¹å¾åµŒå…¥æ¨¡å—ï¼Œå…¶ä¸­å¢åŠ äº†1Ã—1çš„sigmoidæ¿€æ´»å·ç§¯å±‚ï¼Œç”Ÿæˆä¸­é—´åˆ†å‰²çš„sideoutputã€‚è§†é¢‘æ•°æ®ç”¨äºè®­ç»ƒæ•´ä¸ªCOSNetï¼ŒåŒ…æ‹¬ç‰¹å¾åµŒå…¥æ¨¡å—ã€ååŒæ³¨æ„æ¨¡å—å’Œåˆ†å‰²æ¨¡å—ã€‚åˆ©ç”¨åŠ æƒäºŒå‰ç†µæŸå¤±è®­ç»ƒç½‘ç»œ:</p><a href="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580914232679.png" data-fancybox="group" data-caption="1580914232679" class="fancybox"><img alt="1580914232679" style="zoom:80%;" align="center" data-src="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580914232679.png" class="lazyload" title="1580914232679"></a><p>å…¶å®è®­ç»ƒé˜¶æ®µæ˜¯<strong>å®Œå…¨ç›‘ç£</strong>çš„ï¼Œå› ä¸ºä½¿ç”¨åˆ°äº†groundtruthã€‚</p><h2 id="æµ‹è¯•é˜¶æ®µ"><a class="markdownIt-Anchor" href="#æµ‹è¯•é˜¶æ®µ"></a> æµ‹è¯•é˜¶æ®µ</h2><p>â€‹è®­ç»ƒå®Œæˆä¹‹åï¼Œä½¿ç”¨æ¨¡å‹åœ¨å…¶ä»–æ²¡æœ‰è§è¿‡çš„è§†é¢‘åºåˆ—ä¸­è¿›è¡Œæµ‹è¯•ã€‚ç»™å®šä¸€ä¸ªæµ‹è¯•è§†é¢‘åºåˆ—ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ¯ä¸ªè¦åˆ†å‰²çš„å¸§ï¼Œä»¥åŠä»åŒä¸€è§†é¢‘ä¸­é‡‡æ ·çš„ä¸€ä¸ªå‚è€ƒå¸§ï¼Œä¾æ¬¡è¾“å…¥åˆ°COSNetä¸­ï¼Œé€šè¿‡é€å¸§çš„æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°æ‰€æœ‰çš„åˆ†å‰²ç»“æœã€‚</p><p>â€‹ç„¶è€Œï¼Œåœ¨è¿™æ ·ä¸€ä¸ªç®€å•çš„ç­–ç•¥ä¸‹ï¼Œåˆ†å‰²ç»“æœä»ç„¶å«æœ‰ç›¸å½“å¤§çš„å™ªå£°ï¼Œå› ä¸ºè§†é¢‘ä¸­ä¸°å¯Œçš„å…¨å±€ç›¸å…³ä¿¡æ¯å¹¶æ²¡æœ‰å¾—åˆ°å……åˆ†çš„æŒ–æ˜ã€‚å› æ­¤ï¼Œåœ¨æµ‹è¯•é˜¶æ®µåŒ…å«æ›´å¤šçš„æ˜¯æ¨å¯¼å¸§å¸¸é‡è¦çš„ï¼š</p><a href="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580914483240.png" data-fancybox="group" data-caption="1580914483240" class="fancybox"><img alt="1580914483240" style="zoom:80%;" align="center" data-src="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580914483240.png" class="lazyload" title="1580914483240"></a><p>å°†ä¸€ç»„Nä¸ªä¸åŒçš„å‚è€ƒå¸§(ä»åŒä¸€è§†é¢‘ä¸­å‡åŒ€é‡‡æ ·)è¾“å…¥æ¨ç†åˆ†æ”¯ï¼Œå¹¶å¯¹æ‰€æœ‰é¢„æµ‹è¿›è¡Œå¹³å‡ã€‚</p><a href="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580914542254.png" data-fancybox="group" data-caption="1580914542254" class="fancybox"><img alt="1580914542254" style="zoom:80%;" align="center" data-src="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580914542254.png" class="lazyload" title="1580914542254"></a><h1 id="ç»“æœ"><a class="markdownIt-Anchor" href="#ç»“æœ"></a> ç»“æœ</h1><p>DAVIS-2016æ•°æ®é›†ï¼š</p><a href="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580914796880.png" data-fancybox="group" data-caption="1580914796880" class="fancybox"><img alt="1580914796880" style="zoom:80%;" align="center" data-src="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580914796880.png" class="lazyload" title="1580914796880"></a><p>FBMSæ•°æ®é›†ï¼š<br><a href="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580914854214.png" data-fancybox="group" data-caption="1580914854214" class="fancybox"><img alt="1580914854214" style="zoom:80%;" align="center" data-src="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580914854214.png" class="lazyload" title="1580914854214"></a></p><p>YoutubeObjects  æ•°æ®é›†ï¼š</p><a href="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580914901876.png" data-fancybox="group" data-caption="1580914901876" class="fancybox"><img alt="1580914901876" style="zoom:80%;" align="center" data-src="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580914901876.png" class="lazyload" title="1580914901876"></a><h1 id="ç»“è®º"><a class="markdownIt-Anchor" href="#ç»“è®º"></a> ç»“è®º</h1><ol><li><p>ååŒæ³¨æ„åŠ›æœºåˆ¶åŸºäºå…¨å±€çš„è§†è§’è¿›è¡Œæ¨æ–­å‰æ™¯å’ŒèƒŒæ™¯çš„åˆ†å‰²ï¼Œæ•ˆæœæ˜¾è‘—ã€‚</p></li><li><p>åœ¨æµ‹è¯•æ—¶ï¼Œå¹³å‡å¤šä¸ªå¸§çš„çš„æ³¨æ„åŠ›æ›´æœ‰æ•ˆ</p></li><li><p>ä¸ºäº†ç ”ç©¶æœ€ç»ˆé¢„æµ‹åœ¨æµ‹è¯•é˜¶æ®µçš„å¸§é€‰æ‹©ç­–ç•¥ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥ä½¿ç”¨ä¸åŒçš„é‡‡æ ·æ–¹æ³•è¿›è¡Œäº†ä¸€ç³»åˆ—çš„å®éªŒã€‚å…·ä½“é‡‡ç”¨å…¨å±€éšæœºæŠ½æ ·ã€å…¨å±€å‡åŒ€æŠ½æ ·å’Œå±€éƒ¨è¿ç»­æŠ½æ ·ã€‚ä»è¡¨1ä¸­å¯ä»¥çœ‹å‡ºï¼Œä¸¤ç§å…¨å±€æ°´å¹³çš„é‡‡æ ·ç­–ç•¥éƒ½èƒ½è·å¾—è¿‘ä¼¼çš„æ€§èƒ½ï¼Œä½†éƒ½ä¼˜äºå±€éƒ¨é‡‡æ ·æ–¹æ³•ã€‚åŒæ—¶ï¼ŒåŸºäºå±€éƒ¨é‡‡æ ·çš„ç»“æœä»ç„¶ä¼˜äºä»éª¨å¹²ç½‘è·å¾—çš„ç»“æœã€‚æ•´ä½“æ¯”è¾ƒè¿›ä¸€æ­¥è¯æ˜äº†åˆå¹¶çš„é‡è¦æ€§ ã€‚</p></li><li><p>å…³äºå‚è€ƒå¸§æ•°çš„é€‰æ‹©ï¼Œå¦‚è¡¨ï¼š</p><a href="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580915369748.png" data-fancybox="group" data-caption="1580915369748" class="fancybox"><img alt="1580915369748" style="zoom:80%;" align="center" data-src="/2020/02/05/CosNet-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E5%90%8C%E6%B3%A8%E6%84%8F%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%A0%E7%9B%91%E7%9D%A3%E8%A7%86%E9%A2%91%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2/1580915369748.png" class="lazyload" title="1580915369748"></a><p>å½“N = 0æ—¶ï¼Œè¿™æ„å‘³ç€æ²¡æœ‰å…±åŒæ³¨æ„åˆ†å‰²ã€‚å½“Nä»0å˜ä¸º1æ—¶ï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªå¾ˆå¤§çš„æ€§èƒ½æ”¹è¿› ã€‚Nä»2å˜åŒ–åˆ°5ï¼Œå®šé‡ç»“æœæ˜¾ç¤ºæ€§èƒ½æœ‰æ‰€æé«˜ã€‚å½“æˆ‘ä»¬è¿›ä¸€æ­¥å¢åŠ Næ—¶ï¼Œæœ€ç»ˆçš„æ€§èƒ½æ²¡æœ‰æ˜æ˜¾çš„å˜åŒ–ã€‚å®éªŒä¸­ä½¿ç”¨çš„N=5ã€‚</p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="è®ºæ–‡é˜…è¯»" scheme="https://Castile.github.io/categories/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/"/>
    
    
      <category term="UVOS" scheme="https://Castile.github.io/tags/UVOS/"/>
    
      <category term="papers" scheme="https://Castile.github.io/tags/papers/"/>
    
  </entry>
  
  <entry>
    <title>leetcode-344-åè½¬å­—ç¬¦ä¸²</title>
    <link href="https://castile.github.io/2020/02/03/leetcode-344-%E5%8F%8D%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
    <id>https://castile.github.io/2020/02/03/leetcode-344-%E5%8F%8D%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2/</id>
    <published>2020-02-03T08:53:27.000Z</published>
    <updated>2020-02-03T09:10:10.508Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="æè¿°"><a class="markdownIt-Anchor" href="#æè¿°"></a> æè¿°</h1><blockquote><p>ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå…¶ä½œç”¨æ˜¯å°†è¾“å…¥çš„å­—ç¬¦ä¸²åè½¬è¿‡æ¥ã€‚è¾“å…¥å­—ç¬¦ä¸²ä»¥å­—ç¬¦æ•°ç»„ char[] çš„å½¢å¼ç»™å‡ºã€‚</p><p>ä¸è¦ç»™å¦å¤–çš„æ•°ç»„åˆ†é…é¢å¤–çš„ç©ºé—´ï¼Œä½ å¿…é¡»åŸåœ°ä¿®æ”¹è¾“å…¥æ•°ç»„ã€ä½¿ç”¨ O(1) çš„é¢å¤–ç©ºé—´è§£å†³è¿™ä¸€é—®é¢˜ã€‚</p><p>ä½ å¯ä»¥å‡è®¾æ•°ç»„ä¸­çš„æ‰€æœ‰å­—ç¬¦éƒ½æ˜¯ ASCII ç è¡¨ä¸­çš„å¯æ‰“å°å­—ç¬¦ã€‚</p></blockquote><blockquote><p>ç¤ºä¾‹ 1ï¼š</p><p>è¾“å…¥ï¼š[â€œhâ€,â€œeâ€,â€œlâ€,â€œlâ€,â€œoâ€]<br>è¾“å‡ºï¼š[â€œoâ€,â€œlâ€,â€œlâ€,â€œeâ€,â€œhâ€]<br>ç¤ºä¾‹ 2ï¼š</p><p>è¾“å…¥ï¼š[â€œHâ€,â€œaâ€,â€œnâ€,â€œnâ€,â€œaâ€,â€œhâ€]<br>è¾“å‡ºï¼š[â€œhâ€,â€œaâ€,â€œnâ€,â€œnâ€,â€œaâ€,â€œHâ€]</p><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</p></blockquote><blockquote><p>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/reverse-string" target="_blank" rel="noopener">https://leetcode-cn.com/problems/reverse-string</a></p></blockquote><h1 id="åˆ†æ"><a class="markdownIt-Anchor" href="#åˆ†æ"></a> åˆ†æ</h1><ol><li><p>å°±åœ°æ“ä½œï¼Œè€Œä¸”è¦æ˜¯O(1)çš„ç©ºé—´ï¼Œå¯ä»¥ä½¿ç”¨è¿­ä»£æ–¹æ³•ï¼Œé¦–å°¾æŒ‡é’ˆè§£å†³</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reverseString</span><span class="params">(<span class="keyword">char</span>[] s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = s.length;</span><br><span class="line">        <span class="keyword">char</span> tmp;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len/<span class="number">2</span> ; i++)&#123;</span><br><span class="line">            tmp = s[i];</span><br><span class="line">            s[i] =  s[len - i - <span class="number">1</span>]; <span class="comment">//è¿™æ˜¯æœ«å°¾çš„å€¼</span></span><br><span class="line">            s[len-i-<span class="number">1</span>] = tmp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li><li><p>ä¹Ÿå¯ä»¥ç”¨é€’å½’æ¥åšï¼Œä½†æ˜¯ä½¿ç”¨äº†è¾…åŠ©æ ˆï¼Œä¸æ»¡è¶³O(1)çš„ç©ºé—´è¦æ±‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reverseString</span><span class="params">(<span class="keyword">char</span>[] s)</span> </span>&#123;</span><br><span class="line">        help(s, <span class="number">0</span>, s.length-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">help</span><span class="params">(<span class="keyword">char</span>[] s, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt;= j) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">char</span> tmp = s[i];</span><br><span class="line">        s[i] = s[j];</span><br><span class="line">        s[j] = tmp;</span><br><span class="line">        i++;</span><br><span class="line">        j--;</span><br><span class="line">        help(s, i, j);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li></ol><h1 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h1><p><a href="https://github.com/Castile/algorithm/blob/master/leetcode/src/Str/leetcode344_ReverseStr.java" target="_blank" rel="noopener">https://github.com/Castile/algorithm/blob/master/leetcode/src/Str/leetcode344_ReverseStr.java</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Algorithm" scheme="https://Castile.github.io/categories/Algorithm/"/>
    
    
      <category term="é€’å½’" scheme="https://Castile.github.io/tags/%E9%80%92%E5%BD%92/"/>
    
      <category term="ç®—æ³•" scheme="https://Castile.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="ç®€å•" scheme="https://Castile.github.io/tags/%E7%AE%80%E5%8D%95/"/>
    
      <category term="å­—ç¬¦ä¸²" scheme="https://Castile.github.io/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
    
  </entry>
  
  <entry>
    <title>leetcode-24-ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹</title>
    <link href="https://castile.github.io/2020/02/03/leetcode-24-%E4%B8%A4%E4%B8%A4%E4%BA%A4%E6%8D%A2%E9%93%BE%E8%A1%A8%E4%B8%AD%E7%9A%84%E8%8A%82%E7%82%B9/"/>
    <id>https://castile.github.io/2020/02/03/leetcode-24-%E4%B8%A4%E4%B8%A4%E4%BA%A4%E6%8D%A2%E9%93%BE%E8%A1%A8%E4%B8%AD%E7%9A%84%E8%8A%82%E7%82%B9/</id>
    <published>2020-02-03T08:18:28.000Z</published>
    <updated>2020-02-03T08:51:25.948Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="æè¿°"><a class="markdownIt-Anchor" href="#æè¿°"></a> æè¿°</h1><blockquote><p>ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œä¸¤ä¸¤äº¤æ¢å…¶ä¸­ç›¸é‚»çš„èŠ‚ç‚¹ï¼Œå¹¶è¿”å›äº¤æ¢åçš„é“¾è¡¨ã€‚</p><p>ä½ ä¸èƒ½åªæ˜¯å•çº¯çš„æ”¹å˜èŠ‚ç‚¹å†…éƒ¨çš„å€¼ï¼Œè€Œæ˜¯éœ€è¦å®é™…çš„è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ã€‚</p><p>ç¤ºä¾‹ï¼š</p><p>ç»™å®š 1-&gt;2-&gt;3-&gt;4, ä½ åº”è¯¥è¿”å› 2-&gt;1-&gt;4-&gt;3<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/swap-nodes-in-pairs" target="_blank" rel="noopener">https://leetcode-cn.com/problems/swap-nodes-in-pairs</a></p></blockquote><h1 id="åˆ†æ"><a class="markdownIt-Anchor" href="#åˆ†æ"></a> åˆ†æ</h1><ol><li><p>é€’å½’ï¼š</p><p>â€‹æˆ‘ä»¬å¯ä»¥å®šä¹‰å‡½æ•° swap(head) ä»¥å®ç°è§£å†³æ–¹æ¡ˆï¼Œå…¶ä¸­è¾“å…¥çš„å‚æ•° head æŒ‡å‘é“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚* è€Œè¯¥å‡½æ•°åº”å½“è¿”å›å°†é“¾è¡¨ä¸­æ¯ä¸¤ä¸ªç›¸é‚»èŠ‚ç‚¹äº¤æ¢åå¾—åˆ°çš„æ–°åˆ—è¡¨çš„å¤´èŠ‚ç‚¹ head ã€‚</p><p>â€‹æŒ‰ç…§æˆ‘ä»¬ä¸Šé¢åˆ—å‡ºçš„æ­¥éª¤ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ä¸‹é¢çš„æµç¨‹æ¥å®ç°å‡½æ•°ï¼š</p><p>â€‹ï¼ˆ1ï¼‰é¦–å…ˆï¼Œæˆ‘ä»¬äº¤æ¢åˆ—è¡¨ä¸­çš„å‰ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯ head å’Œ head.nextï¼›</p><p>â€‹ï¼ˆ2ï¼‰ç„¶åæˆ‘ä»¬ä»¥ swap(head.next.next) çš„å½¢å¼è°ƒç”¨å‡½æ•°è‡ªèº«ï¼Œä»¥äº¤æ¢å¤´ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹ååˆ—è¡¨çš„å…¶ä½™éƒ¨åˆ†ã€‚</p><p>â€‹ï¼ˆ3ï¼‰æœ€åï¼Œæˆ‘ä»¬å°†æ­¥éª¤ï¼ˆ2ï¼‰ä¸­çš„å­åˆ—è¡¨çš„è¿”å›å¤´ä¸æ­¥éª¤ï¼ˆ1ï¼‰ä¸­äº¤æ¢çš„ä¸¤ä¸ªèŠ‚ç‚¹ç›¸è¿ï¼Œä»¥å½¢æˆæ–°çš„é“¾è¡¨ã€‚</p></li><li><p>è¿­ä»£</p><p>æ–°å¢ä¸€ä¸ªå¤´èŠ‚ç‚¹ dummy nodeï¼Œ dummy.next = headï¼› æ›´å¥½æ“ä½œé“¾è¡¨ã€‚æµç¨‹å›¾å¦‚ä¸‹ï¼š</p><a href="/2020/02/03/leetcode-24-%E4%B8%A4%E4%B8%A4%E4%BA%A4%E6%8D%A2%E9%93%BE%E8%A1%A8%E4%B8%AD%E7%9A%84%E8%8A%82%E7%82%B9/1580719129953.png" data-fancybox="group" data-caption="1580719790068" class="fancybox"><img alt="1580719790068" style="zoom:80%;" data-src="/2020/02/03/leetcode-24-%E4%B8%A4%E4%B8%A4%E4%BA%A4%E6%8D%A2%E9%93%BE%E8%A1%A8%E4%B8%AD%E7%9A%84%E8%8A%82%E7%82%B9/1580719129953.png" class="lazyload" title="1580719790068"></a></li></ol><h1 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h1><p>æºç ï¼š <a href="https://github.com/Castile/algorithm/blob/master/leetcode/src/LinkedList/leetcode24_SwapNodesInPairs.java" target="_blank" rel="noopener">https://github.com/Castile/algorithm/blob/master/leetcode/src/LinkedList/leetcode24_SwapNodesInPairs.java</a></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> LinkedList;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Hongliang Zhu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020-02-03 15:51</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListNode</span> </span>&#123;</span><br><span class="line">      <span class="keyword">int</span> val;</span><br><span class="line">      ListNode next;</span><br><span class="line">      ListNode(<span class="keyword">int</span> x) &#123; val = x; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">leetcode24_SwapNodesInPairs</span> </span>&#123;</span><br><span class="line">   <span class="comment">// é€’å½’è§£æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">swapPairs</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span>)     <span class="keyword">return</span> head;</span><br><span class="line">        ListNode n = head.next.next;  <span class="comment">// ä¸‹ä¸€æ¬¡è¦ä¼ é€’çš„èŠ‚ç‚¹</span></span><br><span class="line">        <span class="comment">//äº¤æ¢è¿™ä¸¤ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        ListNode p = head.next;</span><br><span class="line">        p.next = head;</span><br><span class="line">        head.next = swapPairs(n); <span class="comment">// é€’å½’</span></span><br><span class="line">        <span class="keyword">return</span> p; <span class="comment">// è¿”å›äº¤æ¢ä¹‹åçš„å¤´ç»“ç‚¹</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿­ä»£</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">swapPairs_it</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">        ListNode dummy = <span class="keyword">new</span> ListNode(-<span class="number">1</span>);</span><br><span class="line">        dummy.next = head;</span><br><span class="line">        ListNode pre = dummy;</span><br><span class="line">        <span class="keyword">while</span>(head != <span class="keyword">null</span> &amp;&amp; head.next != <span class="keyword">null</span>)&#123;</span><br><span class="line">            ListNode first = head;</span><br><span class="line">            ListNode second = head.next;</span><br><span class="line">            <span class="comment">// äº¤æ¢</span></span><br><span class="line">            first.next = second.next;</span><br><span class="line">            second.next = first;</span><br><span class="line">            pre.next = second;</span><br><span class="line">            <span class="comment">// åˆå§‹åŒ–å¤´</span></span><br><span class="line">            head = first.next;</span><br><span class="line">            pre = first;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dummy.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Algorithm" scheme="https://Castile.github.io/categories/Algorithm/"/>
    
    
      <category term="é€’å½’" scheme="https://Castile.github.io/tags/%E9%80%92%E5%BD%92/"/>
    
      <category term="ç®—æ³•" scheme="https://Castile.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="ä¸­ç­‰" scheme="https://Castile.github.io/tags/%E4%B8%AD%E7%AD%89/"/>
    
      <category term="é“¾è¡¨" scheme="https://Castile.github.io/tags/%E9%93%BE%E8%A1%A8/"/>
    
  </entry>
  
  <entry>
    <title>leetcode-200-å²›å±¿æ•°é‡</title>
    <link href="https://castile.github.io/2020/02/02/leetcode-200-%E5%B2%9B%E5%B1%BF%E6%95%B0%E9%87%8F/"/>
    <id>https://castile.github.io/2020/02/02/leetcode-200-%E5%B2%9B%E5%B1%BF%E6%95%B0%E9%87%8F/</id>
    <published>2020-02-02T09:50:20.000Z</published>
    <updated>2020-02-02T11:24:58.761Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="æè¿°"><a class="markdownIt-Anchor" href="#æè¿°"></a> æè¿°</h2><blockquote><p>ç»™å®šä¸€ä¸ªç”± â€˜1â€™ï¼ˆé™†åœ°ï¼‰å’Œ â€˜0â€™ï¼ˆæ°´ï¼‰ç»„æˆçš„çš„äºŒç»´ç½‘æ ¼ï¼Œè®¡ç®—å²›å±¿çš„æ•°é‡ã€‚ä¸€ä¸ªå²›è¢«æ°´åŒ…å›´ï¼Œå¹¶ä¸”å®ƒæ˜¯é€šè¿‡æ°´å¹³æ–¹å‘æˆ–å‚ç›´æ–¹å‘ä¸Šç›¸é‚»çš„é™†åœ°è¿æ¥è€Œæˆçš„ã€‚ä½ å¯ä»¥å‡è®¾ç½‘æ ¼çš„å››ä¸ªè¾¹å‡è¢«æ°´åŒ…å›´ã€‚</p><p>ç¤ºä¾‹ 1:</p><p>è¾“å…¥:<br>11110<br>11010<br>11000<br>00000</p><p>è¾“å‡º: 1<br>ç¤ºä¾‹ 2:</p><p>è¾“å…¥:<br>11000<br>11000<br>00100<br>00011</p><p>è¾“å‡º: 3<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/number-of-islands" target="_blank" rel="noopener">https://leetcode-cn.com/problems/number-of-islands</a></p></blockquote><h2 id="åˆ†æ"><a class="markdownIt-Anchor" href="#åˆ†æ"></a> åˆ†æ</h2><ol><li>dfsï¼š æ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œå¾ˆæ˜æ˜¾ï¼Œè¿™æ˜¯ä¸€ä¸ªè¿é€šé—®é¢˜ï¼Œæ±‚å‡ºçš„è¿é€šåˆ†é‡çš„ä¸ªæ•°å°±æ˜¯å²›å±¿çš„æ•°é‡</li><li>å¹¶æŸ¥é›†ï¼š è¿™ä¸ªæ˜¯å¹¶æŸ¥é›†çš„ä¸€ä¸ªåº”ç”¨ï¼Œæ±‚è¿é€šåˆ†é‡çš„ä¸ªæ•°ã€‚</li><li>bfsï¼š ä½¿ç”¨é˜Ÿåˆ—è§£å†³</li></ol><p>è¿™é‡Œæœ‰ä¸€ä¸ªå¤§ä½¬çš„é¢˜è§£ï¼Œéå¸¸è¯¦ç»†ï¼š <a href="https://leetcode-cn.com/problems/number-of-islands/solution/dfs-bfs-bing-cha-ji-python-dai-ma-java-dai-ma-by-l/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/number-of-islands/solution/dfs-bfs-bing-cha-ji-python-dai-ma-java-dai-ma-by-l/</a></p><p>å®˜æ–¹é¢˜è§£ä¹Ÿå¯ã€‚ä¸»è¦æ˜¯ç†è§£ç®—æ³•æ€æƒ³</p><p>ç›´æ¥çœ‹ä»£ç å§</p><h2 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h2><p>å¹¶æŸ¥é›†ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numIslands</span><span class="params">(<span class="keyword">char</span>[][] grid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(grid == <span class="keyword">null</span> || grid.length == <span class="number">0</span>)    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> m = grid.length;</span><br><span class="line">        <span class="keyword">int</span> n = grid[<span class="number">0</span>].length;</span><br><span class="line">        <span class="keyword">int</span>[] parents = <span class="keyword">new</span> <span class="keyword">int</span>[n*m];</span><br><span class="line">        <span class="keyword">int</span>[] rank = <span class="keyword">new</span> <span class="keyword">int</span> [n*m];</span><br><span class="line">        makeSet(grid, parents, rank);</span><br><span class="line">        <span class="comment">// æ–¹å‘æ•°ç»„ d æ˜¯ä¸Šä¸‹å·¦å³æœç´¢çš„å¸¸ç”¨æ‰‹æ³•</span></span><br><span class="line">        <span class="keyword">int</span>[][] d = <span class="keyword">new</span> <span class="keyword">int</span>[][]&#123;&#123;<span class="number">1</span>,<span class="number">0</span>&#125;, &#123;<span class="number">0</span>,<span class="number">1</span>&#125;, &#123;<span class="number">0</span>,-<span class="number">1</span>&#125;, &#123;-<span class="number">1</span>,<span class="number">0</span>&#125;&#125;;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span> ; i &lt; m; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>( <span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++)&#123;</span><br><span class="line">               <span class="keyword">if</span>( grid[i][j] == <span class="string">'1'</span>)&#123;</span><br><span class="line">                   grid[i][j] = <span class="string">'0'</span>;  <span class="comment">//  å·²ç»è”åˆçš„ç‚¹ä¸éœ€è¦è¿æ¥äº†ã€‚</span></span><br><span class="line">                   <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">4</span>; k++)&#123;</span><br><span class="line">                       <span class="keyword">int</span> x = i + d[k][<span class="number">0</span>];</span><br><span class="line">                       <span class="keyword">int</span> y = j + d[k][<span class="number">1</span>];</span><br><span class="line">                       <span class="keyword">if</span>(x &gt;= <span class="number">0</span> &amp;&amp; x &lt; m &amp;&amp; y &gt;= <span class="number">0</span> &amp;&amp; y &lt; n &amp;&amp; grid[x][y] == <span class="string">'1'</span>)&#123;</span><br><span class="line">                           unoin(parents, rank, x *n +y,  i *n + j);</span><br><span class="line">                       &#125;</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ„å»ºå¹¶æŸ¥é›†çš„ç»“æ„ï¼šæ³¨æ„è¿™é‡Œçš„æŠ€å·§</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">makeSet</span><span class="params">(<span class="keyword">char</span>[][] grid, <span class="keyword">int</span> []parents, <span class="keyword">int</span> []rank)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; grid.length ; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; grid[<span class="number">0</span>].length; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(grid[i][j] == <span class="string">'1'</span>)&#123;</span><br><span class="line">                    parents[i * grid[<span class="number">0</span>].length + j] = i * grid[<span class="number">0</span>].length + j;</span><br><span class="line">                    rank[i * grid[<span class="number">0</span>].length + j] = <span class="number">1</span>;</span><br><span class="line">                    count++;  <span class="comment">// è¿é€šåˆ†é‡ </span></span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    parents[i * grid[<span class="number">0</span>].length + j] = -<span class="number">1</span>;</span><br><span class="line">                    rank[i * grid[<span class="number">0</span>].length + j] = <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                    </span><br><span class="line">            &#125;</span><br><span class="line">           </span><br><span class="line">        &#125;    </span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span>[] parents, <span class="keyword">int</span> a)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> root = parents[a];</span><br><span class="line">        <span class="keyword">while</span>(root != parents[root])&#123;</span><br><span class="line">           root = parents[root];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">unoin</span><span class="params">(<span class="keyword">int</span>[] parents, <span class="keyword">int</span> []rank, <span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ra  = find(parents, a);</span><br><span class="line">        <span class="keyword">int</span> rb  = find(parents, b);</span><br><span class="line">        <span class="keyword">if</span>(ra != rb)&#123;</span><br><span class="line">            <span class="keyword">if</span>(rank[ra] &gt; rank[rb])&#123;</span><br><span class="line">                parents[rb] =  ra;</span><br><span class="line">                rank[ra] += rank[rb];</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                 parents[rb] =  ra;</span><br><span class="line">                rank[ra] += rank[rb];</span><br><span class="line">            &#125;</span><br><span class="line">            count--;</span><br><span class="line">        &#125;<span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>dfsï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numIslands</span><span class="params">(<span class="keyword">char</span>[][] grid)</span> </span>&#123;</span><br><span class="line">      </span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; grid.length; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; grid[<span class="number">0</span>].length; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(grid[i][j] == <span class="string">'1'</span>)&#123;</span><br><span class="line">                    cnt++; <span class="comment">// å²›å±¿çš„ä¸ªæ•°åŠ ä¸€</span></span><br><span class="line">                    infect(grid, i, j, grid.length, grid[<span class="number">0</span>].length); <span class="comment">// æ„ŸæŸ“å‡½æ•°</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ„ŸæŸ“å‡½æ•°ï¼š å°†iï¼Œ jä½ç½®çš„ä¸Šä¸‹å·¦å³ä½ç½®è¿›è¡Œæ£€æŸ¥ï¼Œæ˜¯å¦ä¸ºåŒä¸€ä¸ªå²›å±¿</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> mï¼š å²›å±¿çŸ©é˜µ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> iï¼š ä¸‹æ ‡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> jï¼š  ä¸‹æ ‡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> R: è¡Œ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> Cï¼š åˆ—</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">infect</span><span class="params">(<span class="keyword">char</span>[][] m, <span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">int</span> R, <span class="keyword">int</span> C)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(i &lt; <span class="number">0</span> || i &gt;= R || j &lt; <span class="number">0</span> || j &gt;= C || m[i][j] != <span class="string">'1'</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        m[i][j] = <span class="string">'2'</span>;</span><br><span class="line">        <span class="comment">// ä¾æ¬¡æ„ŸæŸ“ä¸Šä¸‹å·¦å³ä½ç½®</span></span><br><span class="line">        infect(m, i+<span class="number">1</span>, j, R, C);</span><br><span class="line">        infect(m, i-<span class="number">1</span>, j, R, C);</span><br><span class="line">        infect(m, i, j-<span class="number">1</span>, R, C);</span><br><span class="line">        infect(m, i, j+<span class="number">1</span>, R, C);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>BFSï¼š ä½¿ç”¨é˜Ÿåˆ—</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m,n;</span><br><span class="line">    <span class="keyword">int</span>[][] d = <span class="keyword">new</span> <span class="keyword">int</span>[][]&#123;&#123;<span class="number">0</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;-<span class="number">1</span>,<span class="number">0</span>&#125;, &#123;<span class="number">0</span>,-<span class="number">1</span>&#125;&#125;;</span><br><span class="line">    <span class="comment">// å¹¿åº¦ä¼˜å…ˆéå†</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numIslands</span><span class="params">(<span class="keyword">char</span>[][] grid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(grid == <span class="keyword">null</span> ||  grid.length == <span class="number">0</span>)    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        m = grid.length;</span><br><span class="line">        n = grid[<span class="number">0</span>].length;</span><br><span class="line">        LinkedList&lt;Integer&gt; q = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n ; j ++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(grid[i][j] == <span class="string">'1'</span>)&#123;</span><br><span class="line">                    q.offer(i * n + j); <span class="comment">//  å…¥é˜Ÿ</span></span><br><span class="line">                    <span class="keyword">while</span>(!q.isEmpty())&#123;</span><br><span class="line">                    <span class="keyword">int</span> cur = q.poll(); <span class="comment">// å‡ºé˜Ÿ</span></span><br><span class="line">                    <span class="keyword">int</span> cx = cur / n;</span><br><span class="line">                    <span class="keyword">int</span> cy = cur % n;</span><br><span class="line">                    grid[cx][cy] = <span class="string">'0'</span>;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span>[] dd: d)&#123;</span><br><span class="line">                        <span class="keyword">int</span> x = cx + dd[<span class="number">0</span>];</span><br><span class="line">                        <span class="keyword">int</span> y = cy + dd[<span class="number">1</span>];</span><br><span class="line">                        <span class="keyword">if</span>(x &gt;= <span class="number">0</span> &amp;&amp; y &gt;= <span class="number">0</span> &amp;&amp; x &lt; m &amp;&amp; y &lt; n &amp;&amp; grid[x][y] == <span class="string">'1'</span>)&#123;</span><br><span class="line">                            q.offer(x * n + y);</span><br><span class="line">                            grid[x][y] = <span class="string">'0'</span>;   <span class="comment">// è¦æ ‡å¿—å·²è®¿é—®ï¼Œä¸ç„¶ä¼šä¸¥é‡è¶…æ—¶</span></span><br><span class="line">                        &#125;</span><br><span class="line">                            </span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                    count++;</span><br><span class="line">                    </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Algorithm" scheme="https://Castile.github.io/categories/Algorithm/"/>
    
    
      <category term="ç®—æ³•" scheme="https://Castile.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="dfs" scheme="https://Castile.github.io/tags/dfs/"/>
    
      <category term="å¹¶æŸ¥é›†" scheme="https://Castile.github.io/tags/%E5%B9%B6%E6%9F%A5%E9%9B%86/"/>
    
      <category term="ä¸­ç­‰" scheme="https://Castile.github.io/tags/%E4%B8%AD%E7%AD%89/"/>
    
      <category term="æœç´¢" scheme="https://Castile.github.io/tags/%E6%90%9C%E7%B4%A2/"/>
    
  </entry>
  
  <entry>
    <title>leetcode-695-å²›å±¿çš„æœ€å¤§é¢ç§¯</title>
    <link href="https://castile.github.io/2020/02/02/leetcode-695-%E5%B2%9B%E5%B1%BF%E7%9A%84%E6%9C%80%E5%A4%A7%E9%9D%A2%E7%A7%AF/"/>
    <id>https://castile.github.io/2020/02/02/leetcode-695-%E5%B2%9B%E5%B1%BF%E7%9A%84%E6%9C%80%E5%A4%A7%E9%9D%A2%E7%A7%AF/</id>
    <published>2020-02-02T09:44:04.000Z</published>
    <updated>2020-02-02T09:49:39.394Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="æè¿°"><a class="markdownIt-Anchor" href="#æè¿°"></a> æè¿°</h2><blockquote><p>ç»™å®šä¸€ä¸ªåŒ…å«äº†ä¸€äº› 0 å’Œ 1çš„éç©ºäºŒç»´æ•°ç»„ grid , ä¸€ä¸ª å²›å±¿ æ˜¯ç”±å››ä¸ªæ–¹å‘ (æ°´å¹³æˆ–å‚ç›´) çš„ 1 (ä»£è¡¨åœŸåœ°) æ„æˆçš„ç»„åˆã€‚ä½ å¯ä»¥å‡è®¾äºŒç»´çŸ©é˜µçš„å››ä¸ªè¾¹ç¼˜éƒ½è¢«æ°´åŒ…å›´ç€ã€‚</p><p>æ‰¾åˆ°ç»™å®šçš„äºŒç»´æ•°ç»„ä¸­æœ€å¤§çš„å²›å±¿é¢ç§¯ã€‚(å¦‚æœæ²¡æœ‰å²›å±¿ï¼Œåˆ™è¿”å›é¢ç§¯ä¸º0ã€‚)</p><p>ç¤ºä¾‹ 1:</p><p>[[0,0,1,0,0,0,0,1,0,0,0,0,0],<br>[0,0,0,0,0,0,0,1,1,1,0,0,0],<br>[0,1,1,0,1,0,0,0,0,0,0,0,0],<br>[0,1,0,0,1,1,0,0,1,0,1,0,0],<br>[0,1,0,0,1,1,0,0,1,1,1,0,0],<br>[0,0,0,0,0,0,0,0,0,0,1,0,0],<br>[0,0,0,0,0,0,0,1,1,1,0,0,0],<br>[0,0,0,0,0,0,0,1,1,0,0,0,0]]<br>å¯¹äºä¸Šé¢è¿™ä¸ªç»™å®šçŸ©é˜µåº”è¿”å› 6ã€‚æ³¨æ„ç­”æ¡ˆä¸åº”è¯¥æ˜¯11ï¼Œå› ä¸ºå²›å±¿åªèƒ½åŒ…å«æ°´å¹³æˆ–å‚ç›´çš„å››ä¸ªæ–¹å‘çš„â€˜1â€™ã€‚</p><p>ç¤ºä¾‹ 2:</p><p>[[0,0,0,0,0,0,0,0]]<br>å¯¹äºä¸Šé¢è¿™ä¸ªç»™å®šçš„çŸ©é˜µ, è¿”å› 0ã€‚</p><p>æ³¨æ„: ç»™å®šçš„çŸ©é˜µgrid çš„é•¿åº¦å’Œå®½åº¦éƒ½ä¸è¶…è¿‡ 50ã€‚</p><p>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/max-area-of-island" target="_blank" rel="noopener">https://leetcode-cn.com/problems/max-area-of-island</a></p></blockquote><h2 id="åˆ†æ"><a class="markdownIt-Anchor" href="#åˆ†æ"></a> åˆ†æ</h2><p>dfsï¼š å²›å±¿é—®é¢˜ï¼Œçœ‹åˆ°è¿é€šåŒºåŸŸï¼Œæƒ³åˆ°dfsæ¥åšã€‚ ç”¨DFSæœç´¢æ¯ä¸ªvalueä¸º1çš„ä½ç½®ï¼Œé€’å½’æ£€æŸ¥ç›¸é‚»çš„ä½ç½®ï¼Œå¦‚æœè®¿é—®è¿‡ï¼Œåˆ™å°†valueè®¾ä¸º0ï¼ˆé¿å…é‡å¤è®¿é—®ï¼‰</p><p>ç›´æ¥çœ‹ä»£ç æ³¨é‡Š</p><h2 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> search;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Hongliang Zhu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020-02-02 17:04</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">leetcode_695_MaxAreaIsland</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">int</span>[][] d = &#123;&#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">0</span>, -<span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;-<span class="number">1</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxAreaOfIsland</span><span class="params">(<span class="keyword">int</span>[][] grid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(grid == <span class="keyword">null</span> || grid.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        m = grid.length;</span><br><span class="line">        n = grid[<span class="number">0</span>].length;</span><br><span class="line">        <span class="keyword">int</span> result = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n ; j++)&#123;</span><br><span class="line">                result = Math.max(result, dfs(grid, i, j)); <span class="comment">//æ±‚æœ€å¤§çš„é¢ç§¯</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//    int[][] d = new int[][]&#123;&#123;1, 0&#125;, &#123;0, 1&#125;, &#123;-1, 0&#125;, &#123;0, -1&#125;&#125;;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span>[][] grid, <span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(x &lt; <span class="number">0</span> || x &gt;= m || y &lt; <span class="number">0</span> || y &gt;= n || grid[x][y] == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        grid[x][y] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> c = <span class="number">1</span>; <span class="comment">// é¢ç§¯åŠ 1</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">4</span>; k++)&#123; <span class="comment">//  æ³¨æ„ä½¿ç”¨ä¸åŒçš„å˜é‡ï¼Œå¦‚æœä½¿ç”¨xã€yä¼šæŠ¥é”™</span></span><br><span class="line">            <span class="keyword">int</span> i = x + d[k][<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">int</span> j = y + d[k][<span class="number">1</span>];</span><br><span class="line">            c += dfs(grid, i, j);  <span class="comment">// æœç´¢ä¸Šä¸‹å·¦å³</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// for(int[] dd: d)&#123;</span></span><br><span class="line">        <span class="comment">//     c += dfs(grid, x + dd[0], y + dd[1]);</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">        <span class="keyword">return</span> c;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Algorithm" scheme="https://Castile.github.io/categories/Algorithm/"/>
    
    
      <category term="ç®—æ³•" scheme="https://Castile.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="dfs" scheme="https://Castile.github.io/tags/dfs/"/>
    
      <category term="ä¸­ç­‰" scheme="https://Castile.github.io/tags/%E4%B8%AD%E7%AD%89/"/>
    
      <category term="æœç´¢" scheme="https://Castile.github.io/tags/%E6%90%9C%E7%B4%A2/"/>
    
  </entry>
  
  <entry>
    <title>leetcode-268-ç¼ºå¤±çš„æ•°å­—</title>
    <link href="https://castile.github.io/2020/02/02/leetcode-268-%E7%BC%BA%E5%A4%B1%E7%9A%84%E6%95%B0%E5%AD%97/"/>
    <id>https://castile.github.io/2020/02/02/leetcode-268-%E7%BC%BA%E5%A4%B1%E7%9A%84%E6%95%B0%E5%AD%97/</id>
    <published>2020-02-02T02:54:27.000Z</published>
    <updated>2020-02-02T04:07:17.418Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>[toc]</p><h2 id="æè¿°"><a class="markdownIt-Anchor" href="#æè¿°"></a> æè¿°</h2><blockquote><p>ç»™å®šä¸€ä¸ªåŒ…å« 0, 1, 2, â€¦, n ä¸­ n ä¸ªæ•°çš„åºåˆ—ï¼Œæ‰¾å‡º 0 â€¦ n ä¸­æ²¡æœ‰å‡ºç°åœ¨åºåˆ—ä¸­çš„é‚£ä¸ªæ•°ã€‚</p><p>ç¤ºä¾‹ 1:</p><p>è¾“å…¥: [3,0,1]<br>è¾“å‡º: 2<br>ç¤ºä¾‹ 2:</p><p>è¾“å…¥: [9,6,4,2,3,5,7,0,1]<br>è¾“å‡º: 8<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/missing-number" target="_blank" rel="noopener">https://leetcode-cn.com/problems/missing-number</a></p></blockquote><h2 id="åˆ†æ"><a class="markdownIt-Anchor" href="#åˆ†æ"></a> åˆ†æ</h2><ol><li><p>é¢˜ç›®è¯´ä»0~nçš„æ•°å­—ï¼Œæ‰€ä»¥ç›´æ¥ç´¯åŠ æ•°ç»„å¾—åˆ°å’Œä¸ºsumï¼Œ åŠ å…¥æ•°ç»„æ²¡æœ‰ç¼ºå¤±æ•°æ®ï¼Œé‚£ä¹ˆå®Œæ•´æ•°ç»„çš„å…ƒç´ ä¸ªæ•°ä¸ºåŸæ•°ç»„å¤§å°åŠ 1ï¼Œåˆ©ç”¨ç­‰å·®æ•°åˆ—çš„æ€§è´¨ï¼Œå¾—åˆ°ä»0~nçš„å’Œlenï¼Œç„¶ålen - sum å°±æ˜¯ç¼ºå¤±çš„é‚£ä¸ªæ•°å­—äº†ã€‚</p><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ã€‚æ±‚å‡ºæ•°ç»„ä¸­æ‰€æœ‰æ•°çš„å’Œçš„æ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼Œç­‰å·®æ•°åˆ—å…¬å¼çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼Œå› æ­¤æ€»çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚<br>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚ç®—æ³•ä¸­åªç”¨åˆ°äº†O(1) çš„é¢å¤–ç©ºé—´ï¼Œç”¨æ¥å­˜å‚¨ç­”æ¡ˆã€‚</p></li><li><p>ä½æ“ä½œï¼š å¼‚æˆ–</p><table><thead><tr><th>a</th><th>b</th><th style="text-align:center">å¼‚æˆ–ç»“æœ</th></tr></thead><tbody><tr><td>0</td><td>0</td><td style="text-align:center">0</td></tr><tr><td>0</td><td>1</td><td style="text-align:center">1</td></tr><tr><td>1</td><td>0</td><td style="text-align:center">1</td></tr><tr><td>1</td><td>1</td><td style="text-align:center">0</td></tr></tbody></table><p>å…¶ä»–æ•°å­— ä¸ 0 å¼‚æˆ–éƒ½å¾—åˆ°å®ƒè‡ªå·±ã€‚</p><p>æ­¤å¤–å¼‚æˆ–è¿ç®—æ»¡è¶³äº¤æ¢å¾‹.  å¦‚ï¼š</p><table><thead><tr><th>0</th><th>1</th><th>2</th><th>3</th></tr></thead><tbody><tr><td>3</td><td>4</td><td>0</td><td>1</td></tr></tbody></table><p>ä¸‹æ ‡ä¸æ•°ç»„å€¼å¼‚æˆ–æ“ä½œï¼š  4 ^ 0 ^ 3 ^ 1 ^  4 ^ 2 ^ 0 ^ 3 ^ 1 ( å‰é¢çš„4æ˜¯ä¸ºäº†æ·»åŠ æœ€åä¸€ä½æ•°å­—ï¼Œä¸ºåŸæ•°ç»„çš„é•¿åº¦) ----&gt; å¯å¾—åˆ°ç¼ºå¤±çš„å€¼ä¸º2ã€‚</p><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ã€‚è¿™é‡Œå‡è®¾å¼‚æˆ–è¿ç®—çš„æ—¶é—´å¤æ‚åº¦æ˜¯å¸¸æ•°çš„ï¼Œæ€»å…±ä¼šè¿›è¡ŒO(n) æ¬¡å¼‚æˆ–è¿ç®—ï¼Œå› æ­¤æ€»çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚<br>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚ç®—æ³•ä¸­åªç”¨åˆ°äº†O(1) çš„é¢å¤–ç©ºé—´ï¼Œç”¨æ¥å­˜å‚¨ç­”æ¡ˆã€‚</p></li><li><p>å“ˆå¸Œè¡¨</p><p>å°†æ•°ç»„ä¸­çš„å…ƒç´ æ”¾å…¥HashSetå“ˆå¸Œè¡¨ä¸­ï¼Œ æ’å…¥å“ˆå¸Œè¡¨çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(1)ï¼Œ Nä¸ªæ•°æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œ ç„¶åä»0åˆ°æ•°ç»„æ”¾é•¿åº¦åŒºé—´å†…éå†ï¼Œ åˆ¤æ–­å“ˆå¸Œè¡¨ä¸­æ˜¯å¦å­˜åœ¨æ­¤æ•°å­—ï¼Œè‹¥ä¸å­˜åœ¨ï¼Œ åˆ™æ­¤æ•°å­—å°±æ˜¯ç¼ºå¤±çš„æ•°å­—ã€‚éå†æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œ  æ•…æ€»ä½“æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚ç©ºé—´å¤æ‚åº¦ä¸ºO(n)ã€‚</p></li><li><p>è¿˜å¯ä»¥å…ˆæ’åºï¼Œå†æ‰¾å‡ºç¼ºå¤±çš„æ•°å­—ï¼Œä½†æ˜¯æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸æ˜¯çº¿æ€§æ—¶é—´ï¼Œ ä¸ºO(logN)</p></li></ol><h2 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h2><p>æ–¹æ³•ä¸€ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">missingNumber</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>  sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; nums.length; i++)&#123; <span class="comment">//æ•°ç»„çš„å’Œ</span></span><br><span class="line">            sum += nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ç¼ºå¤±ä¸€ä¸ªæ•°å­—ï¼š æœ¬æ¥çš„å’Œåº”è¯¥æ˜¯ï¼š  </span></span><br><span class="line">        <span class="keyword">int</span> len = (nums.length + <span class="number">1</span>) * nums.length / <span class="number">2</span>; </span><br><span class="line">        <span class="keyword">return</span> len - sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><a href="/2020/02/02/leetcode-268-%E7%BC%BA%E5%A4%B1%E7%9A%84%E6%95%B0%E5%AD%97/1580614821325.png" data-fancybox="group" data-caption="1580614821325" class="fancybox"><img alt="1580614821325" style="zoom:80%;" data-src="/2020/02/02/leetcode-268-%E7%BC%BA%E5%A4%B1%E7%9A%84%E6%95%B0%E5%AD%97/1580614821325.png" class="lazyload" title="1580614821325"></a><p>ä½æ“ä½œï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">missingNumber</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> m = nums.length;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;  i &lt; nums.length; i++)&#123;</span><br><span class="line">            m ^= i ^ nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> m;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><a href="/2020/02/02/leetcode-268-%E7%BC%BA%E5%A4%B1%E7%9A%84%E6%95%B0%E5%AD%97/1580614957343.png" data-fancybox="group" data-caption="1580614957343" class="fancybox"><img alt="1580614957343" style="zoom:80%;" data-src="/2020/02/02/leetcode-268-%E7%BC%BA%E5%A4%B1%E7%9A%84%E6%95%B0%E5%AD%97/1580614957343.png" class="lazyload" title="1580614957343"></a><p>å“ˆå¸Œè¡¨ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">missingNumber</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        Set&lt;Integer&gt; set = <span class="keyword">new</span> HashSet&lt;Integer&gt;();</span><br><span class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt;nums.length; i++)&#123;</span><br><span class="line">            set.add(nums[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt;= nums.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>( !set.contains(i))</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">       </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><a href="/2020/02/02/leetcode-268-%E7%BC%BA%E5%A4%B1%E7%9A%84%E6%95%B0%E5%AD%97/1580615699820.png" data-fancybox="group" data-caption="1580615699820" class="fancybox"><img alt="1580615699820" style="zoom:80%;" data-src="/2020/02/02/leetcode-268-%E7%BC%BA%E5%A4%B1%E7%9A%84%E6%95%B0%E5%AD%97/1580615699820.png" class="lazyload" title="1580615699820"></a><p>æ’åºï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">missingNumber</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">      Arrays.sort(nums);</span><br><span class="line">      <span class="comment">// åˆ¤æ–­æœ«å°¾</span></span><br><span class="line">      <span class="keyword">if</span>(nums[nums.length - <span class="number">1</span>] !=  nums.length)&#123;</span><br><span class="line">          <span class="keyword">return</span> nums.length;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// åˆ¤æ–­0 æ˜¯å¦åœ¨é¦–ä½</span></span><br><span class="line">      <span class="keyword">if</span>(nums[<span class="number">0</span>] != <span class="number">0</span>)&#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt;nums.length ; i++)&#123;</span><br><span class="line">          <span class="keyword">if</span>(i != nums[i])</span><br><span class="line">            <span class="keyword">return</span> i;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><a href="/2020/02/02/leetcode-268-%E7%BC%BA%E5%A4%B1%E7%9A%84%E6%95%B0%E5%AD%97/1580616038690.png" data-fancybox="group" data-caption="1580616038690" class="fancybox"><img alt="1580616038690" style="zoom:80%;" data-src="/2020/02/02/leetcode-268-%E7%BC%BA%E5%A4%B1%E7%9A%84%E6%95%B0%E5%AD%97/1580616038690.png" class="lazyload" title="1580616038690"></a>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Algorithm" scheme="https://Castile.github.io/categories/Algorithm/"/>
    
    
      <category term="ç®—æ³•" scheme="https://Castile.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="ç®€å•" scheme="https://Castile.github.io/tags/%E7%AE%80%E5%8D%95/"/>
    
      <category term="ä½æ“ä½œ" scheme="https://Castile.github.io/tags/%E4%BD%8D%E6%93%8D%E4%BD%9C/"/>
    
  </entry>
  
  <entry>
    <title>Java-é›†åˆæ¡†æ¶</title>
    <link href="https://castile.github.io/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/"/>
    <id>https://castile.github.io/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/</id>
    <published>2020-02-01T02:49:50.000Z</published>
    <updated>2020-02-11T12:33:05.083Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="ä¸€-æ¦‚è¿°"><a class="markdownIt-Anchor" href="#ä¸€-æ¦‚è¿°"></a> ä¸€ã€ æ¦‚è¿°</h1><h2 id="collection"><a class="markdownIt-Anchor" href="#collection"></a> Collection</h2><p>â€‹é›†åˆæ˜¯å­˜å‚¨å¯¹è±¡çš„å®¹å™¨ï¼Œé›†åˆä¸­å¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹çš„å¯¹è±¡ï¼Œè€Œä¸”é•¿åº¦å¯å˜ã€‚åœ¨ç¨‹åºä¸­æœ‰å¯èƒ½æ— æ³•é¢„å…ˆçŸ¥é“éœ€è¦å¤šå°‘ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆç”¨æ•°ç»„æ¥è£…å¯¹è±¡çš„è¯ï¼Œé•¿åº¦ä¸å¥½å®šä¹‰ï¼Œè€Œé›†åˆè§£å†³äº†è¿™æ ·çš„é—®é¢˜ã€‚</p><p>â€‹ å®¹å™¨ä¸»è¦åŒ…æ‹¬ Collection å’Œ Map ä¸¤ç§ï¼ŒCollection å­˜å‚¨ç€å¯¹è±¡çš„é›†åˆï¼Œè€Œ Map å­˜å‚¨ç€é”®å€¼å¯¹ï¼ˆä¸¤ä¸ªå¯¹è±¡ï¼‰çš„æ˜ å°„è¡¨ã€‚</p><a href="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/1580527655939.png" data-fancybox="group" data-caption="1580527655939" class="fancybox"><img alt="1580527655939" style="zoom:80%;" data-src="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/1580527655939.png" class="lazyload" title="1580527655939"></a><p><code>æ³¨ï¼š å¸¦å¯¹å·çš„æ˜¯çº¿ç¨‹å®‰å…¨ç±»ã€‚</code></p><h3 id="é›†åˆå’Œæ•°ç»„çš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#é›†åˆå’Œæ•°ç»„çš„åŒºåˆ«"></a> é›†åˆå’Œæ•°ç»„çš„åŒºåˆ«</h3><p>æ•°ç»„å’Œé›†åˆç±»éƒ½æ˜¯å®¹å™¨</p><ul><li><p>æ•°ç»„é•¿åº¦æ˜¯<strong>å›ºå®šçš„</strong>ï¼Œé›†åˆé•¿åº¦æ˜¯<strong>å¯å˜çš„</strong>ã€‚æ•°ç»„ä¸­å¯ä»¥å­˜å‚¨åŸºæœ¬æ•°æ®ç±»å‹ï¼Œ<strong>é›†åˆåªèƒ½å­˜å‚¨å¯¹è±¡</strong></p></li><li><p>æ•°ç»„ä¸­å­˜å‚¨æ•°æ®ç±»å‹æ˜¯å•ä¸€çš„ï¼Œé›†åˆä¸­å¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹çš„å¯¹è±¡ã€‚</p></li><li><p>é›†åˆç±»çš„ç‰¹ç‚¹ï¼š<code>ç”¨äºå­˜å‚¨å¯¹è±¡ï¼Œé•¿åº¦æ˜¯å¯å˜çš„ï¼Œå¯ä»¥å­˜å‚¨ä¸åŒç±»å‹çš„å¯¹è±¡ã€‚</code></p></li></ul><a href="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/collection.png" data-fancybox="group" data-caption="collection" class="fancybox"><img alt="collection" style="zoom:80%;" data-src="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/collection.png" class="lazyload" title="collection"></a><ul><li>ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼ŒSetã€Listã€Queueéƒ½æ˜¯ç»§æ‰¿Collectionæ¥å£ã€‚ï¼ˆMapæ˜¯æ¥å£ï¼Œä¸‹é¢ä¼šè¯¦ç»†æè¿°ï¼‰</li><li>Setä¸‹é¢æœ‰HashSetã€LinkedHashSetä»¥åŠä¸€ä¸ªSortedSetæ¥å£ï¼ŒTreeSetç»§æ‰¿SortedSetæ¥å£ï¼Œè¯´æ˜TreeSeté‡Œé¢çš„å…ƒç´ ä¸€å®šæ˜¯æœ‰åºçš„ã€‚</li><li>Listä¸‹é¢æœ‰ArrayListã€Vectorã€ LinkedList</li><li>Queueä¸‹é¢æœ‰LinkedListå’ŒPriorityQueueç±»(å †ç»“æ„ï¼šä¼˜å…ˆçº§é˜Ÿåˆ—)ï¼Œè¯´æ˜LinkedLIstå¯ä»¥å½“åšé˜Ÿåˆ—æ¥ä½¿ç”¨ã€‚</li></ul><h3 id="1-setå”¯ä¸€æ€§"><a class="markdownIt-Anchor" href="#1-setå”¯ä¸€æ€§"></a> 1. Setï¼šå”¯ä¸€æ€§</h3><h4 id="treeset"><a class="markdownIt-Anchor" href="#treeset"></a> TreeSet</h4><p>åŸºäº<strong>çº¢é»‘æ ‘</strong>å®ç°ï¼Œæ”¯æŒ<strong>æœ‰åºæ€§</strong>æ“ä½œï¼Œä¾‹å¦‚æ ¹æ®ä¸€ä¸ªèŒƒå›´æŸ¥æ‰¾å…ƒç´ çš„æ“ä½œã€‚ä½†æ˜¯æŸ¥æ‰¾æ•ˆç‡ä¸å¦‚ HashSetï¼ŒHashSet æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼ŒTreeSet åˆ™ä¸º O(logN)ã€‚çº¢é»‘æ ‘çš„ç®—æ³•è§„åˆ™æ˜¯<strong>å·¦å°å³å¤§</strong>ã€‚</p><ol><li><p>çº¢é»‘æ ‘æ˜¯ä¸€ç§ç‰¹å®šç±»å‹çš„äºŒå‰æ ‘ï¼Œ æ˜¯ä¸€ç§å«æœ‰çº¢é»‘ç»“ç‚¹å¹¶èƒ½è‡ªå¹³è¡¡çš„äºŒå‰æŸ¥æ‰¾æ ‘ã€‚å®ƒå¿…é¡»æ»¡è¶³ä¸‹é¢æ€§è´¨ï¼š</p><p>â€‹æ€§è´¨1ï¼šæ¯ä¸ªèŠ‚ç‚¹è¦ä¹ˆæ˜¯é»‘è‰²ï¼Œè¦ä¹ˆæ˜¯çº¢è‰²ã€‚</p><p>â€‹æ€§è´¨2ï¼šæ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²ã€‚</p><p>â€‹æ€§è´¨3ï¼šæ¯ä¸ªå¶å­èŠ‚ç‚¹ï¼ˆNILï¼‰æ˜¯é»‘è‰²ã€‚</p><p>â€‹æ€§è´¨4ï¼šæ¯ä¸ªçº¢è‰²ç»“ç‚¹çš„ä¸¤ä¸ªå­ç»“ç‚¹ä¸€å®šéƒ½æ˜¯é»‘è‰²ã€‚</p><p>â€‹<strong>æ€§è´¨5ï¼šä»»æ„ä¸€ç»“ç‚¹åˆ°æ¯ä¸ªå¶å­ç»“ç‚¹çš„è·¯å¾„éƒ½åŒ…å«æ•°é‡ç›¸åŒçš„é»‘ç»“ç‚¹ã€‚</strong></p><p><a href="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/2392382-4996bbfb4017a3b2.png" data-fancybox="group" data-caption="img" class="fancybox"><img alt="img" data-src="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/2392382-4996bbfb4017a3b2.png" class="lazyload" title="img"></a></p><p>çº¢é»‘æ ‘ä»¥åä¼šè¡¥ä¸Šï¼Œè¯¦è§£è§ï¼š <a href="https://www.jianshu.com/p/e136ec79235c" target="_blank" rel="noopener">30å¼ å›¾å¸¦ä½ å½»åº•ç†è§£çº¢é»‘æ ‘</a></p></li><li><p>TreeSetå¯ä»¥è‡ªç„¶æ’åºï¼Œé‚£ä¹ˆTreeSetå¿…å®šå…·æœ‰æ’åºè§„åˆ™çš„</p><p>â€‹â‘  å…ƒç´ è‡ªèº«å…·æœ‰æ¯”è¾ƒæ€§ï¼Œéœ€è¦å®ç°Comparableæ¥å£ï¼Œé‡å†™compareToæ–¹æ³•ã€‚è¿™ç§æ–¹å¼å«åšå…ƒç´ çš„è‡ªç„¶æ’åº</p><p>â€‹â‘¡ å®¹å™¨å…·å¤‡æ¯”è¾ƒæ€§ï¼Œå½“å…ƒç´ ä¸å…·å¤‡æ¯”è¾ƒæ€§ï¼Œæˆ–è€…è‡ªèº«å…·å¤‡çš„æ¯”è¾ƒæ€§ä¸æ˜¯æ‰€éœ€è¦çš„ï¼Œé‚£ä¹ˆæ­¤æ—¶ä¹Ÿå¯ä»¥è®©å®¹å™¨è‡ªèº«å…·å¤‡ã€‚éœ€è¦å®šä¹‰ä¸€ä¸ªç±»å®ç°Comparatoræ¥å£ï¼Œ é‡å†™compareæ–¹æ³•ï¼Œå¹¶å°†è¯¥æ¥å£çš„å­ç±»å®ä¾‹å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’ç»™TreeSeté›†åˆçš„æ„é€ æ–¹æ³•ã€‚ï¼ˆ<code>æ³¨ï¼š å½“Comparableæ¯”è¾ƒæ–¹å¼å’ŒComparatoræ¯”è¾ƒæ–¹å¼åŒæ—¶å­˜åœ¨ï¼Œä»¥Comparatorä¸ºä¸»</code>ï¼‰</p><p>â€‹â‘¢ åŸºæœ¬æ•°æ®ç±»å‹å…·å¤‡è‡ªèº«æ¯”è¾ƒæ€§ï¼Œæ¯”å¦‚Stringï¼Œ intç­‰ï¼ŒStringå†…éƒ¨å·²ç»ç»§æ‰¿äº†Comparableæ¥å£ï¼Œæ‰€ä»¥å…·å¤‡æ¯”è¾ƒæ€§ï¼Œæˆ‘ä»¬è‡ªå·±å®šä¹‰çš„å…ƒç´ ï¼Œæƒ³è¦å­˜å…¥TreeSetä¸­ï¼Œå°±å¿…é¡»è‡ªå·±å®ç°è¯¥æ¥å£ï¼Œä¹Ÿå°±æ˜¯è¯´è¦è®©å¯¹è±¡å…·å¤‡å°±æ¯”è¾ƒæ€§ï¼Œå¦‚æœå­˜å…¥ç›¸åŒçš„å…ƒç´ åˆ™åªä¼šå­˜å…¥ä¸€ä¸ªåˆ°TreeSetä¸­ã€‚</p><p>â€‹â‘£ TreeSetä¸­å¦‚ä½•ä¿è¯å…ƒç´ çš„å”¯ä¸€æ€§ï¼š é€šè¿‡compareToæˆ–è€…compareæ–¹æ³•æ¥ä¿è¯å…ƒç´ çš„å”¯ä¸€æ€§ã€‚</p><p>Personç±»ä¸­æœ‰nameå’Œageå±æ€§ï¼Œä¸‹é¢æ˜¯é‡å†™çš„compareToæ–¹æ³•ä»¥åŠhashCodeå’Œequalsæ–¹æ³•ã€‚è¿™æ˜¯ä½¿å…ƒç´ è‡ªèº«å…·å¤‡æ¯”è¾ƒæ€§ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> nama.hashCode() + age*<span class="number">33</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span>(!(obj  <span class="keyword">instanceof</span>  Person))&#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">       &#125;</span><br><span class="line">   </span><br><span class="line">       Person p = (Person)obj;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">this</span>.nama.equals(p.nama) &amp;&amp; <span class="keyword">this</span>.age == p.age;</span><br><span class="line">   &#125;</span><br><span class="line">  </span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">       Person p = (Person)o;</span><br><span class="line">       <span class="keyword">if</span>(<span class="keyword">this</span>.age &gt; p.age)&#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">if</span>(<span class="keyword">this</span>.age &lt;  p.age)&#123;</span><br><span class="line">           <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">this</span>.nama.compareTo(p.nama);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></div><p>ä¸‹é¢æ˜¯æ˜¯ä½¿å®¹å™¨è‡ªèº«å…·å¤‡æ¯”è¾ƒæ€§ï¼Œè¦è‡ªå®šä¹‰æ¯”è¾ƒå™¨ï¼šå®šä¹‰ä¸€ä¸ªç±»å®ç°Comparatoræ¥å£ï¼Œ é‡å†™compareæ–¹æ³•ï¼Œå¹¶å°†è¯¥æ¥å£çš„å­ç±»å®ä¾‹å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’ç»™TreeSeté›†åˆçš„æ„é€ æ–¹æ³•ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComparator</span> <span class="keyword">implements</span> <span class="title">Comparator</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Object o1, Object o2)</span> </span>&#123;</span><br><span class="line">        Person p1 = (Person) o1;</span><br><span class="line">        Person p2 = (Person) o2;</span><br><span class="line">        <span class="comment">// é¦–å…ˆæ¯”è¾ƒå¹´é¾„ï¼Œå¹´é¾„ä¸ä¸€æ ·å°±æ˜¯ä¸åŒå…ƒç´ ï¼Œå› ä¸ºå­˜åœ¨åŒåçš„äºº</span></span><br><span class="line">        <span class="keyword">if</span>(p1.getAge() &gt; p2.getAge())&#123; <span class="comment">// æŒ‰ç…§å¹´é¾„å‡åºæ’åˆ—</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>( p1.getAge() &lt; p2.getAge())&#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¦‚æœå¹´é¾„ç›¸åŒåˆ™æ¯”è¾ƒå§“å</span></span><br><span class="line">        <span class="keyword">return</span> p1.getNama().compareTo(p2.getNama());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        TreeSet&lt;Person&gt; set = <span class="keyword">new</span> TreeSet&lt;&gt;(<span class="keyword">new</span> MyComparator()); <span class="comment">// ä¼ å…¥æ¯”è¾ƒå™¨</span></span><br><span class="line">        set.add(<span class="keyword">new</span> Person(<span class="string">"å¼ ä¸‰"</span>, <span class="number">12</span>));</span><br><span class="line">        set.add(<span class="keyword">new</span> Person(<span class="string">"æå››"</span>, <span class="number">5</span>));</span><br><span class="line">        set.add(<span class="keyword">new</span> Person(<span class="string">"æå››"</span>, <span class="number">12</span>));</span><br><span class="line"></span><br><span class="line">        set.add(<span class="keyword">new</span> Person(<span class="string">"tom"</span>, <span class="number">24</span>));</span><br><span class="line">        set.add(<span class="keyword">new</span> Person(<span class="string">"tom"</span> , <span class="number">24</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Person p: set)&#123;</span><br><span class="line">            out.println(p.getNama()+<span class="string">"   "</span>+p.getAge());</span><br><span class="line">        &#125;</span><br><span class="line"> &#125;</span><br><span class="line">è¾“å‡ºï¼š </span><br><span class="line">æå››   <span class="number">5</span></span><br><span class="line">å¼ ä¸‰   <span class="number">12</span></span><br><span class="line">æå››   <span class="number">12</span></span><br><span class="line">tom   <span class="number">24</span></span><br><span class="line"></span><br><span class="line">å¯ä»¥çœ‹åˆ°é‡åçš„tomæ˜¯ç›¸åŒçš„å…ƒç´ ï¼Œæ™ºæ…§æ·»åŠ ä¸€ä¸ªåˆ°TreeSetä¸­ï¼Œå¹¶ä¸”è¾“å‡ºçš„é¡ºåºæ˜¯æŒ‰ç…§å¹´é¾„å¤§å°æ’åˆ—çš„</span><br></pre></td></tr></table></figure></div></li></ol><h4 id="hashset"><a class="markdownIt-Anchor" href="#hashset"></a> HashSet</h4><p>åŸºäº<strong>å“ˆå¸Œè¡¨</strong>å®ç°ï¼Œæ”¯æŒå¿«é€ŸæŸ¥æ‰¾ï¼Œä½†ä¸æ”¯æŒæœ‰åºæ€§æ“ä½œã€‚å¹¶ä¸”å¤±å»äº†å…ƒç´ çš„æ’å…¥é¡ºåºä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨ Iterator éå† HashSet å¾—åˆ°çš„ç»“æœæ˜¯ä¸ç¡®å®šçš„ã€‚ï¼ˆæ— åºï¼‰</p><ol><li><p>HashSetæ˜¯æŒ‰ç…§å“ˆå¸Œå€¼æ¥å­˜æ•°æ®çš„ï¼Œæ‰€ä»¥å–æ•°æ®ä¹Ÿæ˜¯æŒ‰ç…§å“ˆå¸Œå€¼å–å¾—çš„ã€‚</p></li><li><p>Setå…·æœ‰å…ƒç´ çš„å”¯ä¸€æ€§ï¼Œæ‰€ä»¥HashSetä¹Ÿå…·æœ‰æ­¤ç‰¹æ€§ã€‚</p></li><li><p>HashSetå¦‚ä½•æ£€æŸ¥é‡å¤å‘¢ï¼Ÿ</p><blockquote><p>â€‹HashSeté€šè¿‡hashCodeå€¼æ¥ç¡®å®šå…ƒç´ åœ¨å†…å­˜ä¸­çš„ä½ç½®ã€‚ä¸€ä¸ªhashCodeä½ç½®ä¸Šå¯ä»¥å­˜æ”¾å¯¹ä¸ªå…ƒç´ ã€‚å…ƒç´ çš„å“ˆå¸Œå€¼æ˜¯é€šè¿‡å…ƒç´ çš„hashCodeæ–¹æ³•æ¥è·å–çš„ï¼Œ HashSeté¦–å…ˆåˆ¤æ–­ä¸¤ä¸ªå…ƒç´ çš„å“ˆå¸Œå€¼ï¼Œå¦‚æœå“ˆå¸Œå€¼ä¸€æ ·ï¼Œæ¥ç€ä¼šæ¯”è¾ƒequalsæ–¹æ³•ï¼›å¦‚æœhashCodeä¸ä¸€æ ·å°±ä¸ä¼šå†è°ƒç”¨equalsæ–¹æ³•äº†ã€‚å¦‚æœequalsæ–¹æ³•è¿”å›trueï¼Œé‚£ä¹ˆHashSetè®¤ä¸ºæ–°åŠ å…¥çš„å¯¹è±¡é‡å¤äº†åŠ å…¥å¤±è´¥ã€‚å¦‚æœequalsæ–¹æ³•ä¸ºfalseé‚£ä¹ˆHashSetè®¤ä¸ºæ–°åŠ å…¥çš„å¯¹è±¡æ²¡æœ‰é‡å¤ï¼Œæ–°å…ƒç´ å¯ä»¥åŠ å…¥ã€‚</p></blockquote></li></ol><h4 id="linkedhashset"><a class="markdownIt-Anchor" href="#linkedhashset"></a> LinkedHashSet</h4><p>å…·æœ‰ HashSet çš„æŸ¥æ‰¾æ•ˆç‡ï¼Œå¹¶ä¸”å†…éƒ¨ä½¿ç”¨<strong>åŒå‘é“¾è¡¨</strong>ç»´æŠ¤å…ƒç´ çš„æ’å…¥é¡ºåºã€‚ï¼ˆæœ‰åºï¼‰</p><ol><li>ç”±é“¾è¡¨ä¿è¯å…ƒç´ æœ‰åº</li><li>ç”±å“ˆå¸Œè¡¨ä¿è¯å…ƒç´ å”¯ä¸€</li></ol><h3 id="2-list"><a class="markdownIt-Anchor" href="#2-list"></a> 2. List</h3><p>Listç‰¹æœ‰çš„æ–¹æ³•</p><blockquote><p>1ï¼š å¢åŠ </p><p>â€‹void add(int index, E elem) æŒ‡å®šä½ç½®æ·»åŠ å…ƒç´ </p><p>â€‹boolean addAll(int index, COllection c)   æŒ‡å®šä½ç½®æ·»åŠ é›†åˆ</p><p>2ï¼š åˆ é™¤</p><p>â€‹E remove(int index)åˆ é™¤æŒ‡å®šä½ç½®å…ƒç´ </p><p>3ï¼š æŸ¥æ‰¾</p><p>â€‹E get(int index)æ³¨æ„ IndexOutOfBoundsException</p><p>â€‹int indexOf(Object o) æ‰¾ä¸åˆ°è¿”å› -1</p><p>â€‹lastIndexOf(Object o)</p><p>4ï¼š ä¿®æ”¹</p><p>â€‹E set(int index, E elem)   è¿”å›çš„æ˜¯éœ€è¦æ›¿æ¢çš„é›†åˆä¸­çš„å…ƒç´ </p><p>5ï¼š æ±‚å­é›†åˆ</p><p>â€‹List<e> subList(int fromIndex, int toIndex)  //   åŒ…å«toIndex</e></p></blockquote><h4 id="arraylist"><a class="markdownIt-Anchor" href="#arraylist"></a> ArrayList</h4><p>åŸºäºåŠ¨æ€æ•°ç»„å®ç°ï¼Œæ”¯æŒéšæœºè®¿é—®ã€‚ åº•å±‚é‡‡ç”¨æ•°ç»„å®ç°ï¼Œ é»˜è®¤ä¸º10. æŸ¥è¯¢å¿«ï¼Œå¢åˆ æ…¢ã€‚åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒArrayList æ˜¯ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„ä¸€ä¸ªé›†åˆã€‚</p><h4 id="vector"><a class="markdownIt-Anchor" href="#vector"></a> Vector</h4><p>å’Œ ArrayList ç±»ä¼¼ï¼Œä½†å®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚æè¿°çš„æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„ArrayList</p><p>ArrayListï¼š å•çº¿ç¨‹æ•ˆç‡é«˜</p><p>Vectorï¼š  å¤šçº¿ç¨‹å®‰å…¨ï¼Œ æ‰€ä»¥æ•ˆç‡ä½</p><p>ç‰¹æœ‰çš„æ–¹æ³•</p><blockquote><p>â€‹void addElement(E obj) åœ¨é›†åˆæœ«å°¾æ·»åŠ å…ƒç´ </p><p>â€‹E elementAt(int index)è¿”å›æŒ‡å®šè§’æ ‡çš„å…ƒç´ </p><p>â€‹Enumeration elements()  è¿”å›é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œ å°è£…åˆ°Enumerationå¯¹è±¡ä¸­</p><p>â€‹Enumeration æ¥å£ï¼š</p><p>â€‹boolean hashMoreElements() æµ‹è¯•æ­¤æšä¸¾çš„å¯¹è±¡æ˜¯å¦åŒ…å«æ›´å¤šçš„å…ƒç´ </p><p>â€‹E  nextElement()è¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ </p></blockquote><h4 id="linkedlist"><a class="markdownIt-Anchor" href="#linkedlist"></a> LinkedList</h4><p>åŸºäºåŒå‘é“¾è¡¨å®ç°ï¼Œåªèƒ½é¡ºåºè®¿é—®ï¼Œä½†æ˜¯å¯ä»¥å¿«é€Ÿåœ°åœ¨é“¾è¡¨ä¸­é—´æ’å…¥å’Œåˆ é™¤å…ƒç´ ã€‚ä¸ä»…å¦‚æ­¤ï¼Œ<strong>LinkedList è¿˜å¯ä»¥ç”¨ä½œæ ˆã€é˜Ÿåˆ—å’ŒåŒå‘é˜Ÿåˆ—ã€‚</strong></p><p>â€‹1. ç‰¹æœ‰æ–¹æ³•ï¼š</p><blockquote><p>â€‹addFirst(E  e)</p><p>â€‹addLast(E  e)</p><p>â€‹getFirst( )</p><p>â€‹getLast( )</p><p>â€‹removeFirst()</p><p>â€‹removeLast()</p></blockquote><ol start="2"><li><p>æ•°æ®ç»“æ„</p><blockquote><p>1ï¼š æ ˆï¼ˆ1.6ï¼‰ï¼špush()   pop()</p><p>2:   é˜Ÿåˆ— ï¼š offer()    poll()</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ˆ</span></span><br><span class="line">   LinkedList list  = <span class="keyword">new</span> LinkedList();</span><br><span class="line">   list.push(<span class="number">2</span>);</span><br><span class="line">   list.push(<span class="number">4</span>);</span><br><span class="line">   list.push(<span class="number">5</span>);</span><br><span class="line">   list.push(<span class="number">6</span>);</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   Iterator it = list.iterator();</span><br><span class="line">   <span class="keyword">while</span> (it.hasNext())&#123;</span><br><span class="line">       out.println(it.next());</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></div><p>è¾“å‡ºï¼š</p><p>6<br>5<br>4<br>2</p><p>æ¨¡æ‹Ÿé˜Ÿåˆ—ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">LinkedList q  = <span class="keyword">new</span> LinkedList();</span><br><span class="line">  q.offer(<span class="number">2</span>);</span><br><span class="line">  q.offer(<span class="number">3</span>);</span><br><span class="line">  q.offer(<span class="number">5</span>);</span><br><span class="line">   </span><br><span class="line">  q.poll();</span><br><span class="line">   </span><br><span class="line">  Iterator it1 = q.iterator();</span><br><span class="line">  <span class="keyword">while</span> (it1.hasNext())&#123;</span><br><span class="line">      out.println(it1.next());</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></div><ol start="3"><li><p>è¿”å›é€†åºçš„è¿­ä»£å™¨å¯¹</p><blockquote><p>â€‹descendingItrerator()   è¿”å›é€†åºçš„è¿­ä»£å™¨å¯¹è±¡</p></blockquote></li></ol></li></ol><h3 id="3-queue"><a class="markdownIt-Anchor" href="#3-queue"></a> 3. Queue</h3><h4 id="linkedlist-2"><a class="markdownIt-Anchor" href="#linkedlist-2"></a> LinkedList</h4><p>â€‹å¯ä»¥ç”¨å®ƒæ¥å®ç°åŒå‘é˜Ÿåˆ—ã€‚</p><h4 id="priorityqueue"><a class="markdownIt-Anchor" href="#priorityqueue"></a> PriorityQueue</h4><p>â€‹åŸºäºå †ç»“æ„å®ç°ï¼Œå¯ä»¥ç”¨å®ƒæ¥å®ç°ä¼˜å…ˆé˜Ÿåˆ—ã€‚</p><h3 id="æ€»ç»“"><a class="markdownIt-Anchor" href="#æ€»ç»“"></a> æ€»ç»“</h3><blockquote><p>çœ‹åˆ°Arrayï¼š æƒ³åˆ°è§’æ ‡</p><p>çœ‹åˆ°Linkï¼š æƒ³åˆ°firstã€last</p><p>çœ‹åˆ°Hashï¼š æƒ³åˆ°hashCodeã€equals</p><p>çœ‹åˆ°Treeï¼š æƒ³åˆ°ä¸¤ä¸ªæ¥å£ï¼š Comparableã€ Comparator</p></blockquote><h2 id="map"><a class="markdownIt-Anchor" href="#map"></a> Map</h2><p>Mapä¸Collectionåœ¨æ¡†æ¶ä¸­å±å¹¶ä¸¤åˆ—å­˜åœ¨ã€‚interface Map&lt;K, V&gt;</p><a href="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/1580552945802.png" data-fancybox="group" data-caption="map" class="fancybox"><img alt="map" style="zoom:80%;" data-src="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/1580552945802.png" class="lazyload" title="map"></a><p>Mapä¸€æ¬¡å­˜å‚¨ä¸€å¯¹å…ƒç´ ï¼ŒCollectionä¸€æ¬¡å­˜ä¸€ä¸ªã€‚Mapçš„é”®ä¸èƒ½é‡å¤ï¼Œä¿è¯å”¯ä¸€ã€‚</p><h3 id="treemap"><a class="markdownIt-Anchor" href="#treemap"></a> TreeMap</h3><p>â€‹åŸºäºçº¢é»‘æ ‘å®ç°ã€‚å¯ä»¥å¯¹é”®è¿›è¡Œæ’åºã€‚æ’åºæ–¹æ³•å’ŒTreeSetä¸­ç±»ä¼¼ï¼Œå¯¹äºä¸å…·å¤‡æ¯”è¾ƒæ€§çš„å¯¹è±¡éœ€è¦è‡ªå®šä¹‰æ¯”è¾ƒå™¨ä¼ å…¥å®¹å™¨ä¸­ã€‚</p><h3 id="hashmap"><a class="markdownIt-Anchor" href="#hashmap"></a> HashMap</h3><p>â€‹åŸºäºå“ˆå¸Œè¡¨å®ç°ï¼Œ æ— åºï¼Œçº¿ç¨‹ä¸åŒæ­¥ï¼Œè¦ä¿è¯é”®çš„å”¯ä¸€æ€§ï¼Œéœ€è¦é‡å†™hashCodeæ–¹æ³•å’Œequalsæ–¹æ³•ã€‚</p><h3 id="hashtable"><a class="markdownIt-Anchor" href="#hashtable"></a> HashTable</h3><ul><li>å’Œ HashMap ç±»ä¼¼ï¼Œä½†å®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè¿™æ„å‘³ç€åŒä¸€æ—¶åˆ»å¤šä¸ªçº¿ç¨‹åŒæ—¶å†™å…¥ HashTable ä¸ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚å®ƒæ˜¯é—ç•™ç±»ï¼Œä¸åº”è¯¥å»ä½¿ç”¨å®ƒï¼Œè€Œæ˜¯ä½¿ç”¨ ConcurrentHashMap æ¥æ”¯æŒçº¿ç¨‹å®‰å…¨ï¼ŒConcurrentHashMap çš„æ•ˆç‡ä¼šæ›´é«˜ï¼Œå› ä¸º ConcurrentHashMap å¼•å…¥äº†åˆ†æ®µé”ã€‚</li><li>Hashtableä¸å…è®¸nullå€¼ï¼ŒHashMapå…è®¸nullå€¼ï¼ˆkeyå’Œvalueéƒ½å…è®¸ )</li><li>æ•ˆç‡æ¯”HashMapä½</li></ul><h3 id="linkedhashmap"><a class="markdownIt-Anchor" href="#linkedhashmap"></a> LinkedHashMap</h3><p>â€‹ç»§æ‰¿äº†HashMapã€‚ä½¿ç”¨åŒå‘é“¾è¡¨æ¥ç»´æŠ¤å…ƒç´ çš„é¡ºåºï¼Œé¡ºåºä¸ºæ’å…¥é¡ºåºæˆ–è€…æœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼ˆLRUï¼‰é¡ºåºã€‚</p><h2 id="éå†"><a class="markdownIt-Anchor" href="#éå†"></a> éå†</h2><h3 id="è¿­ä»£å™¨"><a class="markdownIt-Anchor" href="#è¿­ä»£å™¨"></a> è¿­ä»£å™¨</h3><blockquote><p>è¿­ä»£å™¨ï¼š ä¸ºäº†æ–¹ä¾¿å¤„ç†é›†åˆä¸­çš„å…ƒç´ ï¼Œå‡ºç°äº†è¿­ä»£å™¨å¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡æ¯”è¾ƒç‰¹æ®Šï¼Œä¸èƒ½é€šè¿‡newæ¥åˆ›å»ºï¼Œå®ƒæ˜¯ä»¥<strong>å†…éƒ¨ç±»</strong>çš„å½¢å¼å­˜åœ¨äºæ¯ä¸ªé›†åˆçš„å†…éƒ¨ã€‚</p></blockquote><p>â€‹æ¯ä¸ªå®¹å™¨éƒ½èƒ½å–å‡ºå…ƒç´ çš„åŠŸèƒ½ï¼Œå®šä¹‰ä¸€æ ·ï¼Œåªä¸è¿‡ä¸åŒçš„å®¹å™¨ä½¿ç”¨çš„æ•°æ®ç»“æ„ä¸åŒè€Œå¯¼è‡´å–å‡ºå…ƒç´ çš„å…·ä½“å®ç°ä¸ä¸€æ ·ï¼Œå°†å…±æ€§æŠ½å–å‡ºæ¥å½¢æˆIteratoræ¥å£ã€‚æ¯ä¸€ä¸ªå®¹æ˜“åœ¨å…¶å†…éƒ¨è¿›è¡Œäº†å†…éƒ¨ç±»çš„å®ç°ã€‚ä¹Ÿå°±æ˜¯å°†å–å‡ºå…ƒç´ çš„æ–¹å¼çš„ç»†èŠ‚è¿›è¡Œå°è£…ã€‚</p><h3 id="iterable"><a class="markdownIt-Anchor" href="#iterable"></a> Iterable</h3><p>JDK1.5åçš„æ–°æ¥å£ã€‚Collectionç»§æ‰¿äº†æ­¤æ¥å£ï¼Œå®ç°äº†Iterableçš„ç±»å°±æ˜¯å¯ä»¥è¿›è¡Œè¿­ä»£çš„ï¼Œå¹¶ä¸”æ”¯æŒå¢å¼ºforå¾ªç¯ã€‚</p><h3 id="iterator"><a class="markdownIt-Anchor" href="#iterator"></a> Iterator</h3><p>Iterable æ¥å£åªæœ‰ä¸€ä¸ªè¿”å›è¿­ä»£å™¨çš„æ–¹æ³•Iterator().  Iteratoræ˜¯è¿­ä»£å™¨å¯¹è±¡ã€‚</p><blockquote><p>Iteartor<t>   Iterator()   è¿”å›è¯¥é›†åˆçš„è¿­ä»£å™¨å¯¹è±¡</t></p></blockquote><p>whileå¾ªç¯è¿›è¡Œè¿­ä»£å™¨éå†ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">      LinkedList list  = <span class="keyword">new</span> LinkedList();</span><br><span class="line">      list.push(<span class="number">2</span>);</span><br><span class="line">      list.push(<span class="number">4</span>);</span><br><span class="line">      list.push(<span class="number">5</span>);</span><br><span class="line">      list.push(<span class="number">6</span>);</span><br><span class="line"><span class="comment">// è¿­ä»£å™¨éå†</span></span><br><span class="line">      Iterator it = list.iterator();</span><br><span class="line">      <span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">          out.println(it.next());</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure></div><p>forå¾ªç¯ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (Iterator it = list.iterator(); it.hasNext();)&#123;</span><br><span class="line">            out.println(it.next());</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure></div><p>æ¨èä½¿ç”¨forå¾ªç¯ï¼Œå› ä¸ºå¯ä»¥è¿›è¡Œå†…å­˜ä¸Šçš„ä¼˜åŒ–ã€‚</p><blockquote><ol><li><p>å¦‚æœè¿­ä»£å™¨çš„æŒ‡é’ˆå·²ç»æŒ‡å‘äº†é›†åˆçš„æœ«å°¾ï¼Œ é‚£ä¹ˆå¦‚æœå†è°ƒç”¨next() ä¼šè¿”NoSuchElementException                                  å¼‚å¸¸ã€‚</p></li><li><p>å¦‚æœè°ƒç”¨moveæ–¹æ³•ä¹‹å‰æ²¡ç”¨è°ƒç”¨nextæ˜¯ä¸åˆæ³•çš„ã€‚ä¼šæŠ›å‡ºIllegaStateException</p></li></ol></blockquote><h3 id="è¿­ä»£å™¨åŸç†"><a class="markdownIt-Anchor" href="#è¿­ä»£å™¨åŸç†"></a> è¿­ä»£å™¨åŸç†</h3><p>ArrayListï¼š çœ‹æºç </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Iterator&lt;E&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Itr();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div><p>çœ‹çœ‹Itr()  æ–¹æ³•</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Itr</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> cursor;       <span class="comment">// index of next element to return ä¸‹ä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡</span></span><br><span class="line">        <span class="keyword">int</span> lastRet = -<span class="number">1</span>; <span class="comment">// index of last element returned; -1 if no such</span></span><br><span class="line">        <span class="keyword">int</span> expectedModCount = modCount;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœå½“å‰çš„ä¸‹æ ‡å¤§å°ä¸ç­‰äºå®¹å™¨ä¸ªå…ƒç´ ä¸ªæ•° å°± è¯´æ˜è¿˜æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> cursor != size;  </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">        <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">        <span class="function"><span class="keyword">public</span> E <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            checkForComodification();</span><br><span class="line">            <span class="keyword">int</span> i = cursor;</span><br><span class="line">            <span class="keyword">if</span> (i &gt;= size)  <span class="comment">//  æ²¡æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ äº†</span></span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</span><br><span class="line">            Object[] elementData = ArrayList.<span class="keyword">this</span>.elementData;</span><br><span class="line">            <span class="keyword">if</span> (i &gt;= elementData.length)</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">            cursor = i + <span class="number">1</span>; <span class="comment">// å½“å‰çš„cursorè¦æŒ‡å‘ä¸‹ä¸€ä¸ª</span></span><br><span class="line">            <span class="keyword">return</span> (E) elementData[lastRet = i];  <span class="comment">// è¿”å›å…ƒç´  </span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (lastRet &lt; <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException();</span><br><span class="line">            checkForComodification();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                ArrayList.<span class="keyword">this</span>.remove(lastRet);</span><br><span class="line">                cursor = lastRet;</span><br><span class="line">                lastRet = -<span class="number">1</span>;</span><br><span class="line">                expectedModCount = modCount;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IndexOutOfBoundsException ex) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure></div><p>æ¥çœ‹çœ‹ä¸Šé¢ä»£ç çš„<code>checkForComodification();</code></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">checkForComodification</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (modCount != expectedModCount)</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure></div><p>â€‹åœ¨å¯¹é›†åˆè¿›è¡Œè¿­ä»£è¿‡ç¨‹ä¸­ï¼Œä¸å…è®¸å‡ºç°è¿­ä»£å™¨ä»¥å¤–çš„å¯¹å…ƒç´ çš„æ“ä½œï¼Œ å› ä¸ºè¿™æ ·ä¼šäº§ç”Ÿå®‰å…¨éšæ‚£ï¼Œjavaä¼šæŠ›å‡ºå¼‚å¸¸å¹¶å‘ä¿®æ”¹å¼‚å¸¸<code>ConcurrentModificationException</code>ï¼Œ æ™®é€šè¿­ä»£å™¨åªæ”¯æŒåœ¨è¿­ä»£è¿‡ç¨‹ä¸­çš„åˆ é™¤æ“ä½œã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       ArrayList list = <span class="keyword">new</span> ArrayList();</span><br><span class="line">       list.add(<span class="string">"aaa"</span>);</span><br><span class="line">       list.add(<span class="string">"bbb"</span>);</span><br><span class="line">       list.add(<span class="string">"ccc"</span>);</span><br><span class="line">       list.add(<span class="string">"ddd"</span>);</span><br><span class="line">       list.add(<span class="string">"eee"</span>);</span><br><span class="line">       System.out.println(list);</span><br><span class="line">       Iterator it =  list.iterator();</span><br><span class="line">       <span class="keyword">while</span> (it.hasNext())&#123;</span><br><span class="line">           it.next();</span><br><span class="line">           it.remove();</span><br><span class="line">           list.add(<span class="string">"aaaaa"</span>); <span class="comment">// å‡ºç°äº†è¿­ä»£å™¨ä»¥å¤–çš„å¯¹å…ƒç´ çš„æ“ä½œ</span></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></div><p>â€‹æŠ¥é”™ï¼š</p><a href="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/1580558907260.png" data-fancybox="group" data-caption="1580558907260" class="fancybox"><img alt="1580558907260" style="zoom:80%;" data-src="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/1580558907260.png" class="lazyload" title="1580558907260"></a><h3 id="list-ç‰¹æœ‰çš„è¿­ä»£å™¨listiterator"><a class="markdownIt-Anchor" href="#list-ç‰¹æœ‰çš„è¿­ä»£å™¨listiterator"></a> List ç‰¹æœ‰çš„è¿­ä»£å™¨ListIterator</h3><p>å¦‚æœæƒ³åœ¨è¿­ä»£å…ƒç´ çš„è¿‡ç¨‹ä¸­æ“ä½œé›†åˆçš„å…ƒç´ ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨LIstç‰¹æœ‰çš„è¿­ä»£å™¨å¯¹è±¡ListIteratorï¼Œè¯¥è¿­ä»£å™¨å¯æ”¯æŒåœ¨è¿­ä»£çš„è¿‡ç¨‹ä¸­æ·»åŠ å…ƒç´ å’Œä¿®æ”¹å…ƒç´ ã€‚</p><p>implements ListIterator<e> æ¥å£</e></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListIterator&lt;E&gt; <span class="title">listIterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ListItr(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">ListItr</span> <span class="keyword">extends</span> <span class="title">Itr</span> <span class="keyword">implements</span> <span class="title">ListIterator</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">       ListItr(<span class="keyword">int</span> index) &#123;</span><br><span class="line">           <span class="keyword">super</span>();</span><br><span class="line">           cursor = index;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ˜¯å¦æœ‰å‰ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasPrevious</span><span class="params">()</span> </span>&#123;</span><br><span class="line">           <span class="keyword">return</span> cursor != <span class="number">0</span>;</span><br><span class="line">       &#125;</span><br><span class="line"><span class="comment">// è¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡</span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">nextIndex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">           <span class="keyword">return</span> cursor;</span><br><span class="line">       &#125;</span><br><span class="line"><span class="comment">// è¿”å›å‰ä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡</span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">previousIndex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">           <span class="keyword">return</span> cursor - <span class="number">1</span>;</span><br><span class="line">       &#125;</span><br><span class="line"><span class="comment">// è¿”å›å‰ä¸€ä¸ªå…ƒç´ ï¼š å¯ä»¥é€†åºè®¿é—®</span></span><br><span class="line">       <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">       <span class="function"><span class="keyword">public</span> E <span class="title">previous</span><span class="params">()</span> </span>&#123;</span><br><span class="line">           checkForComodification();</span><br><span class="line">           <span class="keyword">int</span> i = cursor - <span class="number">1</span>;</span><br><span class="line">           <span class="keyword">if</span> (i &lt; <span class="number">0</span>)</span><br><span class="line">               <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</span><br><span class="line">           Object[] elementData = ArrayList.<span class="keyword">this</span>.elementData;</span><br><span class="line">           <span class="keyword">if</span> (i &gt;= elementData.length)</span><br><span class="line">               <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">           cursor = i;</span><br><span class="line">           <span class="keyword">return</span> (E) elementData[lastRet = i];</span><br><span class="line">       &#125;</span><br><span class="line"><span class="comment">// ç”¨æŒ‡å®šå…ƒç´ æ›¿æ¢nextæˆ–è€… previousè¿”å›çš„æœ€åä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">           <span class="keyword">if</span> (lastRet &lt; <span class="number">0</span>)</span><br><span class="line">               <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException();</span><br><span class="line">           checkForComodification();</span><br><span class="line"></span><br><span class="line">           <span class="keyword">try</span> &#123;</span><br><span class="line">               ArrayList.<span class="keyword">this</span>.set(lastRet, e);</span><br><span class="line">           &#125; <span class="keyword">catch</span> (IndexOutOfBoundsException ex) &#123;</span><br><span class="line">               <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"><span class="comment">// å°†æŒ‡å®šçš„å…ƒç´ åŠ å…¥åˆ—è¡¨ï¼Œé’™å…ƒç´ ç›´æ¥æ’å…¥åˆ°nextå…ƒç´ çš„åé¢</span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">           checkForComodification();</span><br><span class="line"></span><br><span class="line">           <span class="keyword">try</span> &#123;</span><br><span class="line">               <span class="keyword">int</span> i = cursor;</span><br><span class="line">               ArrayList.<span class="keyword">this</span>.add(i, e);</span><br><span class="line">               cursor = i + <span class="number">1</span>;</span><br><span class="line">               lastRet = -<span class="number">1</span>;</span><br><span class="line">               expectedModCount = modCount;</span><br><span class="line">           &#125; <span class="keyword">catch</span> (IndexOutOfBoundsException ex) &#123;</span><br><span class="line">               <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></div><p>æµ‹è¯• setæ–¹æ³•ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       ArrayList list = <span class="keyword">new</span> ArrayList();</span><br><span class="line">       list.add(<span class="string">"aaa"</span>);</span><br><span class="line">       list.add(<span class="string">"bbb"</span>);</span><br><span class="line">       list.add(<span class="string">"ccc"</span>);</span><br><span class="line">       list.add(<span class="string">"ddd"</span>);</span><br><span class="line">       list.add(<span class="string">"eee"</span>);</span><br><span class="line">       System.out.println(list);</span><br><span class="line">       ListIterator it = list.listIterator();</span><br><span class="line">      System.out.println(it.next());</span><br><span class="line">      it.set(<span class="string">"zhu"</span>);</span><br><span class="line">      System.out.println(list);</span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></div><blockquote><p>è¾“å‡ºï¼š</p><p>[aaa, bbb, ccc, ddd, eee]<br>aaa<br>[zhu, bbb, ccc, ddd, eee]</p></blockquote><p>æµ‹è¯• addæ–¹æ³•</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ArrayList list = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        list.add(<span class="string">"aaa"</span>);</span><br><span class="line">        list.add(<span class="string">"bbb"</span>);</span><br><span class="line">        list.add(<span class="string">"ccc"</span>);</span><br><span class="line">        list.add(<span class="string">"ddd"</span>);</span><br><span class="line">        list.add(<span class="string">"eee"</span>);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">        ListIterator it = list.listIterator();</span><br><span class="line">       System.out.println(it.next());</span><br><span class="line">       it.add(<span class="string">"zhu"</span>);  <span class="comment">// åœ¨aaaä¹‹åæ·»åŠ zhu</span></span><br><span class="line">       System.out.println(list);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div><blockquote><p>è¾“å‡ºï¼š</p><p>[aaa, bbb, ccc, ddd, eee]<br>aaa<br>[aaa, zhu, bbb, ccc, ddd, eee]</p></blockquote><h3 id="éå†map"><a class="markdownIt-Anchor" href="#éå†map"></a> éå†Map</h3><p>æœ‰ä¸‰ç§æ–¹å¼ï¼š</p><ol><li>keySet() è·å–Mapä¸­çš„æ‰€æœ‰é”®ï¼Œè½¬æ¢æˆSeté›†åˆï¼Œç„¶åéå†è¯¥Setï¼Œé€šè¿‡getæ–¹æ³•è·å–é”®å¯¹åº”çš„å€¼</li><li>values() æ–¹æ³•æ¥è·å–æ‰€æœ‰å€¼ ï¼šCollection<v> values()  ä¸èƒ½è·å–åˆ°keyå¯¹è±¡</v></li><li><strong>Map.Entryå¯¹è±¡ï¼šé‡ç‚¹ï¼ï¼ï¼ï¼æ¨èä½¿ç”¨</strong>ï¼š Interface Map.Entry&lt;K,V&gt;</li></ol><h4 id="mapentry"><a class="markdownIt-Anchor" href="#mapentry"></a> Map.Entry</h4><p><code>public static interface Map.Entry&lt;K,V&gt;</code></p><p>å°†mapé›†åˆä¸­çš„é”®å€¼å¯¹å…³ç³»æ‰“åŒ…æˆä¸€ä¸ªMap.Entryå¯¹è±¡ï¼Œå°†è¯¥å¯¹è±¡å­˜å…¥Setç»“åˆä¸­ï¼Œä½¿ç”¨getKey() å’Œ getValue()æ¥è·å–é”®å’Œå€¼</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       HashMap&lt;String, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">       map.put(<span class="string">"aaa"</span>, <span class="number">123</span>);</span><br><span class="line">       map.put(<span class="string">"bbb"</span>, <span class="number">345</span>);</span><br><span class="line">       map.put(<span class="string">"ccc"</span>, <span class="number">121</span>);</span><br><span class="line">       map.put(<span class="string">"ddd"</span>, <span class="number">675</span>);</span><br><span class="line"></span><br><span class="line">       Set&lt;Map.Entry&lt;String, Integer&gt;&gt; s = map.entrySet();</span><br><span class="line">       Iterator&lt;Map.Entry&lt;String, Integer&gt;&gt; iterator = s.iterator();</span><br><span class="line">       <span class="keyword">while</span> (iterator.hasNext())&#123;</span><br><span class="line">           Map.Entry&lt;String, Integer&gt; en = iterator.next();</span><br><span class="line">           System.out.println(<span class="string">"é”®ï¼š "</span>+ en.getKey()+<span class="string">" å€¼ï¼š"</span>+ en.getValue());</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></div><blockquote><p>é”®ï¼š aaa å€¼ï¼š123<br>é”®ï¼š ccc å€¼ï¼š121<br>é”®ï¼š bbb å€¼ï¼š345<br>é”®ï¼š ddd å€¼ï¼š675</p></blockquote><hr><h2 id="æºç åˆ†æ"><a class="markdownIt-Anchor" href="#æºç åˆ†æ"></a> æºç åˆ†æ</h2><p>å¦‚æœæ²¡æœ‰ç‰¹åˆ«è¯´æ˜ï¼Œä»¥ä¸‹æºç åˆ†æåŸºäº JDK 1.8ã€‚</p><hr><h3 id="ä¸€-arraylist"><a class="markdownIt-Anchor" href="#ä¸€-arraylist"></a> ä¸€ã€ ArrayList</h3><h4 id="1-æ¦‚è§ˆ"><a class="markdownIt-Anchor" href="#1-æ¦‚è§ˆ"></a> 1. æ¦‚è§ˆ</h4><p>å› ä¸º ArrayList æ˜¯åŸºäºæ•°ç»„å®ç°çš„ï¼Œæ‰€ä»¥æ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ã€‚RandomAccess æ¥å£æ ‡è¯†ç€è¯¥ç±»æ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayList</span>&lt;<span class="title">E</span>&gt; <span class="keyword">extends</span> <span class="title">AbstractList</span>&lt;<span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class">        <span class="keyword">implements</span> <span class="title">List</span>&lt;<span class="title">E</span>&gt;, <span class="title">RandomAccess</span>, <span class="title">Cloneable</span>, <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span></span></span><br></pre></td></tr></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Default initial capacity.  æ•°ç»„çš„é»˜è®¤å¤§å°ä¸º10</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_CAPACITY = <span class="number">10</span>;</span><br></pre></td></tr></table></figure></div><a href="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/1581256240358.png" data-fancybox="group" data-caption="1581256240358" class="fancybox"><img alt="1581256240358" style="zoom:80%;" align="center" data-src="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/1581256240358.png" class="lazyload" title="1581256240358"></a><h4 id="2-æ‰©å®¹"><a class="markdownIt-Anchor" href="#2-æ‰©å®¹"></a> 2. æ‰©å®¹</h4><p>â€‹æ·»åŠ å…ƒç´ æ—¶ä½¿ç”¨  <code>ensureCapacityInternal()</code>  æ–¹æ³•æ¥ä¿è¯å®¹é‡è¶³å¤Ÿï¼Œå¦‚æœä¸å¤Ÿæ—¶ï¼Œéœ€è¦ä½¿ç”¨ <code>grow()</code> æ–¹æ³•è¿›è¡Œæ‰©å®¹ï¼Œæ–°å®¹é‡çš„å¤§å°ä¸º   <code>oldCapacity + (oldCapacity &gt;&gt; 1)</code>  ï¼Œä¹Ÿå°±æ˜¯æ—§å®¹é‡çš„ 1.5 å€ã€‚</p><p>â€‹ æ‰©å®¹æ“ä½œéœ€è¦è°ƒç”¨ <code>Arrays.copyOf()</code> æŠŠåŸæ•°ç»„æ•´ä¸ªå¤åˆ¶åˆ°æ–°æ•°ç»„ä¸­ï¼Œè¿™ä¸ªæ“ä½œä»£ä»·å¾ˆé«˜ï¼Œå› æ­¤æœ€å¥½åœ¨åˆ›å»º ArrayList å¯¹è±¡æ—¶å°±æŒ‡å®šå¤§æ¦‚çš„å®¹é‡å¤§å°ï¼Œå‡å°‘æ‰©å®¹æ“ä½œçš„æ¬¡æ•°ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    ensureCapacityInternal(size + <span class="number">1</span>);  <span class="comment">// Increments modCount!!</span></span><br><span class="line">    elementData[size++] = e;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureCapacityInternal</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class="line">        minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">    ensureExplicitCapacity(minCapacity);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureExplicitCapacity</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="comment">// overflow-conscious code</span></span><br><span class="line">    <span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>)</span><br><span class="line">        grow(minCapacity);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">grow</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// overflow-conscious code</span></span><br><span class="line">        <span class="keyword">int</span> oldCapacity = elementData.length;</span><br><span class="line">        <span class="keyword">int</span> newCapacity = oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">            newCapacity = minCapacity;</span><br><span class="line">        <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">            newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">        <span class="comment">// minCapacity is usually close to size, so this is a win:</span></span><br><span class="line">        elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div><h4 id="3-åˆ é™¤å…ƒç´ "><a class="markdownIt-Anchor" href="#3-åˆ é™¤å…ƒç´ "></a> 3. åˆ é™¤å…ƒç´ </h4><pre><code>éœ€è¦è°ƒç”¨      `System.arraycopy()`     å°†    `index+1 `      åé¢çš„å…ƒç´ éƒ½å¤åˆ¶åˆ° `index` ä½ç½®ä¸Šï¼Œè¯¥æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º `O(N)`ï¼Œå¯ä»¥çœ‹åˆ° ArrayList åˆ é™¤å…ƒç´ çš„ä»£ä»·æ˜¯éå¸¸é«˜çš„ã€‚ </code></pre><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">remove</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">       rangeCheck(index);</span><br><span class="line"></span><br><span class="line">       modCount++;</span><br><span class="line">       E oldValue = elementData(index);</span><br><span class="line"></span><br><span class="line">       <span class="keyword">int</span> numMoved = size - index - <span class="number">1</span>;</span><br><span class="line">       <span class="keyword">if</span> (numMoved &gt; <span class="number">0</span>)</span><br><span class="line">           System.arraycopy(elementData, index+<span class="number">1</span>, elementData, index,</span><br><span class="line">                            numMoved);</span><br><span class="line">       elementData[--size] = <span class="keyword">null</span>; <span class="comment">// clear to let GC do its work</span></span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> oldValue;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></div><h4 id="4-åºåˆ—åŒ–"><a class="markdownIt-Anchor" href="#4-åºåˆ—åŒ–"></a> 4. åºåˆ—åŒ–</h4><p>â€‹ArrayList åŸºäºæ•°ç»„å®ç°ï¼Œå¹¶ä¸”å…·æœ‰<strong>åŠ¨æ€æ‰©å®¹ç‰¹æ€§</strong>ï¼Œå› æ­¤ä¿å­˜å…ƒç´ çš„æ•°ç»„ä¸ä¸€å®šéƒ½ä¼šè¢«ä½¿ç”¨ï¼Œé‚£ä¹ˆå°±æ²¡å¿…è¦å…¨éƒ¨è¿›è¡Œåºåˆ—åŒ–ã€‚</p><p>â€‹ä¿å­˜å…ƒç´ çš„æ•°ç»„ elementData ä½¿ç”¨ <code>transient</code> ä¿®é¥°ï¼Œ<strong>è¯¥å…³é”®å­—å£°æ˜æ•°ç»„é»˜è®¤ä¸ä¼šè¢«åºåˆ—åŒ–</strong>ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">transient</span> Object[] elementData; <span class="comment">// non-private to simplify nested class access</span></span><br></pre></td></tr></table></figure></div><p>â€‹ArrayList å®ç°äº† <code>writeObject()</code> å’Œ <code>readObject()</code> æ¥æ§åˆ¶åªåºåˆ—åŒ–æ•°ç»„ä¸­æœ‰å…ƒç´ å¡«å……é‚£éƒ¨åˆ†å†…å®¹ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Reconstitute the &lt;tt&gt;ArrayList&lt;/tt&gt; instance from a stream (that is,</span></span><br><span class="line"><span class="comment">     * deserialize it).  ååºåˆ—åŒ–</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">readObject</span><span class="params">(java.io.ObjectInputStream s)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> java.io.IOException, ClassNotFoundException </span>&#123;</span><br><span class="line">        elementData = EMPTY_ELEMENTDATA;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Read in size, and any hidden stuff</span></span><br><span class="line">        s.defaultReadObject();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Read in capacity</span></span><br><span class="line">        s.readInt(); <span class="comment">// ignored</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (size &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// be like clone(), allocate array based upon size not capacity</span></span><br><span class="line">            <span class="keyword">int</span> capacity = calculateCapacity(elementData, size);</span><br><span class="line">            SharedSecrets.getJavaOISAccess().checkArray(s, Object[]<span class="class">.<span class="keyword">class</span>, <span class="title">capacity</span>)</span>;</span><br><span class="line">            ensureCapacityInternal(size);</span><br><span class="line"></span><br><span class="line">            Object[] a = elementData;</span><br><span class="line">            <span class="comment">// Read in all elements in the proper order.</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;size; i++) &#123;</span><br><span class="line">                a[i] = s.readObject();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Save the state of the &lt;tt&gt;ArrayList&lt;/tt&gt; instance to a stream (that</span></span><br><span class="line"><span class="comment">    * is, serialize it).  åºåˆ—åŒ–</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@serialData</span> The length of the array backing the &lt;tt&gt;ArrayList&lt;/tt&gt;</span></span><br><span class="line"><span class="comment">    *             instance is emitted (int), followed by all of its elements</span></span><br><span class="line"><span class="comment">    *             (each an &lt;tt&gt;Object&lt;/tt&gt;) in the proper order.</span></span><br><span class="line"><span class="comment">    åªåºåˆ—åŒ–æ•°ç»„ä¸­æœ‰å…ƒç´ å¡«å……é‚£éƒ¨åˆ†å†…å®¹</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">writeObject</span><span class="params">(java.io.ObjectOutputStream s)</span></span></span><br><span class="line"><span class="function">       <span class="keyword">throws</span> java.io.IOException</span>&#123;</span><br><span class="line">       <span class="comment">// Write out element count, and any hidden stuff</span></span><br><span class="line">       <span class="keyword">int</span> expectedModCount = modCount;</span><br><span class="line">       s.defaultWriteObject();</span><br><span class="line"></span><br><span class="line">       <span class="comment">// Write out size as capacity for behavioural compatibility with clone()</span></span><br><span class="line">       s.writeInt(size);</span><br><span class="line"></span><br><span class="line">       <span class="comment">// Write out all elements in the proper order.</span></span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;size; i++) &#123;</span><br><span class="line">           s.writeObject(elementData[i]);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span> (modCount != expectedModCount) &#123;</span><br><span class="line">           <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></div><p>â€‹ åºåˆ—åŒ–æ—¶éœ€è¦ä½¿ç”¨ <code>ObjectOutputStream</code> çš„ <code>writeObject()</code> å°†å¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚æµå¹¶è¾“å‡ºã€‚è€Œ <code>writeObject()</code> æ–¹æ³•åœ¨ä¼ å…¥çš„å¯¹è±¡å­˜åœ¨ <code>writeObject()</code> çš„æ—¶å€™ä¼šå»åå°„è°ƒç”¨è¯¥å¯¹è±¡çš„ <code>writeObject()</code> æ¥å®ç°åºåˆ—åŒ–ã€‚ååºåˆ—åŒ–ä½¿ç”¨çš„æ˜¯ <code>ObjectInputStream</code> çš„ <code>readObject()</code> æ–¹æ³•ï¼ŒåŸç†ç±»ä¼¼ã€‚</p><h4 id="5-fail-fast"><a class="markdownIt-Anchor" href="#5-fail-fast"></a> 5. Fail-Fast</h4><p>â€‹<strong><code>modCount</code> ç”¨æ¥è®°å½• ArrayList ç»“æ„å‘ç”Ÿå˜åŒ–çš„æ¬¡æ•°</strong>ã€‚</p><blockquote><p>â€‹ç»“æ„å‘ç”Ÿå˜åŒ–æ˜¯æŒ‡æ·»åŠ æˆ–è€…åˆ é™¤è‡³å°‘ä¸€ä¸ªå…ƒç´ çš„æ‰€æœ‰æ“ä½œï¼Œæˆ–è€…æ˜¯è°ƒæ•´å†…éƒ¨æ•°ç»„çš„å¤§å°ï¼Œä»…ä»…åªæ˜¯è®¾ç½®å…ƒç´ çš„å€¼ä¸ç®—ç»“æ„å‘ç”Ÿå˜åŒ–ã€‚</p></blockquote><p>â€‹åœ¨è¿›è¡Œåºåˆ—åŒ–æˆ–è€…è¿­ä»£ç­‰æ“ä½œæ—¶ï¼Œéœ€è¦æ¯”è¾ƒæ“ä½œå‰å <code>modCount</code> æ˜¯å¦æ”¹å˜ï¼Œå¦‚æœæ”¹å˜äº†éœ€è¦æŠ›å‡º <code>ConcurrentModificationException</code>ã€‚ä»£ç å‚è€ƒä¸ŠèŠ‚åºåˆ—åŒ–ä¸­çš„ <code>writeObject()</code> æ–¹æ³•ã€‚</p><p>â€‹ <code>fail-fast</code> æœºåˆ¶æ˜¯Javaé›†åˆ(Collection)ä¸­çš„ä¸€ç§é”™è¯¯æœºåˆ¶ã€‚å½“å¤šä¸ªçº¿ç¨‹å¯¹åŒä¸€ä¸ªé›†åˆçš„å†…å®¹è¿›è¡Œæ“ä½œæ—¶ï¼Œå°±å¯èƒ½ä¼šäº§ç”Ÿ<code>fail-fast</code>äº‹ä»¶ã€‚ä¾‹å¦‚ï¼šå½“æŸä¸€ä¸ªçº¿ç¨‹Aé€šè¿‡<code>iterator</code>å»éå†æŸé›†åˆçš„è¿‡ç¨‹ä¸­ï¼Œè‹¥è¯¥é›†åˆçš„å†…å®¹è¢«å…¶ä»–çº¿ç¨‹æ‰€æ”¹å˜äº†ï¼›é‚£ä¹ˆçº¿ç¨‹Aè®¿é—®é›†åˆæ—¶ï¼Œå°±ä¼šæŠ›å‡º<code>ConcurrentModificationException</code>å¼‚å¸¸ï¼Œäº§ç”Ÿ<code>fail-fast</code>äº‹ä»¶ã€‚</p><blockquote><p>â€‹ <code>ConcurrentModificationException</code> å¼‚å¸¸ ï¼š  å½“æ–¹æ³•æ£€æµ‹åˆ°å¯¹è±¡çš„å¹¶å‘ä¿®æ”¹ï¼Œä½†ä¸å…è®¸è¿™ç§ä¿®æ”¹æ—¶å°±æŠ›å‡ºè¯¥å¼‚å¸¸ã€‚åŒæ—¶éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯¥å¼‚å¸¸ä¸ä¼šå§‹ç»ˆæŒ‡å‡ºå¯¹è±¡å·²ç»ç”±ä¸åŒçº¿ç¨‹å¹¶å‘ä¿®æ”¹ï¼Œå¦‚æœå•çº¿ç¨‹è¿åäº†è§„åˆ™ï¼ŒåŒæ ·ä¹Ÿæœ‰å¯èƒ½ä¼šæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</p></blockquote><p>â€‹è¯šç„¶ï¼Œè¿­ä»£å™¨çš„<strong>å¿«é€Ÿå¤±è´¥</strong>è¡Œä¸ºæ— æ³•å¾—åˆ°ä¿è¯ï¼Œå®ƒä¸èƒ½ä¿è¯ä¸€å®šä¼šå‡ºç°è¯¥é”™è¯¯ï¼Œä½†æ˜¯å¿«é€Ÿå¤±è´¥æ“ä½œä¼šå°½æœ€å¤§åŠªåŠ›æŠ›å‡º<code>ConcurrentModificationException</code>å¼‚å¸¸ï¼Œæ‰€ä»¥å› æ­¤ï¼Œä¸ºæé«˜æ­¤ç±»æ“ä½œçš„æ­£ç¡®æ€§è€Œç¼–å†™ä¸€ä¸ªä¾èµ–äºæ­¤å¼‚å¸¸çš„ç¨‹åºæ˜¯é”™è¯¯çš„åšæ³•ï¼Œæ­£ç¡®åšæ³•æ˜¯ï¼š<code>ConcurrentModificationException</code> åº”è¯¥ä»…ç”¨äºæ£€æµ‹ bugã€‚</p><p>â€‹ çº¿ç¨‹ç¯å¢ƒä¸‹äº§ç”Ÿè¯¥å¼‚å¸¸çš„åŸå› æ˜¯åœ¨è¿­ä»£å™¨éå†é›†åˆæ—¶ï¼Œä½¿ç”¨äº†é›†åˆæœ¬èº«çš„<code>remove</code>æ–¹æ³•è€Œä¸æ˜¯è¿­ä»£å™¨çš„ï¼›</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">checkForComodification</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (modCount != expectedModCount)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>â€‹åœ¨ArrayListè¿›è¡Œ<code>add</code>ï¼Œ<code>remove</code>ï¼Œ<code>clear</code>ç­‰æ¶‰åŠåˆ°ä¿®æ”¹é›†åˆä¸­çš„å…ƒç´ ä¸ªæ•°çš„æ“ä½œæ—¶ï¼Œ<code>modCount</code>å°±ä¼šå‘ç”Ÿæ”¹å˜<code>(modCount ++)</code>,æ‰€ä»¥å½“å¦ä¸€ä¸ªçº¿ç¨‹(å¹¶å‘ä¿®æ”¹)æˆ–è€…åŒä¸€ä¸ªçº¿ç¨‹éå†è¿‡ç¨‹ä¸­ï¼Œè°ƒç”¨ç›¸å…³æ–¹æ³•ä½¿é›†åˆçš„ä¸ªæ•°å‘ç”Ÿæ”¹å˜ï¼Œå°±ä¼šä½¿<code>modCount</code>å‘ç”Ÿå˜åŒ–ï¼Œè¿™æ ·åœ¨<code>checkForComodification</code>æ–¹æ³•ä¸­å°±ä¼šæŠ›å‡º<code>ConcurrentModificationException</code>å¼‚å¸¸ã€‚</p><p><code>fail-fast</code>ä¼šåœ¨ä»¥ä¸‹ä¸¤ç§æƒ…å†µä¸‹æŠ›å‡º<code>ConcurrentModificationException</code> ï¼š</p><blockquote><p>ï¼ˆ1ï¼‰å•çº¿ç¨‹ç¯å¢ƒ</p><p>é›†åˆè¢«åˆ›å»ºåï¼Œåœ¨éå†å®ƒçš„è¿‡ç¨‹ä¸­ä¿®æ”¹äº†ç»“æ„ã€‚</p><p>æ³¨æ„ <code>remove()</code>æ–¹æ³•ä¼šè®©<code>expectModcount</code>å’Œ<code>modcount</code> ç›¸ç­‰ï¼Œæ‰€ä»¥æ˜¯ä¸ä¼šæŠ›å‡ºè¿™ä¸ªå¼‚å¸¸ã€‚</p><p>ï¼ˆ2ï¼‰å¤šçº¿ç¨‹ç¯å¢ƒ</p><p>å½“ä¸€ä¸ªçº¿ç¨‹åœ¨éå†è¿™ä¸ªé›†åˆï¼Œè€Œå¦ä¸€ä¸ªçº¿ç¨‹å¯¹è¿™ä¸ªé›†åˆçš„ç»“æ„è¿›è¡Œäº†ä¿®æ”¹ã€‚</p></blockquote><p><strong>é—®é¢˜</strong>ï¼š fail-fastæœºåˆ¶æ˜¯å¦‚ä½•æ£€æµ‹çš„ï¼Ÿ</p><p>â€‹è¿­ä»£å™¨åœ¨éå†è¿‡ç¨‹ä¸­æ˜¯ç›´æ¥è®¿é—®å†…éƒ¨æ•°æ®çš„ï¼Œå› æ­¤å†…éƒ¨çš„æ•°æ®åœ¨éå†çš„è¿‡ç¨‹ä¸­æ— æ³•è¢«ä¿®æ”¹ã€‚ä¸ºäº†ä¿è¯ä¸è¢«ä¿®æ”¹ï¼Œè¿­ä»£å™¨å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªæ ‡è®° â€œ<code>modCount</code>â€ ï¼Œå½“é›†åˆç»“æ„æ”¹å˜ï¼ˆæ·»åŠ åˆ é™¤æˆ–è€…ä¿®æ”¹ï¼‰ï¼Œæ ‡è®°&quot;<code>modCount</code>â€œä¼šè¢«ä¿®æ”¹ï¼Œè€Œè¿­ä»£å™¨æ¯æ¬¡çš„<code>hasNext()</code>å’Œ<code>next()</code>æ–¹æ³•éƒ½ä¼šæ£€æŸ¥è¯¥â€<code>modCount</code>&quot;æ˜¯å¦è¢«æ”¹å˜ï¼Œå½“æ£€æµ‹åˆ°è¢«ä¿®æ”¹æ—¶ï¼ŒæŠ›å‡º<code>ConcurrentModificationException</code></p><h5 id="å•çº¿ç¨‹æƒ…å†µ"><a class="markdownIt-Anchor" href="#å•çº¿ç¨‹æƒ…å†µ"></a> å•çº¿ç¨‹æƒ…å†µ</h5><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">      List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; <span class="number">10</span> ; i++ ) &#123;</span><br><span class="line">           list.add(i + <span class="string">""</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      Iterator&lt;String&gt; iterator = list.iterator();</span><br><span class="line">      <span class="keyword">int</span> i = <span class="number">0</span> ;</span><br><span class="line">      <span class="keyword">while</span>(iterator.hasNext()) &#123;</span><br><span class="line">           <span class="keyword">if</span> (i == <span class="number">3</span>) &#123;</span><br><span class="line">                list.remove(<span class="number">3</span>);</span><br><span class="line">           &#125;</span><br><span class="line">           System.out.println(iterator.next());</span><br><span class="line">           i ++;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>ä¸Šè¿°ä»£ç æ˜¯ArrayListå•çº¿ç¨‹ç¯å¢ƒä¸‹çš„fail-fast ï¼Œ è¯¥æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªArraylisté›†åˆï¼Œå¹¶ä½¿ç”¨è¿­ä»£å™¨éå†ï¼Œåœ¨éå†è¿‡ç¨‹ä¸­ï¼Œåˆ»æ„åœ¨æŸä¸€æ­¥è¿­ä»£ä¸­removeä¸€ä¸ªå…ƒç´ ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå°±ä¼šå‘ç”Ÿfail-fastã€‚</p><a href="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/1581309298345.png" data-fancybox="group" data-caption="1581309298345" class="fancybox"><img alt="1581309298345" style="zoom:80%;" align="center" data-src="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/1581309298345.png" class="lazyload" title="1581309298345"></a><p>å¦‚æœå°†ä»¥ä¸Šä»£ç ä¿®æ”¹æˆåœ¨nextä¹‹åè¿›è¡Œè¿­ä»£å™¨çš„removeæ“ä½œï¼Œå°±ä¸ä¼šæŠ¥é”™ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; <span class="number">10</span> ; i++ ) &#123;</span><br><span class="line">            list.add(i + <span class="string">""</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        Iterator&lt;String&gt; iterator = list.iterator();</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span> ;</span><br><span class="line">        <span class="keyword">while</span>(iterator.hasNext()) &#123;</span><br><span class="line"></span><br><span class="line">            System.out.println(iterator.next());</span><br><span class="line">            <span class="keyword">if</span> (i == <span class="number">3</span>) &#123;</span><br><span class="line">                iterator.remove(); <span class="comment">//  åœ¨nextä¹‹åè¿›è¡Œè¿­ä»£å™¨çš„removeæ“ä½œ</span></span><br><span class="line">            &#125;</span><br><span class="line">            i ++;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div><p>è¾“å‡ºï¼š</p><blockquote><p>0<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>[0, 1, 2, 4, 5, 6, 7, 8, 9]</p></blockquote><p>â€‹æ‰€ä»¥ï¼Œåœ¨å¯¹é›†åˆè¿›è¡Œè¿­ä»£è¿‡ç¨‹ä¸­ï¼Œ<strong>ä¸å…è®¸å‡ºç°è¿­ä»£å™¨ä»¥å¤–çš„å¯¹å…ƒç´ çš„æ“ä½œ</strong>ï¼Œ å› ä¸ºè¿™æ ·ä¼šäº§ç”Ÿå®‰å…¨éšæ‚£ï¼Œjavaä¼šæŠ›å‡ºå¼‚å¸¸å¹¶å‘ä¿®æ”¹å¼‚å¸¸<code>ConcurrentModificationException</code>ï¼Œ æ™®é€šè¿­ä»£å™¨åªæ”¯æŒåœ¨è¿­ä»£è¿‡ç¨‹ä¸­çš„åˆ é™¤æ“ä½œã€‚</p><p>ç±»ä¼¼çš„ï¼ŒhashMapä¸­å‘ç”Ÿçš„åŸç†ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚</p><p>HashMapå‘ç”Ÿfail-fast ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">      Map&lt;String, String&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; <span class="number">10</span> ; i ++ ) &#123;</span><br><span class="line">           map.put(i+<span class="string">""</span>, i+<span class="string">""</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      Iterator&lt;Entry&lt;String, String&gt;&gt; it = map.entrySet().iterator();</span><br><span class="line">      <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">           <span class="keyword">if</span> (i == <span class="number">3</span>) &#123;</span><br><span class="line">                map.remove(<span class="number">3</span>+<span class="string">""</span>);</span><br><span class="line">           &#125;</span><br><span class="line">           Entry&lt;String, String&gt; entry = it.next();</span><br><span class="line">           System.out.println(<span class="string">"key= "</span> + entry.getKey() + <span class="string">" and value= "</span> + entry.getValue());</span><br><span class="line">           i++;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>è¯¥æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªhashmapå¯¹è±¡å¹¶å­˜æ”¾äº†10ä¸ªé”®å€¼å¯¹ï¼Œåœ¨è¿­ä»£éå†è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨mapçš„removeæ–¹æ³•ç§»é™¤äº†ä¸€ä¸ªå…ƒç´ ï¼Œå¯¼è‡´æŠ›å‡ºäº†<code>ConcurrentModificationException</code>å¼‚å¸¸ï¼š</p><p>â€‹<a href="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/1581310117229.png" data-fancybox="group" data-caption="1581310117229" class="fancybox"><img alt="1581310117229" style="zoom:80%;" align="center" data-src="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/1581310117229.png" class="lazyload" title="1581310117229"></a></p><p>ç±»ä¼¼ï¼Œnextä¹‹åè°ƒç”¨è¿­ä»£å™¨çš„removeå°±å¯ä»¥æˆåŠŸåˆ é™¤ã€‚</p><h5 id="å¤šçº¿ç¨‹æƒ…å†µ"><a class="markdownIt-Anchor" href="#å¤šçº¿ç¨‹æƒ…å†µ"></a> å¤šçº¿ç¨‹æƒ…å†µ</h5><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Hongliang Zhu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020-02-10 12:53</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FailFastTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyThread1</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            Iterator&lt;String&gt; iterator = list.iterator();</span><br><span class="line">            <span class="keyword">while</span>(iterator.hasNext()) &#123;</span><br><span class="line">                String s = iterator.next();</span><br><span class="line">                System.out.println(<span class="keyword">this</span>.getName() + <span class="string">":"</span> + s);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">super</span>.run();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyThread2</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">while</span> (i &lt; <span class="number">10</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">"thread2:"</span> + i);</span><br><span class="line">                <span class="keyword">if</span> (i == <span class="number">2</span>) &#123;</span><br><span class="line">                    list.remove(i);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                i ++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; <span class="number">10</span>;i++)&#123;</span><br><span class="line">            list.add(i+<span class="string">""</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        MyThread1 thread1 = <span class="keyword">new</span> MyThread1();</span><br><span class="line">        MyThread2 thread2 = <span class="keyword">new</span> MyThread2();</span><br><span class="line">        thread1.setName(<span class="string">"thread1"</span>);</span><br><span class="line">        thread2.setName(<span class="string">"thread2"</span>);</span><br><span class="line">        thread1.start();</span><br><span class="line">        thread2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>å¯åŠ¨ä¸¤ä¸ªçº¿ç¨‹ï¼Œåˆ†åˆ«å¯¹å…¶ä¸­ä¸€ä¸ªå¯¹listè¿›è¡Œè¿­ä»£ï¼Œå¦ä¸€ä¸ªåœ¨çº¿ç¨‹1çš„è¿­ä»£è¿‡ç¨‹ä¸­å»removeä¸€ä¸ªå…ƒç´ ï¼Œç»“æœä¹Ÿæ˜¯æŠ›å‡ºäº†<code>java.util.ConcurrentModificationException</code></p><a href="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/1581310760678.png" data-fancybox="group" data-caption="1581310760678" class="fancybox"><img alt="1581310760678" style="zoom:80%;" align="center" data-src="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/1581310760678.png" class="lazyload" title="1581310760678"></a><h5 id="é¿å…fail-fast"><a class="markdownIt-Anchor" href="#é¿å…fail-fast"></a> <strong>é¿å…fail-fast</strong></h5><p>æ–¹æ³•ä¸€:</p><pre><code>åœ¨å•çº¿ç¨‹çš„éå†è¿‡ç¨‹ä¸­ï¼Œå¦‚æœè¦è¿›è¡Œ`remove`æ“ä½œï¼Œå¯ä»¥è°ƒç”¨è¿­ä»£å™¨çš„`remove`æ–¹æ³•è€Œä¸æ˜¯é›†åˆç±»çš„`remove`æ–¹æ³•ã€‚çœ‹çœ‹ArrayListä¸­è¿­ä»£å™¨çš„removeæ–¹æ³•çš„æºç :</code></pre><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (lastRet &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException();</span><br><span class="line">    checkForComodification();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        ArrayList.<span class="keyword">this</span>.remove(lastRet);</span><br><span class="line">        cursor = lastRet;</span><br><span class="line">        lastRet = -<span class="number">1</span>;</span><br><span class="line">        expectedModCount = modCount;  <span class="comment">/// ä¸ä¼šä¿®æ”¹modCountï¼Œè€Œæ˜¯ä»¤å…¶ä½™expectedModCountç›¸ç­‰</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (IndexOutOfBoundsException ex) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>â€‹ å¯ä»¥çœ‹åˆ°ï¼Œè¯¥removeæ–¹æ³•å¹¶ä¸ä¼šä¿®æ”¹<code>modCount</code>çš„å€¼ï¼Œå¹¶ä¸”ä¸ä¼šå¯¹åé¢çš„éå†é€ æˆå½±å“ï¼Œå› ä¸ºè¯¥æ–¹æ³•removeä¸èƒ½æŒ‡å®šå…ƒç´ ï¼Œåªèƒ½removeå½“å‰éå†è¿‡çš„é‚£ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥è°ƒç”¨è¯¥æ–¹æ³•å¹¶ä¸ä¼šå‘ç”Ÿ<code>fail-fast</code>ç°è±¡ã€‚è¯¥æ–¹æ³•æœ‰å±€é™æ€§ï¼Œå°±æ˜¯ä¸Šé¢è¯´çš„ï¼Œåªèƒ½ä»£ç”¨nextæ–¹æ³•ä¹‹åå†è°ƒç”¨è¿­ä»£å™¨çš„removeæ–¹æ³•ã€‚</p><p>æ–¹æ³•äºŒï¼šå®‰å…¨å¤±è´¥</p><p>â€‹ä½¿ç”¨javaå¹¶å‘åŒ…<code>(java.util.concurrent)</code>ä¸­çš„ç±»æ¥ä»£æ›¿ArrayList å’ŒhashMapã€‚<br>â€‹æ¯”å¦‚ä½¿ç”¨ <code>CopyOnWriterArrayList</code>ä»£æ›¿<code>ArrayList</code>ï¼Œ<code>CopyOnWriterArrayList</code>åœ¨æ˜¯ä½¿ç”¨ä¸Šè·Ÿ<code>ArrayList</code>å‡ ä¹ä¸€æ ·ï¼Œ<code>CopyOnWriter</code>æ˜¯å†™æ—¶å¤åˆ¶çš„å®¹å™¨(COW)ï¼Œåœ¨è¯»å†™æ—¶æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚è¯¥å®¹å™¨åœ¨å¯¹<code>add</code>å’Œ<code>remove</code>ç­‰æ“ä½œæ—¶ï¼Œå¹¶ä¸æ˜¯åœ¨åŸæ•°ç»„ä¸Šè¿›è¡Œä¿®æ”¹ï¼Œè€Œæ˜¯å°†åŸæ•°ç»„æ‹·è´ä¸€ä»½ï¼Œåœ¨æ–°æ•°ç»„ä¸Šè¿›è¡Œä¿®æ”¹ï¼Œå¾…å®Œæˆåï¼Œæ‰å°†æŒ‡å‘æ—§æ•°ç»„çš„å¼•ç”¨æŒ‡å‘æ–°æ•°ç»„ï¼Œæ‰€ä»¥å¯¹äº<code>CopyOnWriterArrayLis</code>tåœ¨è¿­ä»£è¿‡ç¨‹å¹¶ä¸ä¼šå‘ç”Ÿ<code>fail-fast</code>ç°è±¡ã€‚<strong>ä½† <code>CopyOnWrite</code>å®¹å™¨åªèƒ½ä¿è¯æ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§ï¼Œä¸èƒ½ä¿è¯æ•°æ®çš„å®æ—¶ä¸€è‡´æ€§ã€‚</strong><br>â€‹å¯¹äº<code>HashMap</code>ï¼Œå¯ä»¥ä½¿ç”¨<code>ConcurrentHashMap</code>ï¼Œ<code>ConcurrentHashMap</code>é‡‡ç”¨äº†<strong>é”æœºåˆ¶</strong>ï¼Œ<strong>æ˜¯çº¿ç¨‹å®‰å…¨çš„</strong>ã€‚åœ¨è¿­ä»£æ–¹é¢ï¼Œ<code>ConcurrentHashMap</code>ä½¿ç”¨äº†ä¸€ç§ä¸åŒçš„è¿­ä»£æ–¹å¼ã€‚åœ¨è¿™ç§è¿­ä»£æ–¹å¼ä¸­ï¼Œå½“<code>iterator</code>è¢«åˆ›å»ºåé›†åˆå†å‘ç”Ÿæ”¹å˜å°±ä¸å†æ˜¯æŠ›å‡º<code>ConcurrentModificationException</code>ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ï¼šåœ¨æ”¹å˜æ—¶<code>new</code>æ–°çš„æ•°æ®ä»è€Œä¸å½±å“åŸæœ‰çš„æ•°æ® ï¼Œ<code>iterator</code>å®Œæˆåå†å°†å¤´æŒ‡é’ˆæ›¿æ¢ä¸ºæ–°çš„æ•°æ® ï¼Œè¿™æ ·<code>iterator</code>çº¿ç¨‹å¯ä»¥ä½¿ç”¨åŸæ¥è€çš„æ•°æ®ï¼Œè€Œå†™çº¿ç¨‹ä¹Ÿå¯ä»¥å¹¶å‘çš„å®Œæˆæ”¹å˜ã€‚å³è¿­ä»£ä¸ä¼šå‘ç”Ÿ<code>fail-fast</code>ï¼Œä½†ä¸ä¿è¯è·å–çš„æ˜¯æœ€æ–°çš„æ•°æ®ã€‚</p><h4 id="6-å®‰å…¨å¤±è´¥failsafe"><a class="markdownIt-Anchor" href="#6-å®‰å…¨å¤±è´¥failsafe"></a> 6. å®‰å…¨å¤±è´¥ï¼ˆfailâ€”safeï¼‰</h4><blockquote><pre><code>  å¿«é€Ÿå¤±è´¥ï¼ˆFail-Fastï¼‰çš„åœºæ™¯ï¼š `java.util`åŒ…ä¸‹çš„é›†åˆç±»éƒ½æ˜¯å¿«é€Ÿå¤±è´¥çš„ï¼Œä¸èƒ½åœ¨å¤šçº¿ç¨‹ä¸‹å‘ç”Ÿå¹¶å‘ä¿®æ”¹ï¼ˆè¿­ä»£è¿‡ç¨‹ä¸­è¢«ä¿®æ”¹ï¼‰ã€‚ </code></pre></blockquote><p>â€‹é‡‡ç”¨å®‰å…¨å¤±è´¥æœºåˆ¶çš„é›†åˆå®¹å™¨ï¼Œåœ¨éå†æ—¶ä¸æ˜¯ç›´æ¥åœ¨é›†åˆå†…å®¹ä¸Šè®¿é—®çš„ï¼Œè€Œæ˜¯å…ˆå¤åˆ¶åŸæœ‰é›†åˆå†…å®¹ï¼Œåœ¨æ‹·è´çš„é›†åˆä¸Šè¿›è¡Œéå†ã€‚æ¯”å¦‚ä¸Šé¢è¯´çš„COW</p><blockquote><pre><code>   **åŸç†ï¼š**ç”±äºè¿­ä»£æ—¶æ˜¯å¯¹åŸé›†åˆçš„æ‹·è´è¿›è¡Œéå†ï¼Œæ‰€ä»¥åœ¨éå†è¿‡ç¨‹ä¸­å¯¹åŸé›†åˆæ‰€ä½œçš„ä¿®æ”¹å¹¶ä¸èƒ½è¢«è¿­ä»£å™¨æ£€æµ‹åˆ°ï¼Œæ‰€ä»¥ä¸ä¼šè§¦å‘Concurrent Modification Exceptionã€‚  **ç¼ºç‚¹ï¼š**åŸºäºæ‹·è´å†…å®¹çš„ä¼˜ç‚¹æ˜¯é¿å…äº†Concurrent Modification Exceptionï¼Œä½†åŒæ ·åœ°ï¼Œè¿­ä»£å™¨å¹¶ä¸èƒ½è®¿é—®åˆ°ä¿®æ”¹åçš„å†…å®¹ï¼Œå³ï¼šè¿­ä»£å™¨éå†çš„æ˜¯å¼€å§‹éå†é‚£ä¸€åˆ»æ‹¿åˆ°çš„é›†åˆæ‹·è´ï¼Œåœ¨éå†æœŸé—´åŸé›†åˆå‘ç”Ÿçš„ä¿®æ”¹è¿­ä»£å™¨æ˜¯ä¸çŸ¥é“çš„ã€‚</code></pre></blockquote><p>â€‹     åœºæ™¯ï¼š<code>java.util.concurrent</code>åŒ…ä¸‹çš„å®¹å™¨éƒ½æ˜¯å®‰å…¨å¤±è´¥ï¼Œå¯ä»¥åœ¨å¤šçº¿ç¨‹ä¸‹å¹¶å‘ä½¿ç”¨ï¼Œå¹¶å‘ä¿®æ”¹ã€‚</p><blockquote><p>å¹¶å‘ä¿®æ”¹ ï¼š å½“ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹æ­£åœ¨éå†ä¸€ä¸ªé›†åˆCollectionï¼Œæ­¤æ—¶å¦ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†è¿™ä¸ªé›†åˆçš„å†…å®¹ï¼ˆæ·»åŠ ï¼Œåˆ é™¤æˆ–è€…ä¿®æ”¹ï¼‰ã€‚è¿™å°±æ˜¯å¹¶å‘ä¿®æ”¹ ã€‚</p></blockquote><p>fail-safeæœºåˆ¶æœ‰ä¸¤ä¸ªé—®é¢˜</p><p>ï¼ˆ1ï¼‰éœ€è¦å¤åˆ¶é›†åˆï¼Œäº§ç”Ÿå¤§é‡çš„æ— æ•ˆå¯¹è±¡ï¼Œå¼€é”€å¤§ã€‚</p><p>ï¼ˆ2ï¼‰æ— æ³•ä¿è¯è¯»å–çš„æ•°æ®æ˜¯ç›®å‰åŸå§‹æ•°æ®ç»“æ„ä¸­çš„æ•°æ®ã€‚</p><h4 id="7-fail-fastå’Œ-fail-safe-çš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#7-fail-fastå’Œ-fail-safe-çš„åŒºåˆ«"></a> 7.  fail-fastå’Œ fail-safe çš„åŒºåˆ«</h4><table><thead><tr><th></th><th style="text-align:center">Fail Fast Iterator</th><th>Fail Safe Iterator</th></tr></thead><tbody><tr><td>Throw ConcurrentModification Exception</td><td style="text-align:center">Yes</td><td>No</td></tr><tr><td>Clone object</td><td style="text-align:center">No</td><td>Yes</td></tr><tr><td>Memory Overhead</td><td style="text-align:center">No</td><td>Yes</td></tr><tr><td>Examples</td><td style="text-align:center">HashMap,Vector,ArrayList,HashSet</td><td>CopyOnWriteArrayList, ConcurrentHashMap</td></tr></tbody></table><hr><h3 id="äºŒ-vector"><a class="markdownIt-Anchor" href="#äºŒ-vector"></a> äºŒã€ Vector</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Vector</span>&lt;<span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">extends</span> <span class="title">AbstractList</span>&lt;<span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">List</span>&lt;<span class="title">E</span>&gt;, <span class="title">RandomAccess</span>, <span class="title">Cloneable</span>, <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span></span></span><br></pre></td></tr></table></figure></div><p>ä¹Ÿç»§æ‰¿äº†RandomAccessæ¥å£ï¼Œ å¯ä»¥éšæœºè®¿é—®ã€‚</p><h4 id="1-åŒæ­¥"><a class="markdownIt-Anchor" href="#1-åŒæ­¥"></a> 1. åŒæ­¥</h4><pre><code>**å®ƒçš„å®ç°ä¸ ArrayList ç±»ä¼¼ï¼Œä½†æ˜¯ä½¿ç”¨äº† `synchronized` è¿›è¡ŒåŒæ­¥ã€‚**</code></pre><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    modCount++;</span><br><span class="line">    ensureCapacityHelper(elementCount + <span class="number">1</span>);</span><br><span class="line">    elementData[elementCount++] = e;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> E <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (index &gt;= elementCount)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ArrayIndexOutOfBoundsException(index);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> elementData(index);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h4 id="2-æ‰©å®¹-2"><a class="markdownIt-Anchor" href="#2-æ‰©å®¹-2"></a> 2 . æ‰©å®¹</h4><p>â€‹Vector çš„æ„é€ å‡½æ•°å¯ä»¥ä¼ å…¥ <code>capacityIncrement</code> å‚æ•°ï¼Œå®ƒçš„ä½œç”¨æ˜¯åœ¨æ‰©å®¹æ—¶ä½¿å®¹é‡ <code>capacity</code> å¢é•¿ <code>capacityIncrement</code>ã€‚å¦‚æœè¿™ä¸ªå‚æ•°çš„å€¼å°äºç­‰äº 0ï¼Œæ‰©å®¹æ—¶æ¯æ¬¡éƒ½ä»¤ <code>capacity</code> ä¸ºåŸæ¥çš„ä¸¤å€ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Constructs an empty vector with the specified initial capacity and</span></span><br><span class="line"><span class="comment">    * capacity increment. æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span>   initialCapacity     æ•°ç»„çš„åˆå§‹å®¹é‡</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span>   capacityIncrement   æ‰©å®¹æ—¶ä½¿å®¹é‡ `capacity` å¢é•¿ `capacityIncrement`</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@throws</span> IllegalArgumentException if the specified initial capacity</span></span><br><span class="line"><span class="comment">    *         is negative</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Vector</span><span class="params">(<span class="keyword">int</span> initialCapacity, <span class="keyword">int</span> capacityIncrement)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">super</span>();</span><br><span class="line">       <span class="keyword">if</span> (initialCapacity &lt; <span class="number">0</span>)</span><br><span class="line">           <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Illegal Capacity: "</span>+</span><br><span class="line">                                              initialCapacity);</span><br><span class="line">       <span class="keyword">this</span>.elementData = <span class="keyword">new</span> Object[initialCapacity];</span><br><span class="line">       <span class="keyword">this</span>.capacityIncrement = capacityIncrement;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">grow</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// overflow-conscious code</span></span><br><span class="line">        <span class="keyword">int</span> oldCapacity = elementData.length;</span><br><span class="line">    <span class="comment">// å¦‚æœè¿™ä¸ªå‚æ•°çš„å€¼å°äºç­‰äº 0ï¼Œæ‰©å®¹æ—¶æ¯æ¬¡éƒ½ä»¤ capacity ä¸ºåŸæ¥çš„ä¸¤å€ã€‚</span></span><br><span class="line">        <span class="keyword">int</span> newCapacity = oldCapacity + ((capacityIncrement &gt; <span class="number">0</span>) ?</span><br><span class="line">                                         capacityIncrement : oldCapacity);</span><br><span class="line">        <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">            newCapacity = minCapacity;</span><br><span class="line">        <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">            newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">        elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div><p>â€‹è°ƒç”¨æ²¡æœ‰ <code>capacityIncrement</code> çš„æ„é€ å‡½æ•°æ—¶ï¼Œ<code>capacityIncrement</code> å€¼è¢«è®¾ç½®ä¸º 0ï¼Œä¹Ÿå°±æ˜¯è¯´é»˜è®¤æƒ…å†µä¸‹ Vector æ¯æ¬¡æ‰©å®¹æ—¶å®¹é‡éƒ½ä¼šç¿»å€ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Vector</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>(initialCapacity, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Vector</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>(<span class="number">10</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h4 id="3-ä¸arraylistçš„æ¯”è¾ƒ"><a class="markdownIt-Anchor" href="#3-ä¸arraylistçš„æ¯”è¾ƒ"></a> 3. ä¸ArrayListçš„æ¯”è¾ƒ</h4><ul><li>Vector æ˜¯åŒæ­¥çš„ï¼Œå› æ­¤å¼€é”€å°±æ¯” ArrayList è¦å¤§ï¼Œè®¿é—®é€Ÿåº¦æ›´æ…¢ã€‚æœ€å¥½ä½¿ç”¨ ArrayList è€Œä¸æ˜¯ Vectorï¼Œå› ä¸ºåŒæ­¥æ“ä½œå®Œå…¨å¯ä»¥ç”±ç¨‹åºå‘˜è‡ªå·±æ¥æ§åˆ¶ï¼›</li><li>Vector æ¯æ¬¡æ‰©å®¹è¯·æ±‚å…¶å¤§å°çš„ 2 å€ï¼ˆä¹Ÿå¯ä»¥é€šè¿‡æ„é€ å‡½æ•°è®¾ç½®å¢é•¿çš„å®¹é‡ï¼‰ï¼Œè€Œ ArrayList æ˜¯ 1.5 å€ã€‚</li></ul><h4 id="4-æ›¿ä»£æ–¹æ¡ˆ"><a class="markdownIt-Anchor" href="#4-æ›¿ä»£æ–¹æ¡ˆ"></a> 4. æ›¿ä»£æ–¹æ¡ˆ</h4><p>å¯ä»¥ä½¿ç”¨ <code>Collections.synchronizedList();</code> å¾—åˆ°ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„ ArrayListã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">List&lt;String&gt; synList &#x3D; Collections.synchronizedList(list);</span><br></pre></td></tr></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public static &lt;T&gt; List&lt;T&gt; synchronizedList(List&lt;T&gt; list) &#123;</span><br><span class="line">       return (list instanceof RandomAccess ?</span><br><span class="line">               new SynchronizedRandomAccessList&lt;&gt;(list) :</span><br><span class="line">               new SynchronizedList&lt;&gt;(list));</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   static &lt;T&gt; List&lt;T&gt; synchronizedList(List&lt;T&gt; list, Object mutex) &#123;</span><br><span class="line">       return (list instanceof RandomAccess ?</span><br><span class="line">               new SynchronizedRandomAccessList&lt;&gt;(list, mutex) :</span><br><span class="line">               new SynchronizedList&lt;&gt;(list, mutex));</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></div><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>concurrent</code> å¹¶å‘åŒ…ä¸‹çš„ <code>CopyOnWriteArrayList</code> ç±»ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> CopyOnWriteArrayList&lt;&gt;();</span><br></pre></td></tr></table></figure></div><hr><h3 id="ä¸‰-copyonwritearraylist"><a class="markdownIt-Anchor" href="#ä¸‰-copyonwritearraylist"></a> ä¸‰ã€ CopyOnWriteArrayList</h3><h4 id="1-è¯»å†™åˆ†ç¦»"><a class="markdownIt-Anchor" href="#1-è¯»å†™åˆ†ç¦»"></a> 1. è¯»å†™åˆ†ç¦»</h4><p>å†™æ“ä½œåœ¨ä¸€ä¸ªå¤åˆ¶çš„æ•°ç»„ä¸Šè¿›è¡Œï¼Œè¯»æ“ä½œè¿˜æ˜¯åœ¨åŸå§‹æ•°ç»„ä¸­è¿›è¡Œï¼Œè¯»å†™åˆ†ç¦»ï¼Œäº’ä¸å½±å“ã€‚</p><p>å†™æ“ä½œéœ€è¦åŠ é”ï¼Œé˜²æ­¢å¹¶å‘å†™å…¥æ—¶å¯¼è‡´å†™å…¥æ•°æ®ä¸¢å¤±ã€‚</p><p>å†™æ“ä½œç»“æŸä¹‹åéœ€è¦æŠŠåŸå§‹æ•°ç»„æŒ‡å‘æ–°çš„å¤åˆ¶æ•°ç»„ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Appends the specified element to the end of this list.</span></span><br><span class="line"><span class="comment">     * æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼š å†™æ“ä½œ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> e element to be appended to this list</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> &#123;<span class="doctag">@code</span> true&#125; (as specified by &#123;<span class="doctag">@link</span> Collection#add&#125;)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> ReentrantLock lock = <span class="keyword">this</span>.lock;</span><br><span class="line">        lock.lock(); <span class="comment">// åŠ é”</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Object[] elements = getArray();</span><br><span class="line">            <span class="keyword">int</span> len = elements.length;</span><br><span class="line">            Object[] newElements = Arrays.copyOf(elements, len + <span class="number">1</span>);  <span class="comment">// å¤åˆ¶æ•°ç»„</span></span><br><span class="line">            newElements[len] = e;</span><br><span class="line">            setArray(newElements); <span class="comment">// å†™æ“ä½œç»“æŸä¹‹åéœ€è¦æŠŠåŸå§‹æ•°ç»„æŒ‡å‘æ–°çš„å¤åˆ¶æ•°ç»„ã€‚</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock(); <span class="comment">// å»é”æ“ä½œ</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">setArray</span><span class="params">(Object[] a)</span> </span>&#123;</span><br><span class="line">    array = a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line"><span class="function"><span class="keyword">private</span> E <span class="title">get</span><span class="params">(Object[] a, <span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (E) a[index];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h4 id="2-é€‚ç”¨åœºæ™¯"><a class="markdownIt-Anchor" href="#2-é€‚ç”¨åœºæ™¯"></a> 2. é€‚ç”¨åœºæ™¯</h4><p>â€‹<code>CopyOnWriteArrayList</code> åœ¨å†™æ“ä½œçš„åŒæ—¶å…è®¸è¯»æ“ä½œï¼Œå¤§å¤§æé«˜äº†è¯»æ“ä½œçš„æ€§èƒ½ï¼Œå› æ­¤å¾ˆé€‚åˆ<strong>è¯»å¤šå†™å°‘</strong>çš„åº”ç”¨åœºæ™¯ã€‚</p><p>â€‹ä½†æ˜¯ <code>CopyOnWriteArrayList</code> æœ‰å…¶ç¼ºé™·ï¼š</p><ul><li>å†…å­˜å ç”¨ï¼šåœ¨å†™æ“ä½œæ—¶éœ€è¦å¤åˆ¶ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œä½¿å¾—å†…å­˜å ç”¨ä¸ºåŸæ¥çš„ä¸¤å€å·¦å³ï¼›</li><li>æ•°æ®ä¸ä¸€è‡´ï¼šè¯»æ“ä½œä¸èƒ½è¯»å–å®æ—¶æ€§çš„æ•°æ®ï¼Œå› ä¸ºéƒ¨åˆ†å†™æ“ä½œçš„æ•°æ®è¿˜æœªåŒæ­¥åˆ°è¯»æ•°ç»„ä¸­ã€‚</li></ul><p>æ‰€ä»¥ <code>CopyOnWriteArrayList</code> ä¸é€‚åˆå†…å­˜æ•æ„Ÿä»¥åŠå¯¹å®æ—¶æ€§è¦æ±‚å¾ˆé«˜çš„åœºæ™¯ã€‚</p><hr><h3 id="å››-collections-ä¸-arrays"><a class="markdownIt-Anchor" href="#å››-collections-ä¸-arrays"></a> å››ã€ Collections ä¸ Arrays</h3><p>é›†åˆæ¡†æ¶ä¸­çš„å·¥å…·ç±»ä¸­çš„æ–¹æ³•éƒ½æ˜¯é™æ€çš„</p><p><strong>Collectionä¸­çš„å¸¸è§æ–¹æ³•ï¼š</strong></p><ol><li><p>å¯¹Listè¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼š int binarySearch(list, key)</p><p>â€‹ int binarySearch(list, key, Comparator)</p><p>â€‹äºŒåˆ†æŸ¥æ‰¾éœ€è¦åˆ—è¡¨æœ‰åº</p></li><li><p>å¯¹listé›†åˆè¿›è¡Œæ’åº</p><p>sort(list):  å…¶å®æ˜¯ä½¿ç”¨listå®¹å™¨ä¸­å¯¹è±¡çš„CompareToæ–¹æ³•</p><p>sort(list, comparator) //æŒ‰ç…§æŒ‡å®šæ¯”è¾ƒå™¨è¿›è¡Œæ’åº</p></li><li><p>å¯¹é›†åˆå–æœ€å¤§å€¼æˆ–è€…æœ€å°å€¼</p><p>â€‹maxï¼ˆcollectionï¼‰   minï¼ˆcollectionï¼‰</p></li><li><p>å¯¹é›†åˆè¿›è¡Œåè½¬</p><p>â€‹reverse(list)</p></li><li><p>å¯¹æ¯”è¾ƒæ–¹å¼å¼ºè¡Œé€†è½¬</p><p>â€‹Comparator reverseOrder();</p><p>â€‹Comparator reverseOrder(Comparator);</p></li><li><p>å¯¹listä¸­çš„å…ƒç´ çš„ä½ç½®è¿›è¡Œæ›¿æ¢</p><p>â€‹swap(list, x, y);</p></li><li><p>å¯¹é›†åˆä¸­çš„å…ƒç´ è¿›è¡Œæ›¿æ¢ï¼Œ å¦‚æœè¢«æ›¿æ¢çš„å…ƒç´ ä¸å­˜åœ¨ï¼Œ é‚£ä¹ˆåŸæ¥çš„é›†åˆä¸å˜</p><p>â€‹replaceAll(list, old, new);</p></li><li><p>å°†é›†åˆå˜æˆæ•°ç»„</p><p>â€‹Collection.toArray()  ã€collectionä¸æ˜¯Collectionså·¥å…·ç±»ã€‘</p></li></ol><p>Arraysï¼š ç”¨äºå¯¹æ•°ç»„æ“ä½œçš„å·¥å…·ç±»: Arrays.æ–¹æ³•()</p><ol><li><p>äºŒåˆ†æŸ¥æ‰¾ï¼Œ éœ€è¦æ•°ç»„æœ‰åº</p><p>binarySearch(int [])</p></li><li><p>æ•°ç»„æ’åº</p><p>sort(int [])</p></li><li><p>å°†æ•°ç»„å˜æˆå­—ç¬¦ä¸²</p></li></ol><p>toString(int [])</p><ol start="4"><li><p>å¤åˆ¶æ•°ç»„</p><p>â€‹copyOf()</p></li><li><p>å¤åˆ¶éƒ¨åˆ†æ•°ç»„</p><p>copyOfRange()</p></li><li><p>æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„æ˜¯å¦ç›¸åŒ</p><p>equals(int [], int [])</p></li><li><p><strong>å°†æ•°ç»„å˜æˆé›†åˆ</strong>ï¼š<br>List  asList(T [])</p><p>è¿™æ ·å¯ä»¥é€šè¿‡ç»“åˆçš„æ“ä½œæ¥æ“ä½œæ•°ç»„ä¸­çš„å…ƒç´ ï¼Œä½†æ˜¯ä¸å¯ä»¥æ­»ä½¿ç”¨å¢åˆ æ–¹æ³•ï¼Œ addï¼Œ removeï¼Œå› ä¸ºæ•°ç»„çš„é•¿åº¦å›ºå®šï¼Œä¼šå‡ºç°UnsupportOperationException.</p><hr></li></ol><h3 id="äº”-linkedlist"><a class="markdownIt-Anchor" href="#äº”-linkedlist"></a> äº”ã€ LinkedList</h3><h4 id="1-æ¦‚è§ˆ-2"><a class="markdownIt-Anchor" href="#1-æ¦‚è§ˆ-2"></a> 1. æ¦‚è§ˆ</h4><p>â€‹ åŸºäºåŒå‘é“¾è¡¨å®ç°ï¼Œä½¿ç”¨ Node å­˜å‚¨é“¾è¡¨èŠ‚ç‚¹ä¿¡æ¯ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedList</span>&lt;<span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">extends</span> <span class="title">AbstractSequentialList</span>&lt;<span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">List</span>&lt;<span class="title">E</span>&gt;, <span class="title">Deque</span>&lt;<span class="title">E</span>&gt;, <span class="title">Cloneable</span>, <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">transient</span> <span class="keyword">int</span> size = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Pointer to first node.</span></span><br><span class="line"><span class="comment">     * Invariant: (first == null &amp;&amp; last == null) ||</span></span><br><span class="line"><span class="comment">     *            (first.prev == null &amp;&amp; first.item != null)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">transient</span> Node&lt;E&gt; first;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Pointer to last node.</span></span><br><span class="line"><span class="comment">     * Invariant: (first == null &amp;&amp; last == null) ||</span></span><br><span class="line"><span class="comment">     *            (last.next == null &amp;&amp; last.item != null)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">transient</span> Node&lt;E&gt; last;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Constructs an empty list.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LinkedList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>æ¯ä¸ªé“¾è¡¨å­˜å‚¨äº†firstå’ŒlastæŒ‡é’ˆï¼Œç”¨Nodeæ¥ä¿å­˜é“¾è¡¨èŠ‚ç‚¹ä¿¡æ¯</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">        E item;</span><br><span class="line">        Node&lt;E&gt; next;</span><br><span class="line">        Node&lt;E&gt; prev;</span><br><span class="line"></span><br><span class="line">        Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123;</span><br><span class="line">            <span class="keyword">this</span>.item = element;</span><br><span class="line">            <span class="keyword">this</span>.next = next;</span><br><span class="line">            <span class="keyword">this</span>.prev = prev;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div><a href="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/1581314794535.png" data-fancybox="group" data-caption="1581314794535" class="fancybox"><img alt="1581314794535" style="zoom:80%;" align="center" data-src="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/1581314794535.png" class="lazyload" title="1581314794535"></a><h4 id="2ä¸arraylistçš„æ¯”è¾ƒ"><a class="markdownIt-Anchor" href="#2ä¸arraylistçš„æ¯”è¾ƒ"></a> 2.ä¸ArrayListçš„æ¯”è¾ƒ</h4><p>â€‹<code>ArrayList</code> åŸºäºåŠ¨æ€æ•°ç»„å®ç°ï¼Œ<code>LinkedList</code> åŸºäºåŒå‘é“¾è¡¨å®ç°ã€‚<code>ArrayList</code> å’Œ <code>LinkedList</code> çš„åŒºåˆ«å¯ä»¥å½’ç»“ä¸ºæ•°ç»„å’Œé“¾è¡¨çš„åŒºåˆ«ï¼š</p><ul><li>æ•°ç»„æ”¯æŒéšæœºè®¿é—®ï¼Œä½†æ’å…¥åˆ é™¤çš„ä»£ä»·å¾ˆé«˜ï¼Œéœ€è¦ç§»åŠ¨å¤§é‡å…ƒç´ ï¼›</li><li>é“¾è¡¨ä¸æ”¯æŒéšæœºè®¿é—®ï¼Œä½†æ’å…¥åˆ é™¤åªéœ€è¦æ”¹å˜æŒ‡é’ˆã€‚</li></ul><hr><h3 id="å…­-hashmap"><a class="markdownIt-Anchor" href="#å…­-hashmap"></a> å…­ã€ HashMap</h3><p>ä¸ºäº†ä¾¿äºç†è§£ï¼Œä»¥ä¸‹æºç åˆ†æä»¥ JDK 1.7 ä¸ºä¸»ã€‚</p><h4 id="1-å­˜å‚¨ç»“æ„"><a class="markdownIt-Anchor" href="#1-å­˜å‚¨ç»“æ„"></a> 1. å­˜å‚¨ç»“æ„</h4><p>å†…éƒ¨åŒ…å«äº†ä¸€ä¸ª <code>Entry</code> ç±»å‹çš„æ•°ç»„ <code>table</code>ã€‚<code>Entry</code> å­˜å‚¨ç€é”®å€¼å¯¹ã€‚å®ƒåŒ…å«äº†å››ä¸ªå­—æ®µï¼Œä» <code>next</code> å­—æ®µæˆ‘ä»¬å¯ä»¥çœ‹å‡º <code>Entry</code> æ˜¯ä¸€ä¸ªé“¾è¡¨ã€‚å³æ•°ç»„ä¸­çš„æ¯ä¸ªä½ç½®è¢«å½“æˆä¸€ä¸ªæ¡¶ï¼Œä¸€ä¸ªæ¡¶å­˜æ”¾ä¸€ä¸ªé“¾è¡¨ã€‚<code>HashMap</code> ä½¿ç”¨æ‹‰é“¾æ³•æ¥è§£å†³å†²çªï¼ŒåŒä¸€ä¸ªé“¾è¡¨ä¸­å­˜æ”¾å“ˆå¸Œå€¼å’Œæ•£åˆ—æ¡¶å–æ¨¡è¿ç®—ç»“æœç›¸åŒçš„ <code>Entry</code>ã€‚</p><a href="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/1581315156142.png" data-fancybox="group" data-caption="1581315156142" class="fancybox"><img alt="1581315156142" style="zoom:80%;" align="center" data-src="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/1581315156142.png" class="lazyload" title="1581315156142"></a><p>ä»¥ä¸‹æºç åŸºäºJDK1.7</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">transient</span> Entry[] table;</span><br></pre></td></tr></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>.<span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> K key;</span><br><span class="line">    V value;</span><br><span class="line">    Entry&lt;K,V&gt; next;</span><br><span class="line">    <span class="keyword">int</span> hash;</span><br><span class="line"></span><br><span class="line">    Entry(<span class="keyword">int</span> h, K k, V v, Entry&lt;K,V&gt; n) &#123;</span><br><span class="line">        value = v;</span><br><span class="line">        next = n;</span><br><span class="line">        key = k;</span><br><span class="line">        hash = h;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> K <span class="title">getKey</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> key;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> V <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> V <span class="title">setValue</span><span class="params">(V newValue)</span> </span>&#123;</span><br><span class="line">        V oldValue = value;</span><br><span class="line">        value = newValue;</span><br><span class="line">        <span class="keyword">return</span> oldValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!(o <span class="keyword">instanceof</span> Map.Entry))</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        Map.Entry e = (Map.Entry)o;</span><br><span class="line">        Object k1 = getKey();</span><br><span class="line">        Object k2 = e.getKey();</span><br><span class="line">        <span class="keyword">if</span> (k1 == k2 || (k1 != <span class="keyword">null</span> &amp;&amp; k1.equals(k2))) &#123;</span><br><span class="line">            Object v1 = getValue();</span><br><span class="line">            Object v2 = e.getValue();</span><br><span class="line">            <span class="keyword">if</span> (v1 == v2 || (v1 != <span class="keyword">null</span> &amp;&amp; v1.equals(v2)))</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Objects.hashCode(getKey()) ^ Objects.hashCode(getValue());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getKey() + <span class="string">"="</span> + getValue();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>â€‹HashMapä¸­ä¸¤ä¸ªå‚æ•°ä¼šå½±å“ä»–çš„æ€§èƒ½ï¼šåˆå§‹å®¹é‡å’Œè£…è½½å› å­ã€‚åˆå§‹å®¹é‡æ˜¯æŒ‡å“ˆå¸Œè¡¨ä¸­æ¡¶çš„ä¸ªæ•°ï¼Œå³å“ˆå¸Œè¡¨çš„å¤§å°ï¼› è£…è½½å› å­æ˜¯è¡¨ç¤ºhashè¡¨ä¸­å…ƒç´ çš„å¡«æ»¡çš„ç¨‹åº¦ï¼Œè£… è½½å› å­è¶Šå¤§ï¼Œå¡«æ»¡çš„å…ƒç´ è¶Šå¤šï¼Œå¥½å¤„æ˜¯ï¼Œç©ºé—´åˆ©ç”¨ç‡é«˜äº†ï¼Œä½†å†²çªçš„æœºä¼šåŠ å¤§äº†ï¼›åä¹‹ï¼ŒåŠ è½½å› å­è¶Šå°ï¼Œå¡«æ»¡çš„å…ƒç´ è¶Šå°‘ï¼Œå¥½å¤„æ˜¯å†²çªçš„æœºä¼šå‡å°äº†ï¼Œä½†ç©ºé—´æµªè´¹å¤šäº†ã€‚</p><p>â€‹å†²çªçš„æœºä¼šè¶Šå¤§ï¼Œåˆ™æŸ¥æ‰¾çš„æˆæœ¬è¶Šé«˜ã€‚åä¹‹ï¼ŒæŸ¥æ‰¾çš„æˆæœ¬è¶Šå°ï¼ŒæŸ¥æ‰¾æ—¶é—´å°±è¶Šå°ã€‚ å› æ­¤ï¼Œå¿…é¡»åœ¨ &quot;å†²çªçš„æœºä¼š&quot;ä¸&quot;ç©ºé—´åˆ©ç”¨ç‡&quot;ä¹‹é—´å¯»æ‰¾ä¸€ç§å¹³è¡¡ä¸æŠ˜è¡·ï¼Œè¿™ç§å¹³è¡¡ä¸æŠ˜è¡·æœ¬è´¨ä¸Šæ˜¯æ•°æ®ç»“æ„ä¸­æœ‰åçš„**&quot;æ—¶-ç©º&quot;çŸ›ç›¾**çš„å¹³è¡¡ä¸æŠ˜è¡·ã€‚</p><p>â€‹HashMapé»˜è®¤çš„è£…è½½å› å­æ˜¯0.75ï¼Œæœ€å¤§å®¹é‡æ˜¯16ï¼Œå› æ­¤å¯ä»¥å¾—å‡ºHashMapçš„é»˜è®¤å®¹é‡æ˜¯ï¼š0.75*16=12ã€‚</p><p>ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æœ€å¤§å®¹é‡å’Œè£…è½½å› å­ã€‚</p><p>â€‹HashMap åŒ…å«å¦‚ä¸‹å‡ ä¸ªæ„é€ å™¨ï¼š</p><ul><li>HashMap()ï¼šæ„å»ºä¸€ä¸ªåˆå§‹å®¹é‡ä¸º 16ï¼Œè´Ÿè½½å› å­ä¸º 0.75 çš„ HashMapã€‚</li><li>HashMap(int initialCapacity)ï¼šæ„å»ºä¸€ä¸ªåˆå§‹å®¹é‡ä¸º initialCapacityï¼Œè´Ÿè½½å› å­ä¸º 0.75 çš„ HashMapã€‚</li><li>HashMap(int initialCapacity, float loadFactor)ï¼šä»¥æŒ‡å®šåˆå§‹å®¹é‡ã€æŒ‡å®šçš„è´Ÿè½½å› å­åˆ›å»ºä¸€ä¸ª HashMapã€‚</li></ul><h4 id="2-æ‹‰é“¾æ³•å·¥ä½œåŸç†"><a class="markdownIt-Anchor" href="#2-æ‹‰é“¾æ³•å·¥ä½œåŸç†"></a> 2. æ‹‰é“¾æ³•å·¥ä½œåŸç†</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">HashMap&lt;String, String&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">map.put(<span class="string">"K1"</span>, <span class="string">"V1"</span>);</span><br><span class="line">map.put(<span class="string">"K2"</span>, <span class="string">"V2"</span>);</span><br><span class="line">map.put(<span class="string">"K3"</span>, <span class="string">"V3"</span>);</span><br></pre></td></tr></table></figure></div><ul><li><p>æ–°å»ºä¸€ä¸ª HashMapï¼Œé»˜è®¤å¤§å°ä¸º 16ï¼›</p></li><li><p>æ’å…¥ &lt;K1,V1&gt; é”®å€¼å¯¹ï¼Œå…ˆè®¡ç®— K1 çš„ hashCode ä¸º 115ï¼Œä½¿ç”¨é™¤ç•™ä½™æ•°æ³•å¾—åˆ°æ‰€åœ¨çš„æ¡¶ä¸‹æ ‡ 115%16=3ã€‚</p></li><li><p>æ’å…¥ &lt;K2,V2&gt; é”®å€¼å¯¹ï¼Œå…ˆè®¡ç®— K2 çš„ hashCode ä¸º 118ï¼Œä½¿ç”¨é™¤ç•™ä½™æ•°æ³•å¾—åˆ°æ‰€åœ¨çš„æ¡¶ä¸‹æ ‡ 118%16=6ã€‚</p></li><li><p>æ’å…¥ &lt;K3,V3&gt; é”®å€¼å¯¹ï¼Œå…ˆè®¡ç®— K3 çš„ hashCode ä¸º 118ï¼Œä½¿ç”¨é™¤ç•™ä½™æ•°æ³•å¾—åˆ°æ‰€åœ¨çš„æ¡¶ä¸‹æ ‡ 118%16=6ï¼Œæ’åœ¨ &lt;K2,V2&gt; å‰é¢ã€‚</p><p>â€‹åº”è¯¥æ³¨æ„åˆ°é“¾è¡¨çš„æ’å…¥æ˜¯ä»¥<strong>å¤´æ’æ³•</strong>æ–¹å¼è¿›è¡Œçš„ï¼Œä¾‹å¦‚ä¸Šé¢çš„ &lt;K3,V3&gt; ä¸æ˜¯æ’åœ¨ &lt;K2,V2&gt; åé¢ï¼Œè€Œæ˜¯æ’å…¥åœ¨é“¾è¡¨å¤´éƒ¨ã€‚æŸ¥æ‰¾éœ€è¦åˆ†æˆä¸¤æ­¥è¿›è¡Œï¼š</p></li><li><p>è®¡ç®—é”®å€¼å¯¹æ‰€åœ¨çš„æ¡¶ï¼›</p></li><li><p>åœ¨é“¾è¡¨ä¸Šé¡ºåºæŸ¥æ‰¾ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¾ç„¶å’Œé“¾è¡¨çš„é•¿åº¦æˆæ­£æ¯”ã€‚</p></li></ul><a href="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/1581331248644.png" data-fancybox="group" data-caption="1581331248644" class="fancybox"><img alt="1581331248644" style="zoom:80%;" align="center" data-src="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/1581331248644.png" class="lazyload" title="1581331248644"></a><p>â€‹</p><h4 id="3-putæ“ä½œ"><a class="markdownIt-Anchor" href="#3-putæ“ä½œ"></a> 3. putæ“ä½œ</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (table == EMPTY_TABLE) &#123;</span><br><span class="line">        inflateTable(threshold);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// é”®ä¸º null å•ç‹¬å¤„ç†</span></span><br><span class="line">    <span class="keyword">if</span> (key == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> putForNullKey(value);</span><br><span class="line">    <span class="keyword">int</span> hash = hash(key);</span><br><span class="line">    <span class="comment">// ç¡®å®šæ¡¶ä¸‹æ ‡</span></span><br><span class="line">    <span class="keyword">int</span> i = indexFor(hash, table.length);</span><br><span class="line">    <span class="comment">// å…ˆæ‰¾å‡ºæ˜¯å¦å·²ç»å­˜åœ¨é”®ä¸º key çš„é”®å€¼å¯¹ï¼Œå¦‚æœå­˜åœ¨çš„è¯å°±æ›´æ–°è¿™ä¸ªé”®å€¼å¯¹çš„å€¼ä¸º value</span></span><br><span class="line">    <span class="keyword">for</span> (Entry&lt;K,V&gt; e = table[i]; e != <span class="keyword">null</span>; e = e.next) &#123;</span><br><span class="line">        Object k;</span><br><span class="line">        <span class="keyword">if</span> (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) &#123;</span><br><span class="line">            V oldValue = e.value;</span><br><span class="line">            e.value = value;</span><br><span class="line">            e.recordAccess(<span class="keyword">this</span>);</span><br><span class="line">            <span class="keyword">return</span> oldValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="comment">// æ’å…¥æ–°é”®å€¼å¯¹</span></span><br><span class="line">    addEntry(hash, key, value, i);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>HashMap å…è®¸æ’å…¥é”®ä¸º null çš„é”®å€¼å¯¹ã€‚ä½†æ˜¯å› ä¸ºæ— æ³•è°ƒç”¨ null çš„ hashCode() æ–¹æ³•ï¼Œä¹Ÿå°±æ— æ³•ç¡®å®šè¯¥é”®å€¼å¯¹çš„æ¡¶ä¸‹æ ‡ï¼Œåªèƒ½é€šè¿‡å¼ºåˆ¶æŒ‡å®šä¸€ä¸ªæ¡¶ä¸‹æ ‡æ¥å­˜æ”¾ã€‚HashMap ä½¿ç”¨ç¬¬ 0 ä¸ªæ¡¶å­˜æ”¾é”®ä¸º null çš„é”®å€¼å¯¹ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> V <span class="title">putForNullKey</span><span class="params">(V value)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (Entry&lt;K,V&gt; e = table[<span class="number">0</span>]; e != <span class="keyword">null</span>; e = e.next) &#123;</span><br><span class="line">        <span class="keyword">if</span> (e.key == <span class="keyword">null</span>) &#123;</span><br><span class="line">            V oldValue = e.value;</span><br><span class="line">            e.value = value;</span><br><span class="line">            e.recordAccess(<span class="keyword">this</span>);</span><br><span class="line">            <span class="keyword">return</span> oldValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    modCount++;</span><br><span class="line">    addEntry(<span class="number">0</span>, <span class="keyword">null</span>, value, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>â€‹ ä½¿ç”¨é“¾è¡¨çš„å¤´æ’æ³•ï¼Œä¹Ÿå°±æ˜¯æ–°çš„é”®å€¼å¯¹æ’åœ¨é“¾è¡¨çš„å¤´éƒ¨ï¼Œè€Œä¸æ˜¯é“¾è¡¨çš„å°¾éƒ¨ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addEntry</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">int</span> bucketIndex)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ((size &gt;= threshold) &amp;&amp; (<span class="keyword">null</span> != table[bucketIndex])) &#123;</span><br><span class="line">        resize(<span class="number">2</span> * table.length);</span><br><span class="line">        hash = (<span class="keyword">null</span> != key) ? hash(key) : <span class="number">0</span>;</span><br><span class="line">        bucketIndex = indexFor(hash, table.length);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    createEntry(hash, key, value, bucketIndex);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">createEntry</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">int</span> bucketIndex)</span> </span>&#123;</span><br><span class="line">    Entry&lt;K,V&gt; e = table[bucketIndex];</span><br><span class="line">    <span class="comment">// å¤´æ’æ³•ï¼Œé“¾è¡¨å¤´éƒ¨æŒ‡å‘æ–°çš„é”®å€¼å¯¹</span></span><br><span class="line">    table[bucketIndex] = <span class="keyword">new</span> Entry&lt;&gt;(hash, key, value, e);</span><br><span class="line">    size++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Entry(int h, K k, V v, Entry&lt;K,V&gt; n) &#123;</span><br><span class="line">    value &#x3D; v;</span><br><span class="line">    next &#x3D; n;</span><br><span class="line">    key &#x3D; k;</span><br><span class="line">    hash &#x3D; h;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h5 id="åœ¨jdk18ä¸­çš„putæ“ä½œ"><a class="markdownIt-Anchor" href="#åœ¨jdk18ä¸­çš„putæ“ä½œ"></a> <strong>åœ¨JDK1.8ä¸­çš„putæ“ä½œï¼š</strong></h5> <a href="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/58e67eae921e4b431782c07444af824e_hd.png" data-fancybox="group" data-caption="img" class="fancybox"><img alt="img" style="zoom:80%;" align="center" data-src="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/58e67eae921e4b431782c07444af824e_hd.png" class="lazyload" title="img"></a> <p>æ€è·¯å¦‚ä¸‹ï¼š</p><p>1.table[]æ˜¯å¦ä¸ºç©º</p><p>2.åˆ¤æ–­table[i]å¤„æ˜¯å¦æ’å…¥è¿‡å€¼</p><p>3.åˆ¤æ–­é“¾è¡¨é•¿åº¦æ˜¯å¦å¤§äº8ï¼Œå¦‚æœå¤§äºå°±è½¬æ¢ä¸º<strong>çº¢é»‘äºŒå‰æ ‘</strong>ï¼Œå¹¶æ’å…¥æ ‘ä¸­</p><p>4.åˆ¤æ–­keyæ˜¯å¦å’ŒåŸæœ‰keyç›¸åŒï¼Œå¦‚æœç›¸åŒå°±è¦†ç›–åŸæœ‰keyçš„valueï¼Œå¹¶è¿”å›åŸæœ‰value</p><p>5.å¦‚æœkeyä¸ç›¸åŒï¼Œå°±æ’å…¥ä¸€ä¸ªkeyï¼Œè®°å½•ç»“æ„å˜åŒ–ä¸€æ¬¡</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Implements Map.put and related methods</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> hash hash for key</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> key the key</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> value the value to put</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> onlyIfAbsent if true, don't change existing value</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> evict if false, the table is in creation mode.</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span> previous value, or null if none</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">final</span> V <span class="title">putVal</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">boolean</span> onlyIfAbsent,</span></span></span><br><span class="line"><span class="function"><span class="params">                  <span class="keyword">boolean</span> evict)</span> </span>&#123;</span><br><span class="line">       Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="keyword">int</span> n, i;</span><br><span class="line">       <span class="comment">//åˆ¤æ–­tableæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœæ˜¯ç©ºçš„å°±åˆ›å»ºä¸€ä¸ªtableï¼Œå¹¶è·å–ä»–çš„é•¿åº¦</span></span><br><span class="line">       <span class="keyword">if</span> ((tab = table) == <span class="keyword">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">           n = (tab = resize()).length;</span><br><span class="line">       <span class="comment">//å¦‚æœè®¡ç®—å‡ºæ¥çš„ç´¢å¼•ä½ç½®ä¹‹å‰æ²¡æœ‰æ”¾è¿‡æ•°æ®ï¼Œå°±ç›´æ¥æ”¾å…¥</span></span><br><span class="line">       <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="keyword">null</span>)</span><br><span class="line">           tab[i] = newNode(hash, key, value, <span class="keyword">null</span>);</span><br><span class="line">       <span class="keyword">else</span> &#123;  <span class="comment">//è¿›å…¥è¿™é‡Œè¯´æ˜ç´¢å¼•ä½ç½®å·²ç»æ”¾å…¥è¿‡æ•°æ®äº†</span></span><br><span class="line">           Node&lt;K,V&gt; e; K k;</span><br><span class="line">            <span class="comment">//åˆ¤æ–­putçš„æ•°æ®å’Œä¹‹å‰çš„æ•°æ®æ˜¯å¦é‡å¤</span></span><br><span class="line">             <span class="comment">//keyçš„åœ°å€æˆ–keyçš„equals()åªè¦æœ‰ä¸€ä¸ªç›¸ç­‰å°±è®¤ä¸ºkeyé‡å¤äº†ï¼Œå°±ç›´æ¥è¦†ç›–åŸæ¥keyçš„value</span></span><br><span class="line">           <span class="keyword">if</span> (p.hash == hash &amp;&amp;</span><br><span class="line">               ((k = p.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">               e = p;</span><br><span class="line">           <span class="keyword">else</span> <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode) <span class="comment">//åˆ¤æ–­æ˜¯å¦æ˜¯çº¢é»‘æ ‘ï¼Œå¦‚æœæ˜¯çº¢é»‘æ ‘å°±ç›´æ¥æ’å…¥æ ‘ä¸­</span></span><br><span class="line">               e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class="keyword">this</span>, tab, hash, key, value);</span><br><span class="line">           <span class="keyword">else</span> &#123; <span class="comment">//å¦‚æœä¸æ˜¯çº¢é»‘æ ‘ï¼Œå°±éå†æ¯ä¸ªèŠ‚ç‚¹ï¼Œåˆ¤æ–­é“¾è¡¨é•¿åº¦æ˜¯å¦å¤§äº8ï¼Œå¦‚æœå¤§äºå°±è½¬æ¢ä¸ºçº¢é»‘æ ‘</span></span><br><span class="line">               <span class="keyword">for</span> (<span class="keyword">int</span> binCount = <span class="number">0</span>; ; ++binCount) &#123;</span><br><span class="line">                   <span class="keyword">if</span> ((e = p.next) == <span class="keyword">null</span>) &#123;</span><br><span class="line">                       p.next = newNode(hash, key, value, <span class="keyword">null</span>);</span><br><span class="line">                       <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="number">1</span>) <span class="comment">// -1 for 1st</span></span><br><span class="line">                           treeifyBin(tab, hash); <span class="comment">// è½¬æ¢ä¸ºçº¢é»‘æ ‘</span></span><br><span class="line">                       <span class="keyword">break</span>;</span><br><span class="line">                   &#125;</span><br><span class="line">                    <span class="comment">// åˆ¤æ–­ç´¢å¼•æ¯ä¸ªå…ƒç´ çš„keyæ˜¯å¦å¯è¦æ’å…¥çš„keyç›¸åŒï¼Œå¦‚æœç›¸åŒå°±ç›´æ¥è¦†ç›–</span></span><br><span class="line">                   <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                       ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                       <span class="keyword">break</span>;</span><br><span class="line">                   p = e;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="comment">//å¦‚æœeä¸æ˜¯nullï¼Œè¯´æ˜æ²¡æœ‰è¿­ä»£åˆ°æœ€åå°±è·³å‡ºäº†å¾ªç¯ï¼Œè¯´æ˜é“¾è¡¨ä¸­æœ‰ç›¸åŒçš„keyï¼Œå› æ­¤åªéœ€è¦å°†valueè¦†ç›–ï¼Œå¹¶å°†oldValueè¿”å›å³å¯</span></span><br><span class="line">           <span class="keyword">if</span> (e != <span class="keyword">null</span>) &#123; <span class="comment">// existing mapping for key</span></span><br><span class="line">               V oldValue = e.value;</span><br><span class="line">               <span class="keyword">if</span> (!onlyIfAbsent || oldValue == <span class="keyword">null</span>)</span><br><span class="line">                   e.value = value;</span><br><span class="line">               afterNodeAccess(e);</span><br><span class="line">               <span class="keyword">return</span> oldValue;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//è¯´æ˜æ²¡æœ‰keyç›¸åŒï¼Œå› æ­¤è¦æ’å…¥ä¸€ä¸ªkey-valueï¼Œå¹¶è®°å½•å†…éƒ¨ç»“æ„å˜åŒ–æ¬¡æ•°</span></span><br><span class="line">       ++modCount;</span><br><span class="line">       <span class="keyword">if</span> (++size &gt; threshold) <span class="comment">// æ‰©å®¹</span></span><br><span class="line">           resize();</span><br><span class="line">       afterNodeInsertion(evict); <span class="comment">// è¿™ä¸ªæ˜¯ç»™LinkedHashMapç”¨çš„ï¼ŒHashMapé‡Œä¹Ÿæ˜¯ä¸ªç©ºå®ç°</span></span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">null</span>; <span class="comment">// æ·»åŠ æˆåŠŸè¿”å›null</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></div><h5 id="getæ–¹æ³•"><a class="markdownIt-Anchor" href="#getæ–¹æ³•"></a> getæ–¹æ³•</h5><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">        Node&lt;K,V&gt; e;</span><br><span class="line">        <span class="keyword">return</span> (e = getNode(hash(key), key)) == <span class="keyword">null</span> ? <span class="keyword">null</span> : e.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Implements Map.get and related methods</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> hash hash for key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key the key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the node, or null if none</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">final</span> Node&lt;K,V&gt; <span class="title">getNode</span><span class="params">(<span class="keyword">int</span> hash, Object key)</span> </span>&#123;</span><br><span class="line">        Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; <span class="keyword">int</span> n; K k;</span><br><span class="line">        <span class="keyword">if</span> ((tab = table) != <span class="keyword">null</span> &amp;&amp; (n = tab.length) &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">            (first = tab[(n - <span class="number">1</span>) &amp; hash]) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (first.hash == hash &amp;&amp; <span class="comment">// always check first node</span></span><br><span class="line">                ((k = first.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                <span class="keyword">return</span> first;</span><br><span class="line">            <span class="keyword">if</span> ((e = first.next) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (first <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                    <span class="keyword">return</span> ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);</span><br><span class="line">                <span class="keyword">do</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                        ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                        <span class="keyword">return</span> e;</span><br><span class="line">                &#125; <span class="keyword">while</span> ((e = e.next) != <span class="keyword">null</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div><h4 id="4-ç¡®å®šæ¡¶ä¸‹æ ‡"><a class="markdownIt-Anchor" href="#4-ç¡®å®šæ¡¶ä¸‹æ ‡"></a> 4. ç¡®å®šæ¡¶ä¸‹æ ‡</h4><p>å¾ˆå¤šæ“ä½œéƒ½éœ€è¦å…ˆç¡®å®šä¸€ä¸ªé”®å€¼å¯¹æ‰€åœ¨çš„æ¡¶ä¸‹æ ‡ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> hash = hash(key);</span><br><span class="line"><span class="keyword">int</span> i = indexFor(hash, table.length);</span><br></pre></td></tr></table></figure></div><h5 id="41-è®¡ç®—-hash-å€¼17"><a class="markdownIt-Anchor" href="#41-è®¡ç®—-hash-å€¼17"></a> 4.1  è®¡ç®— hash å€¼ï¼ˆ1.7ï¼‰</h5><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Object k)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> h = hashSeed;</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">0</span> != h &amp;&amp; k <span class="keyword">instanceof</span> String) &#123;</span><br><span class="line">        <span class="keyword">return</span> sun.misc.Hashing.stringHash32((String) k);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    h ^= k.hashCode();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// This function ensures that hashCodes that differ only by</span></span><br><span class="line">    <span class="comment">// constant multiples at each bit position have a bounded</span></span><br><span class="line">    <span class="comment">// number of collisions (approximately 8 at default load factor).</span></span><br><span class="line">    h ^= (h &gt;&gt;&gt; <span class="number">20</span>) ^ (h &gt;&gt;&gt; <span class="number">12</span>);</span><br><span class="line">    <span class="keyword">return</span> h ^ (h &gt;&gt;&gt; <span class="number">7</span>) ^ (h &gt;&gt;&gt; <span class="number">4</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Objects.hashCode(key) ^ Objects.hashCode(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h5 id="42-å–æ¨¡"><a class="markdownIt-Anchor" href="#42-å–æ¨¡"></a> <strong>4.2  å–æ¨¡</strong></h5><p>ä»¤ x = 1&lt;&lt;4ï¼Œå³ x ä¸º 2 çš„ 4 æ¬¡æ–¹ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹æ€§è´¨ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x   : <span class="number">00010000</span></span><br><span class="line">x<span class="number">-1</span> : <span class="number">00001111</span></span><br></pre></td></tr></table></figure></div><p>ä»¤ä¸€ä¸ªæ•° y ä¸ x-1 åšä¸è¿ç®—ï¼Œå¯ä»¥å»é™¤ y ä½çº§è¡¨ç¤ºçš„ç¬¬ 4 ä½ä»¥ä¸Šæ•°ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">y       : <span class="number">10110010</span></span><br><span class="line">x-<span class="number">1</span>     : <span class="number">00001111</span></span><br><span class="line">y&amp;(x-<span class="number">1</span>) : <span class="number">00000010</span></span><br></pre></td></tr></table></figure></div><p>è¿™ä¸ªæ€§è´¨å’Œ y å¯¹ x å–æ¨¡æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">y   : <span class="number">10110010</span></span><br><span class="line">x   : <span class="number">00010000</span></span><br><span class="line">y%x : <span class="number">00000010</span></span><br></pre></td></tr></table></figure></div><p>æˆ‘ä»¬çŸ¥é“ï¼Œä½è¿ç®—çš„ä»£ä»·æ¯”æ±‚æ¨¡è¿ç®—å°çš„å¤šï¼Œå› æ­¤åœ¨è¿›è¡Œè¿™ç§è®¡ç®—æ—¶ç”¨ä½è¿ç®—çš„è¯èƒ½å¸¦æ¥æ›´é«˜çš„æ€§èƒ½ã€‚</p><p>ç¡®å®šæ¡¶ä¸‹æ ‡çš„æœ€åä¸€æ­¥æ˜¯å°† key çš„ hash å€¼å¯¹æ¡¶ä¸ªæ•°å–æ¨¡ï¼šhash%capacityï¼Œå¦‚æœèƒ½ä¿è¯ capacity ä¸º 2 çš„ n æ¬¡æ–¹ï¼Œé‚£ä¹ˆå°±å¯ä»¥å°†è¿™ä¸ªæ“ä½œè½¬æ¢ä¸ºä½è¿ç®—ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">indexFor</span><span class="params">(<span class="keyword">int</span> h, <span class="keyword">int</span> length)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> h &amp; (length-<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h5 id="44-åœ¨jdk18ä¸­çš„hashæ–¹æ³•"><a class="markdownIt-Anchor" href="#44-åœ¨jdk18ä¸­çš„hashæ–¹æ³•"></a> 4.4 åœ¨JDK1.8ä¸­çš„hashæ–¹æ³•</h5><p><code>hash()</code>æ–¹æ³•å…¶å®é¡¾åæ€ä¹‰å°±æ˜¯ç”¨æ¥è·å–keyçš„hashçš„ä¸€ä¸ªhashå€¼çš„,ä½†æ˜¯HashMapé‡Œçš„hash()æ–¹æ³•ä¼¼ä¹ä¸ä¸€èˆ¬çš„ç›´æ¥key.hashCode()ä¸å¤ªä¸€æ ·ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹å®ƒåˆ°åº•æ˜¯ä»€ä¹ˆæ ·çš„ç¥å¥‡æ“ä½œã€‚ å…¶æºç å¦‚ä¸‹:</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> h;  </span><br><span class="line">    <span class="comment">// keyæ˜¯nullå°±è¿”å›0ï¼Œkeyä¸æ˜¯nullå°±å…ˆå–hashCodeï¼ˆï¼‰ç„¶åä¸è¿™ä¸ªhashCodeï¼ˆï¼‰æ— ç¬¦å·å³ç§»è¿›è¡Œäº¦æˆ–è¿ç®—</span></span><br><span class="line">    <span class="keyword">return</span> (key == <span class="keyword">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>); <span class="comment">// å°†hashCodeçš„å€¼å¼‚æˆ–ä»–çš„é«˜16ä½è·å–åˆ°hashå€¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>â€‹è¿™æ˜¯å› ä¸ºæ‰¾keyçš„ä½ç½®æ—¶ï¼Œ<code>(n - 1) &amp; hash</code>æ˜¯tableçš„ç´¢å¼•ï¼Œnçš„é•¿åº¦ä¸å¤Ÿå¤§æ—¶ï¼Œåªå’ŒhashCode()çš„ä½16ä½æœ‰å…³ï¼Œè¿™æ ·å‘ç”Ÿå†²çªçš„æ¦‚ç‡å°±å˜é«˜</p><p>â€‹ä¸ºå‡å°‘è¿™ç§å½±å“ï¼Œè®¾è®¡è€…æƒè¡¡äº†speed, utility, and qualityï¼Œå°†é«˜16ä½ä¸ä½16ä½å¼‚æˆ–æ¥å‡å°‘è¿™ç§å½±å“ã€‚è®¾è®¡è€…è€ƒè™‘åˆ°ç°åœ¨çš„hashCodeåˆ†å¸ƒçš„å·²ç»å¾ˆä¸é”™äº†ï¼Œè€Œä¸”å½“å‘ç”Ÿè¾ƒå¤§ç¢°æ’æ—¶ä¹Ÿç”¨æ ‘å½¢å­˜å‚¨é™ä½äº†å†²çªã€‚ä»…ä»…å¼‚æˆ–ä¸€ä¸‹ï¼Œæ—¢å‡å°‘äº†ç³»ç»Ÿçš„å¼€é”€ï¼Œä¹Ÿä¸ä¼šé€ æˆçš„å› ä¸ºé«˜16ä½æ²¡æœ‰å‚ä¸ä¸‹æ ‡çš„è®¡ç®—(tableé•¿åº¦æ¯”è¾ƒå°æ—¶)è€Œå¼•èµ·çš„ç¢°æ’ã€‚</p><p>â€‹ æˆ‘ä»¬çŸ¥é“hashCodeæœ¬èº«æ˜¯ä¸€ä¸ª32ä½çš„intç±»å‹ï¼Œè¿›è¡Œè¿™æ ·çš„æ“ä½œå°±ç­‰äºå°†hashCodeçš„é«˜16ä½å¼‚æˆ–å®ƒçš„ä½16ä½å¾—åˆ°ä¸€ä¸ªæ–°çš„hashå€¼ã€‚</p> <a href="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/8e8203c1b51be6446cda4026eaaccf19_hd.png" data-fancybox="group" data-caption="img" class="fancybox"><img alt="img" style="zoom:80%;" align="center" data-src="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/8e8203c1b51be6446cda4026eaaccf19_hd.png" class="lazyload" title="img"></a>  <p>ä½†æ˜¯æ‹¿åˆ°è¿™æ ·ä¸€ä¸ªhashå€¼çš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å…ˆæƒ³ä¸€ä¸‹å¦‚ä½•åˆ©ç”¨keyçš„hashå€¼ç¡®å®šæ¯ä¸ªkeyçš„å“ˆå¸Œæ¡¶ç´¢å¼•ä½ç½®è€Œä¸”è¿˜éœ€è¦å°½é‡å‡è¡¡ã€‚ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„å½“ç„¶æ˜¯ç”¨hashå€¼å¯¹å“ˆå¸Œæ¡¶çš„é•¿åº¦(length)è¿›è¡Œå–æ¨¡çš„æ“ä½œã€‚å³:  <strong>index = hash % length</strong></p><p>è¿™ç§æ–¹å¼å¯ä»¥ç”¨éšæœºçš„hashå€¼ç®—å‡ºéšæœºçš„ç´¢å¼•å¹¶ä¸”åˆ†é…ä¹Ÿå°½é‡å‡åŒ€ã€‚æ²¡é”™ï¼!HashMapä¹Ÿæ˜¯è¿™ä¹ˆæƒ³çš„ã€‚ä½†æ˜¯è¿™ç§å–æ¨¡è¿ç®—æœ¬èº«æ˜¯å¯¹CPUè¿ç®—å¼€é”€æ¯”è¾ƒå¤§çš„ï¼Œä¸ºäº†ä¼˜åŒ–é€Ÿåº¦ï¼ŒHashMapé‡‡å–äº†æ›´ä¼˜é›…çš„æ–¹å¼ï¼Œåœ¨putValçš„æ ¸å¿ƒä»£ç å¯ä»¥çœ‹åˆ°HashMapé‡‡ç”¨äº†hashå€¼&quot;ä¸&quot;length-1çš„æ–¹å¼æ¥ç¡®å®šç´¢å¼•ä½ç½®ã€‚å³ï¼š</p><p>â€‹<strong>index = hash &amp; length-1</strong></p><p>hash()æ–¹æ³•ä¸­çš„é«˜16ä½å¼‚æˆ–16ä½çš„è®¡ç®—æ–¹å¼ï¼Œæ˜¯åœ¨JDK1.8ä¹‹åæ‰åŠ ä¸Šçš„ï¼Œåœ¨JDK1.7åŠä¹‹å‰çš„ç‰ˆæœ¬é‡Œæ˜¯indexFor()æ–¹æ³•ï¼Œç›´æ¥ç”¨hashCode&amp;length-1è®¡ç®—å‡ºç´¢å¼•ä½ç½®ã€‚è¿™ä¸ªæ˜¯jdk1.7å’Œjdk1.8ä¸­çš„åŒºåˆ«ã€‚</p><h4 id="5-æ‰©å®¹-åŸºæœ¬åŸç†"><a class="markdownIt-Anchor" href="#5-æ‰©å®¹-åŸºæœ¬åŸç†"></a> 5. æ‰©å®¹-åŸºæœ¬åŸç†</h4><p>è®¾ HashMap çš„ table é•¿åº¦ä¸º <code>M</code>ï¼Œéœ€è¦å­˜å‚¨çš„é”®å€¼å¯¹æ•°é‡ä¸º <code>N</code>ï¼Œå¦‚æœå“ˆå¸Œå‡½æ•°æ»¡è¶³<strong>å‡åŒ€æ€§</strong>çš„è¦æ±‚ï¼Œé‚£ä¹ˆæ¯æ¡é“¾è¡¨çš„é•¿åº¦å¤§çº¦ä¸º <code>N/M</code>ï¼Œå› æ­¤æŸ¥æ‰¾çš„å¤æ‚åº¦ä¸º <code>O(N/M)</code>ã€‚</p><p>ä¸ºäº†è®©æŸ¥æ‰¾çš„æˆæœ¬é™ä½ï¼Œåº”è¯¥ä½¿ N/M å°½å¯èƒ½å°ï¼Œå› æ­¤éœ€è¦ä¿è¯ M å°½å¯èƒ½å¤§ï¼Œä¹Ÿå°±æ˜¯è¯´ table è¦å°½å¯èƒ½å¤§ã€‚HashMap é‡‡ç”¨åŠ¨æ€æ‰©å®¹æ¥æ ¹æ®å½“å‰çš„ N å€¼æ¥è°ƒæ•´ M å€¼ï¼Œä½¿å¾—ç©ºé—´æ•ˆç‡å’Œæ—¶é—´æ•ˆç‡éƒ½èƒ½å¾—åˆ°ä¿è¯ã€‚</p><p>å’Œæ‰©å®¹ç›¸å…³çš„å‚æ•°ä¸»è¦æœ‰ï¼šcapacityã€sizeã€threshold å’Œ load_factorã€‚</p><table><thead><tr><th>å‚æ•°</th><th style="text-align:center">å«ä¹‰</th></tr></thead><tbody><tr><td>capacity</td><td style="text-align:center">table çš„å®¹é‡å¤§å°ï¼Œé»˜è®¤ä¸º 16ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ capacity å¿…é¡»ä¿è¯ä¸º 2 çš„ n æ¬¡æ–¹ã€‚</td></tr><tr><td>size</td><td style="text-align:center">é”®å€¼å¯¹æ•°é‡ã€‚</td></tr><tr><td>threshold</td><td style="text-align:center">size çš„ä¸´ç•Œå€¼ï¼Œå½“ size å¤§äºç­‰äº threshold å°±å¿…é¡»è¿›è¡Œæ‰©å®¹æ“ä½œã€‚</td></tr><tr><td>loadFactor</td><td style="text-align:center">è£…è½½å› å­ï¼Œtable èƒ½å¤Ÿä½¿ç”¨çš„æ¯”ä¾‹ï¼Œthreshold = (int)(capacity* loadFactor)ã€‚</td></tr></tbody></table><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_INITIAL_CAPACITY = <span class="number">16</span>;  <span class="comment">// é»˜è®¤çš„åˆå§‹å®¹é‡</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAXIMUM_CAPACITY = <span class="number">1</span> &lt;&lt; <span class="number">30</span>; <span class="comment">//  æœ€å¤§å®¹é‡  2 çš„ 30æ¬¡æ–¹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">float</span> DEFAULT_LOAD_FACTOR = <span class="number">0.75f</span>;  <span class="comment">// é»˜è®¤çš„è£…è½½å› å­ä¸º0.75</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">transient</span> Entry[] table;</span><br><span class="line"></span><br><span class="line"><span class="keyword">transient</span> <span class="keyword">int</span> size; <span class="comment">// sizeå°±æ˜¯HashMapä¸­é”®å€¼å¯¹çš„æ€»ä¸ªæ•°ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> threshold;  <span class="comment">// size çš„ä¸´ç•Œå€¼</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="keyword">float</span> loadFactor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">transient</span> <span class="keyword">int</span> modCount; <span class="comment">// è®°å½•æ˜¯å‘ç”Ÿå†…éƒ¨ç»“æ„å˜åŒ–çš„æ¬¡æ•°ï¼Œ fail-fastéœ€è¦ç”¨</span></span><br><span class="line"> <span class="comment">// å¦‚æœputå€¼ï¼Œä½†æ˜¯putçš„å€¼æ˜¯è¦†ç›–åŸæœ‰çš„å€¼ï¼Œè¿™æ ·æ˜¯ä¸ç®—å†…éƒ¨ç»“æ„å˜åŒ–çš„ã€‚</span></span><br></pre></td></tr></table></figure></div><p>â€‹ <code>threshold=è£…è½½å› å­ * capacity</code>  ï¼Œä¹Ÿå°±æ˜¯è¯´æ•°ç»„é•¿åº¦å›ºå®šä»¥åï¼Œ å¦‚æœè´Ÿè½½å› å­è¶Šå¤§ï¼Œæ‰€èƒ½å®¹çº³çš„å…ƒç´ ä¸ªæ•°è¶Šå¤šï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªå€¼å°±ä¼šè¿›è¡Œæ‰©å®¹(é»˜è®¤æ˜¯æ‰©å®¹ä¸ºåŸæ¥çš„2å€)ï¼Œ0.75è¿™ä¸ªå€¼æ˜¯æƒè¡¡è¿‡ç©ºé—´å’Œæ—¶é—´å¾—å‡ºçš„ï¼Œå»ºè®®å¤§å®¶ä¸è¦éšæ„ä¿®æ”¹ï¼Œå¦‚æœåœ¨ä¸€äº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œæ¯”å¦‚ç©ºé—´æ¯”è¾ƒå¤šï¼Œä½†è¦æ±‚é€Ÿåº¦æ¯”è¾ƒå¿«ï¼Œè¿™æ—¶å€™å°±å¯ä»¥æŠŠæ‰©å®¹å› å­è°ƒå°ä»¥è¾ƒå°‘hashå†²çªçš„æ¦‚ç‡ã€‚ç›¸åå°±å¢å¤§æ‰©å®¹å› å­(è¿™ä¸ªå€¼å¯ä»¥å¤§äº1)ã€‚</p><p>â€‹ å› ä¸ºHashMapæ‰©å®¹æ¯æ¬¡éƒ½æ˜¯æ‰©å®¹ä¸ºåŸæ¥çš„2å€ï¼Œæ‰€ä»¥<code>capacity</code> æ€»æ˜¯2çš„æ¬¡æ–¹ï¼Œè¿™æ˜¯éå¸¸è§„çš„è®¾ç½®ï¼Œ<strong>å¸¸è§„è®¾ç½®æ˜¯æŠŠæ¡¶çš„å¤§å°è®¾ç½®ä¸ºç´ æ•°ï¼Œå› ä¸ºç´ æ•°å‘ç”Ÿhashå†²çªçš„æ¦‚ç‡è¦å°äºåˆæ•°</strong>ï¼Œæ¯”å¦‚HashTableçš„é»˜è®¤å€¼è®¾ç½®ä¸º11ï¼Œå°±æ˜¯æ¡¶çš„å¤§å°ä¸ºç´ æ•°çš„åº”ç”¨(HashTableæ‰©å®¹åä¸èƒ½ä¿è¯æ˜¯ç´ æ•°)ã€‚HashMapé‡‡ç”¨è¿™ç§è®¾ç½®æ˜¯ä¸ºäº†åœ¨å–æ¨¡å’Œæ‰©å®¹çš„æ—¶å€™åšå‡ºä¼˜åŒ–ã€‚</p><p>ä»ä¸‹é¢çš„æ·»åŠ å…ƒç´ ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œå½“éœ€è¦æ‰©å®¹æ—¶ï¼Œä»¤ capacity ä¸ºåŸæ¥çš„ä¸¤å€ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addEntry</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">int</span> bucketIndex)</span> </span>&#123;</span><br><span class="line">    Entry&lt;K,V&gt; e = table[bucketIndex];</span><br><span class="line">    table[bucketIndex] = <span class="keyword">new</span> Entry&lt;&gt;(hash, key, value, e);</span><br><span class="line">    <span class="keyword">if</span> (size++ &gt;= threshold)</span><br><span class="line">        resize(<span class="number">2</span> * table.length);  <span class="comment">// ä¸¤å€æ‰©å®¹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>æ‰©å®¹ä½¿ç”¨ <code>resize()</code> å®ç°ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ‰©å®¹æ“ä½œåŒæ ·éœ€è¦æŠŠ <code>oldTable</code> çš„æ‰€æœ‰é”®å€¼å¯¹é‡æ–°æ’å…¥ <code>newTable</code> ä¸­ï¼Œå› æ­¤è¿™ä¸€æ­¥æ˜¯å¾ˆè´¹æ—¶çš„ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">resize</span><span class="params">(<span class="keyword">int</span> newCapacity)</span> </span>&#123;<span class="comment">// ä¼ å…¥æ–°çš„å®¹é‡</span></span><br><span class="line">    Entry[] oldTable = table;  <span class="comment">// å¼•ç”¨æ‰©å®¹å‰çš„Entryæ•°ç»„</span></span><br><span class="line">    <span class="keyword">int</span> oldCapacity = oldTable.length;</span><br><span class="line">    <span class="keyword">if</span> (oldCapacity == MAXIMUM_CAPACITY) &#123; <span class="comment">//æ‰©å®¹å‰çš„æ•°ç»„å¤§å°å¦‚æœå·²ç»è¾¾åˆ°æœ€å¤§(2^30)äº†</span></span><br><span class="line">        threshold = Integer.MAX_VALUE; <span class="comment">//ä¿®æ”¹é˜ˆå€¼ä¸ºintçš„æœ€å¤§å€¼(2^31-1)ï¼Œè¿™æ ·ä»¥åå°±ä¸ä¼šæ‰©å®¹äº†</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Entry[] newTable = <span class="keyword">new</span> Entry[newCapacity]; <span class="comment">//åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„Entryæ•°ç»„</span></span><br><span class="line">    transfer(newTable);  <span class="comment">//ï¼ï¼å°†æ•°æ®è½¬ç§»åˆ°æ–°çš„Entryæ•°ç»„é‡Œ</span></span><br><span class="line">    table = newTable; <span class="comment">//HashMapçš„tableå±æ€§å¼•ç”¨æ–°çš„Entryæ•°ç»„</span></span><br><span class="line">    threshold = (<span class="keyword">int</span>)(newCapacity * loadFactor); <span class="comment">//ä¿®æ”¹é˜ˆå€¼</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> è¿™é‡Œå°±æ˜¯ä½¿ç”¨ä¸€ä¸ªå®¹é‡æ›´å¤§çš„æ•°ç»„æ¥ä»£æ›¿å·²æœ‰çš„å®¹é‡å°çš„æ•°ç»„ï¼Œtransfer()æ–¹æ³•å°†åŸæœ‰Entryæ•°ç»„çš„å…ƒç´ æ‹·è´åˆ°æ–°çš„Entryæ•°ç»„é‡Œã€‚ </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">transfer</span><span class="params">(Entry[] newTable)</span> </span>&#123;</span><br><span class="line">    Entry[] src = table; <span class="comment">//srcå¼•ç”¨äº†æ—§çš„Entryæ•°ç»„</span></span><br><span class="line">    <span class="keyword">int</span> newCapacity = newTable.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; src.length; j++) &#123; <span class="comment">//éå†æ—§çš„Entryæ•°ç»„</span></span><br><span class="line">        Entry&lt;K,V&gt; e = src[j]; <span class="comment">//å–å¾—æ—§Entryæ•°ç»„çš„æ¯ä¸ªå…ƒç´ </span></span><br><span class="line">        <span class="keyword">if</span> (e != <span class="keyword">null</span>) &#123;</span><br><span class="line">            src[j] = <span class="keyword">null</span>; <span class="comment">//é‡Šæ”¾æ—§Entryæ•°ç»„çš„å¯¹è±¡å¼•ç”¨ï¼ˆforå¾ªç¯åï¼Œæ—§çš„Entryæ•°ç»„ä¸å†å¼•ç”¨ä»»ä½•å¯¹è±¡ï¼‰</span></span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">                Entry&lt;K,V&gt; next = e.next;</span><br><span class="line">                <span class="keyword">int</span> i = indexFor(e.hash, newCapacity); <span class="comment">//ï¼ï¼é‡æ–°è®¡ç®—æ¯ä¸ªå…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½®</span></span><br><span class="line">                e.next = newTable[i]; <span class="comment">//æ ‡è®°[1]</span></span><br><span class="line">                newTable[i] = e; <span class="comment">//å°†å…ƒç´ æ”¾åœ¨æ•°ç»„ä¸Š</span></span><br><span class="line">                e = next; <span class="comment">//è®¿é—®ä¸‹ä¸€ä¸ªEntryé“¾ä¸Šçš„å…ƒç´ </span></span><br><span class="line">            &#125; <span class="keyword">while</span> (e != <span class="keyword">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>â€‹newTable[i]çš„å¼•ç”¨èµ‹ç»™äº†e.nextï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨äº†å•é“¾è¡¨çš„å¤´æ’å…¥æ–¹å¼ï¼ŒåŒä¸€ä½ç½®ä¸Šæ–°å…ƒç´ æ€»ä¼šè¢«æ”¾åœ¨é“¾è¡¨çš„å¤´éƒ¨ä½ç½®ï¼›è¿™æ ·å…ˆæ”¾åœ¨ä¸€ä¸ªç´¢å¼•ä¸Šçš„å…ƒç´ ç»ˆä¼šè¢«æ”¾åˆ°Entryé“¾çš„å°¾éƒ¨(å¦‚æœå‘ç”Ÿäº†hashå†²çªçš„è¯ï¼‰ï¼Œè¿™ä¸€ç‚¹å’ŒJdk1.8æœ‰åŒºåˆ«ï¼Œä¸‹æ–‡è¯¦è§£ã€‚åœ¨æ—§æ•°ç»„ä¸­åŒä¸€æ¡Entryé“¾ä¸Šçš„å…ƒç´ ï¼Œé€šè¿‡é‡æ–°è®¡ç®—ç´¢å¼•ä½ç½®åï¼Œæœ‰å¯èƒ½è¢«æ”¾åˆ°äº†æ–°æ•°ç»„çš„ä¸åŒä½ç½®ä¸Šã€‚</p><p>â€‹ä¸‹é¢ä¸¾ä¸ªä¾‹å­è¯´æ˜ä¸‹æ‰©å®¹è¿‡ç¨‹ã€‚å‡è®¾äº†æˆ‘ä»¬çš„hashç®—æ³•å°±æ˜¯ç®€å•çš„ç”¨key mod ä¸€ä¸‹è¡¨çš„å¤§å°ï¼ˆä¹Ÿå°±æ˜¯æ•°ç»„çš„é•¿åº¦ï¼‰ã€‚å…¶ä¸­çš„å“ˆå¸Œæ¡¶æ•°ç»„tableçš„size=2ï¼Œ æ‰€ä»¥key = 3ã€7ã€5ï¼Œputé¡ºåºä¾æ¬¡ä¸º 5ã€7ã€3ã€‚åœ¨mod 2ä»¥åéƒ½å†²çªåœ¨table[1]è¿™é‡Œäº†ã€‚è¿™é‡Œå‡è®¾è´Ÿè½½å› å­ loadFactor=1ï¼Œå³å½“é”®å€¼å¯¹çš„å®é™…å¤§å°size å¤§äº tableçš„å®é™…å¤§å°æ—¶è¿›è¡Œæ‰©å®¹ã€‚æ¥ä¸‹æ¥çš„ä¸‰ä¸ªæ­¥éª¤æ˜¯å“ˆå¸Œæ¡¶æ•°ç»„ resizeæˆ4ï¼Œç„¶åæ‰€æœ‰çš„Nodeé‡æ–°rehashçš„è¿‡ç¨‹ã€‚</p> <a href="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/e5aa99e811d1814e010afa7779b759d4_hd.png" data-fancybox="group" data-caption="img" class="fancybox"><img alt="img" style="zoom:80%;" data-src="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/e5aa99e811d1814e010afa7779b759d4_hd.png" class="lazyload" title="img"></a> <p>â€‹ä¸‹é¢æˆ‘ä»¬è®²è§£ä¸‹JDK1.8åšäº†å“ªäº›ä¼˜åŒ–ã€‚ç»è¿‡è§‚æµ‹å¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯2æ¬¡å¹‚çš„æ‰©å±•(æŒ‡é•¿åº¦æ‰©ä¸ºåŸæ¥2å€)ï¼Œæ‰€ä»¥ï¼Œå…ƒç´ çš„ä½ç½®è¦ä¹ˆæ˜¯åœ¨åŸä½ç½®ï¼Œè¦ä¹ˆæ˜¯åœ¨åŸä½ç½®å†ç§»åŠ¨2æ¬¡å¹‚çš„ä½ç½®ã€‚çœ‹ä¸‹å›¾å¯ä»¥æ˜ç™½è¿™å¥è¯çš„æ„æ€ï¼Œnä¸ºtableçš„é•¿åº¦ï¼Œå›¾ï¼ˆaï¼‰è¡¨ç¤ºæ‰©å®¹å‰çš„key1å’Œkey2ä¸¤ç§keyç¡®å®šç´¢å¼•ä½ç½®çš„ç¤ºä¾‹ï¼Œå›¾ï¼ˆbï¼‰è¡¨ç¤ºæ‰©å®¹åkey1å’Œkey2ä¸¤ç§keyç¡®å®šç´¢å¼•ä½ç½®çš„ç¤ºä¾‹ï¼Œå…¶ä¸­hash1æ˜¯key1å¯¹åº”çš„å“ˆå¸Œä¸é«˜ä½è¿ç®—ç»“æœã€‚</p>  <a href="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/a285d9b2da279a18b052fe5eed69afe9_hd.png" data-fancybox="group" data-caption="img" class="fancybox"><img alt="img" style="zoom:80%;" align="center" data-src="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/a285d9b2da279a18b052fe5eed69afe9_hd.png" class="lazyload" title="img"></a> <p>â€‹å…ƒç´ åœ¨é‡æ–°è®¡ç®—hashä¹‹åï¼Œå› ä¸ºnå˜ä¸º2å€ï¼Œé‚£ä¹ˆn-1çš„maskèŒƒå›´åœ¨é«˜ä½å¤š1bit(çº¢è‰²)ï¼Œå› æ­¤æ–°çš„indexå°±ä¼šå‘ç”Ÿè¿™æ ·çš„å˜åŒ–ï¼š</p> <a href="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/b2cb057773e3d67976c535d6ef547d51_hd.png" data-fancybox="group" data-caption="img" class="fancybox"><img alt="img" style="zoom:80%;" align="center" data-src="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/b2cb057773e3d67976c535d6ef547d51_hd.png" class="lazyload" title="img"></a> <p>â€‹å› æ­¤ï¼Œæˆ‘ä»¬åœ¨æ‰©å……HashMapçš„æ—¶å€™ï¼Œä¸éœ€è¦åƒJDK1.7çš„å®ç°é‚£æ ·é‡æ–°è®¡ç®—hashï¼Œåªéœ€è¦çœ‹çœ‹åŸæ¥çš„hashå€¼æ–°å¢çš„é‚£ä¸ªbitæ˜¯1è¿˜æ˜¯0å°±å¥½äº†ï¼Œæ˜¯0çš„è¯ç´¢å¼•æ²¡å˜ï¼Œæ˜¯1çš„è¯ç´¢å¼•å˜æˆâ€œåŸç´¢å¼•+oldCapâ€ï¼Œå¯ä»¥çœ‹çœ‹ä¸‹å›¾ä¸º16æ‰©å……ä¸º32çš„resizeç¤ºæ„å›¾ï¼š</p> <a href="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/544caeb82a329fa49cc99842818ed1ba_hd.png" data-fancybox="group" data-caption="img" class="fancybox"><img alt="img" style="zoom:80%;" align="center" data-src="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/544caeb82a329fa49cc99842818ed1ba_hd.png" class="lazyload" title="img"></a> <p>â€‹è¿™ä¸ªè®¾è®¡ç¡®å®éå¸¸çš„å·§å¦™ï¼Œæ—¢çœå»äº†é‡æ–°è®¡ç®—hashå€¼çš„æ—¶é—´ï¼Œè€Œä¸”åŒæ—¶ï¼Œç”±äºæ–°å¢çš„1bitæ˜¯0è¿˜æ˜¯1å¯ä»¥è®¤ä¸ºæ˜¯éšæœºçš„ï¼Œå› æ­¤resizeçš„è¿‡ç¨‹ï¼Œå‡åŒ€çš„æŠŠä¹‹å‰çš„å†²çªçš„èŠ‚ç‚¹åˆ†æ•£åˆ°æ–°çš„bucketäº†ã€‚è¿™ä¸€å—å°±æ˜¯JDK1.8æ–°å¢çš„ä¼˜åŒ–ç‚¹ã€‚æœ‰ä¸€ç‚¹æ³¨æ„åŒºåˆ«ï¼ŒJDK1.7ä¸­rehashçš„æ—¶å€™ï¼Œæ—§é“¾è¡¨è¿ç§»æ–°é“¾è¡¨çš„æ—¶å€™ï¼Œå¦‚æœåœ¨æ–°è¡¨çš„æ•°ç»„ç´¢å¼•ä½ç½®ç›¸åŒï¼Œåˆ™é“¾è¡¨å…ƒç´ ä¼šå€’ç½®ï¼Œä½†æ˜¯ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼ŒJDK1.8ä¸ä¼šå€’ç½®ã€‚æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥ç ”ç©¶ä¸‹JDK1.8çš„resizeæºç ï¼Œå†™çš„å¾ˆèµï¼Œå¦‚ä¸‹:</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> Node&lt;K,V&gt;[] resize() &#123;</span><br><span class="line">        Node&lt;K,V&gt;[] oldTab = table;</span><br><span class="line">        <span class="keyword">int</span> oldCap = (oldTab == <span class="keyword">null</span>) ? <span class="number">0</span> : oldTab.length;</span><br><span class="line">        <span class="keyword">int</span> oldThr = threshold;</span><br><span class="line">        <span class="keyword">int</span> newCap, newThr = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (oldCap &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (oldCap &gt;= MAXIMUM_CAPACITY) &#123;</span><br><span class="line">                threshold = Integer.MAX_VALUE;</span><br><span class="line">                <span class="keyword">return</span> oldTab;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> ((newCap = oldCap &lt;&lt; <span class="number">1</span>) &lt; MAXIMUM_CAPACITY &amp;&amp;</span><br><span class="line">                     oldCap &gt;= DEFAULT_INITIAL_CAPACITY)</span><br><span class="line">                newThr = oldThr &lt;&lt; <span class="number">1</span>; <span class="comment">// double threshold</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (oldThr &gt; <span class="number">0</span>) <span class="comment">// initial capacity was placed in threshold</span></span><br><span class="line">            newCap = oldThr;</span><br><span class="line">        <span class="keyword">else</span> &#123;               <span class="comment">// zero initial threshold signifies using defaults</span></span><br><span class="line">            newCap = DEFAULT_INITIAL_CAPACITY;</span><br><span class="line">            newThr = (<span class="keyword">int</span>)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (newThr == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">float</span> ft = (<span class="keyword">float</span>)newCap * loadFactor;</span><br><span class="line">            newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (<span class="keyword">float</span>)MAXIMUM_CAPACITY ?</span><br><span class="line">                      (<span class="keyword">int</span>)ft : Integer.MAX_VALUE);</span><br><span class="line">        &#125;</span><br><span class="line">        threshold = newThr;</span><br><span class="line">        <span class="meta">@SuppressWarnings</span>(&#123;<span class="string">"rawtypes"</span>,<span class="string">"unchecked"</span>&#125;)</span><br><span class="line">            Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])<span class="keyword">new</span> Node[newCap];</span><br><span class="line">        table = newTab;</span><br><span class="line">        <span class="keyword">if</span> (oldTab != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; oldCap; ++j) &#123;</span><br><span class="line">                Node&lt;K,V&gt; e;</span><br><span class="line">                <span class="keyword">if</span> ((e = oldTab[j]) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    oldTab[j] = <span class="keyword">null</span>;</span><br><span class="line">                    <span class="keyword">if</span> (e.next == <span class="keyword">null</span>)</span><br><span class="line">                        newTab[e.hash &amp; (newCap - <span class="number">1</span>)] = e;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                        ((TreeNode&lt;K,V&gt;)e).split(<span class="keyword">this</span>, newTab, j, oldCap);</span><br><span class="line">                    <span class="keyword">else</span> &#123; <span class="comment">// preserve order</span></span><br><span class="line">                        Node&lt;K,V&gt; loHead = <span class="keyword">null</span>, loTail = <span class="keyword">null</span>;</span><br><span class="line">                        Node&lt;K,V&gt; hiHead = <span class="keyword">null</span>, hiTail = <span class="keyword">null</span>;</span><br><span class="line">                        Node&lt;K,V&gt; next;</span><br><span class="line">                        <span class="keyword">do</span> &#123;</span><br><span class="line">                            next = e.next;</span><br><span class="line">                            <span class="keyword">if</span> ((e.hash &amp; oldCap) == <span class="number">0</span>) &#123;</span><br><span class="line">                                <span class="keyword">if</span> (loTail == <span class="keyword">null</span>)</span><br><span class="line">                                    loHead = e;</span><br><span class="line">                                <span class="keyword">else</span></span><br><span class="line">                                    loTail.next = e;</span><br><span class="line">                                loTail = e;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">else</span> &#123;</span><br><span class="line">                                <span class="keyword">if</span> (hiTail == <span class="keyword">null</span>)</span><br><span class="line">                                    hiHead = e;</span><br><span class="line">                                <span class="keyword">else</span></span><br><span class="line">                                    hiTail.next = e;</span><br><span class="line">                                hiTail = e;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125; <span class="keyword">while</span> ((e = next) != <span class="keyword">null</span>);</span><br><span class="line">                        <span class="keyword">if</span> (loTail != <span class="keyword">null</span>) &#123;</span><br><span class="line">                            loTail.next = <span class="keyword">null</span>;</span><br><span class="line">                            newTab[j] = loHead;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span> (hiTail != <span class="keyword">null</span>) &#123;</span><br><span class="line">                            hiTail.next = <span class="keyword">null</span>;</span><br><span class="line">                            newTab[j + oldCap] = hiHead;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> newTab;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div><h4 id="6-æ‰©å®¹-é‡æ–°è®¡ç®—æ¡¶ä¸‹æ ‡"><a class="markdownIt-Anchor" href="#6-æ‰©å®¹-é‡æ–°è®¡ç®—æ¡¶ä¸‹æ ‡"></a> 6. æ‰©å®¹-é‡æ–°è®¡ç®—æ¡¶ä¸‹æ ‡</h4><p>â€‹åœ¨è¿›è¡Œæ‰©å®¹æ—¶ï¼Œéœ€è¦æŠŠé”®å€¼å¯¹é‡æ–°è®¡ç®—æ¡¶ä¸‹æ ‡ï¼Œä»è€Œæ”¾åˆ°å¯¹åº”çš„æ¡¶ä¸Šã€‚åœ¨å‰é¢æåˆ°ï¼ŒHashMap ä½¿ç”¨ hash%capacity æ¥ç¡®å®šæ¡¶ä¸‹æ ‡ã€‚HashMap <code>capacity</code> ä¸º 2 çš„ n æ¬¡æ–¹è¿™ä¸€ç‰¹ç‚¹èƒ½å¤Ÿæå¤§é™ä½é‡æ–°è®¡ç®—æ¡¶ä¸‹æ ‡æ“ä½œçš„å¤æ‚åº¦ã€‚</p><p>â€‹å‡è®¾åŸæ•°ç»„é•¿åº¦ <code>capacity</code> ä¸º 16ï¼Œæ‰©å®¹ä¹‹å <code>new capacity</code> ä¸º 32ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c++</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">capacity     : <span class="number">00010000</span></span><br><span class="line"><span class="keyword">new</span> capacity : <span class="number">00100000</span></span><br></pre></td></tr></table></figure></div><p>å¯¹äºä¸€ä¸ª Keyï¼Œå®ƒçš„å“ˆå¸Œå€¼ hash åœ¨ç¬¬ 5 ä½ï¼š</p><ul><li>ä¸º 0ï¼Œé‚£ä¹ˆ <code>hash%00010000 = hash%00100000</code>ï¼Œæ¡¶ä½ç½®å’ŒåŸæ¥ä¸€è‡´ï¼›</li><li>ä¸º 1ï¼Œ<code>hash%00010000 = hash%00100000 + 16</code>ï¼Œæ¡¶ä½ç½®æ˜¯åŸä½ç½® + 16ã€‚</li></ul><h4 id="7-è®¡ç®—æ•°ç»„å®¹é‡"><a class="markdownIt-Anchor" href="#7-è®¡ç®—æ•°ç»„å®¹é‡"></a> 7. è®¡ç®—æ•°ç»„å®¹é‡</h4><p>â€‹è¿™é‡Œå…ˆäº†è§£ä¸€ä¸‹åŸºæœ¬çš„ä½è¿ç®—</p><table><thead><tr><th style="text-align:center">è¿ç®—ç¬¦</th><th style="text-align:center">è®¡ç®—æ–¹å¼</th></tr></thead><tbody><tr><td style="text-align:center">ä¸ &amp;</td><td style="text-align:center">åªæœ‰ä¸¤ä¸ªæ•°åŒä¸€ä½éƒ½æ˜¯1æ‰ä¼šè¿”å›1</td></tr><tr><td style="text-align:center">æˆ– l</td><td style="text-align:center">ä¸¤ä¸ªæ•°åŒä¸€ä½åªè¦å­˜åœ¨ä¸€ä¸ª1å°±æ˜¯1</td></tr><tr><td style="text-align:center">å¼‚æˆ– ^</td><td style="text-align:center">ä¸¤ä¸ªæ•°åŒä¸€ä½ä¸èƒ½ç›¸åŒæ‰ä¸º1</td></tr><tr><td style="text-align:center">å·¦ç§» &lt;&lt;</td><td style="text-align:center">æ‰€æœ‰ä½ç½®å·¦ç§»ï¼Œä½ä½è¡¥0</td></tr><tr><td style="text-align:center">å³ç§» &gt;&gt;</td><td style="text-align:center">æ­£æ•°ï¼šæ‰€æœ‰ä½ç½®å³ç§»ï¼Œé«˜ä½è¡¥0 è´Ÿæ•°ï¼šå†™å‡ºè¡¥ç ï¼ˆç¬¦å·ä½ä¸å˜ï¼Œå…¶ä½™ä½ç½®å–åï¼Œç„¶ååŠ 1ï¼‰ï¼Œæ‰€æœ‰ä½ç½®å³ç§»é«˜ä½è¡¥1ï¼Œç„¶åå†è·å–åŸç ï¼ˆç¬¦å·ä½ä¸å˜ï¼Œå…¶ä½™ä½ç½®å–åï¼Œç„¶ååŠ 1ï¼‰</td></tr><tr><td style="text-align:center">æ— ç¬¦å·å³ç§» &gt;&gt;</td><td style="text-align:center">æ— è®ºæ­£è´Ÿé«˜ä½è¡¥0</td></tr></tbody></table><p>â€‹HashMap æ„é€ å‡½æ•°å…è®¸ç”¨æˆ·ä¼ å…¥çš„å®¹é‡ä¸æ˜¯ 2 çš„ n æ¬¡æ–¹ï¼Œå› ä¸ºå®ƒå¯ä»¥è‡ªåŠ¨åœ°å°†ä¼ å…¥çš„å®¹é‡è½¬æ¢ä¸º 2 çš„ n æ¬¡æ–¹ã€‚å…ˆè€ƒè™‘å¦‚ä½•æ±‚ä¸€ä¸ªæ•°çš„æ©ç ï¼Œå¯¹äº 10010000ï¼Œå®ƒçš„æ©ç ä¸º 11111111ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•å¾—åˆ°ï¼š ç”¨numä¸numå·¦ç§»çš„æ•°å­—åšæˆ–è¿ç®—èµ‹ç»™num ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mask |= mask &gt;&gt; <span class="number">1</span>    <span class="number">11011000</span></span><br><span class="line">mask |= mask &gt;&gt; <span class="number">2</span>    <span class="number">11111110</span></span><br><span class="line">mask |= mask &gt;&gt; <span class="number">4</span>    <span class="number">11111111</span></span><br></pre></td></tr></table></figure></div><p>mask+1 æ˜¯å¤§äºåŸå§‹æ•°å­—çš„æœ€å°çš„ 2 çš„ n æ¬¡æ–¹ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">num     <span class="number">10010000</span></span><br><span class="line">mask+<span class="number">1</span> <span class="number">100000000</span></span><br></pre></td></tr></table></figure></div><p>ä»¥ä¸‹æ˜¯ HashMap ä¸­è®¡ç®—æ•°ç»„å®¹é‡çš„ä»£ç ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">tableSizeFor</span><span class="params">(<span class="keyword">int</span> cap)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = cap - <span class="number">1</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">2</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">4</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">8</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">16</span>;</span><br><span class="line">    <span class="keyword">return</span> (n &lt; <span class="number">0</span>) ? <span class="number">1</span> : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h4 id="8-é“¾è¡¨è½¬çº¢é»‘æ ‘"><a class="markdownIt-Anchor" href="#8-é“¾è¡¨è½¬çº¢é»‘æ ‘"></a> 8. é“¾è¡¨è½¬çº¢é»‘æ ‘</h4><p>ä» JDK 1.8 å¼€å§‹ï¼Œä¸€ä¸ªæ¡¶å­˜å‚¨çš„é“¾è¡¨é•¿åº¦å¤§äºç­‰äº 8 æ—¶ä¼šå°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚</p>  <a href="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/8db4a3bdfb238da1a1c4431d2b6e075c_r.jpg" data-fancybox="group" data-caption="preview" class="fancybox"><img alt="preview" style="zoom:80%;" data-src="/2020/02/01/Java-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/8db4a3bdfb238da1a1c4431d2b6e075c_r.jpg" class="lazyload" title="preview"></a>  <hr><h1 id="å‚è€ƒ"><a class="markdownIt-Anchor" href="#å‚è€ƒ"></a> å‚è€ƒ</h1><ol><li><p><a href="https://cyc2018.github.io/CS-Notes" target="_blank" rel="noopener">https://cyc2018.github.io/CS-Notes</a></p></li><li><p><a href="https://www.cnblogs.com/cdream-zs/p/9997861.html" target="_blank" rel="noopener">è¶…è¯¦ç»†çš„HashMapè§£æ(jdk1.8)</a></p></li><li><p><a href="https://www.cnblogs.com/duodushuduokanbao/p/9492952.html" target="_blank" rel="noopener">HashMap JDK1.8å®ç°åŸç†</a></p></li><li><p><a href="https://blog.csdn.net/zymx14/article/details/78394464" target="_blank" rel="noopener">javaä¸­çš„fail-fast(å¿«é€Ÿå¤±è´¥)æœºåˆ¶</a></p></li><li><p><a href="https://www.cnblogs.com/songanwei/p/9387745.html" target="_blank" rel="noopener">é¢è¯•é¢˜æ€è€ƒï¼šjavaä¸­å¿«é€Ÿå¤±è´¥(fail-fast)å’Œå®‰å…¨å¤±è´¥(fail-safe)çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</a></p></li><li><p><a href="https://zhuanlan.zhihu.com/p/21673805" target="_blank" rel="noopener">Java 8ç³»åˆ—ä¹‹é‡æ–°è®¤è¯†HashMap</a></p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Java" scheme="https://Castile.github.io/categories/Java/"/>
    
    
      <category term="Java" scheme="https://Castile.github.io/tags/Java/"/>
    
      <category term="JavaåŸºç¡€" scheme="https://Castile.github.io/tags/Java%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>leetcode-399-é™¤æ³•æ±‚å€¼</title>
    <link href="https://castile.github.io/2020/01/31/leetcode-399-%E9%99%A4%E6%B3%95%E6%B1%82%E5%80%BC/"/>
    <id>https://castile.github.io/2020/01/31/leetcode-399-%E9%99%A4%E6%B3%95%E6%B1%82%E5%80%BC/</id>
    <published>2020-01-31T14:30:10.000Z</published>
    <updated>2020-01-31T15:25:59.910Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="æè¿°"><a class="markdownIt-Anchor" href="#æè¿°"></a> æè¿°</h2><blockquote><p>ç»™å‡ºæ–¹ç¨‹å¼ A / B = k, å…¶ä¸­ A å’Œ B å‡ä¸ºä»£è¡¨å­—ç¬¦ä¸²çš„å˜é‡ï¼Œ k æ˜¯ä¸€ä¸ªæµ®ç‚¹å‹æ•°å­—ã€‚æ ¹æ®å·²çŸ¥æ–¹ç¨‹å¼æ±‚è§£é—®é¢˜ï¼Œå¹¶è¿”å›è®¡ç®—ç»“æœã€‚å¦‚æœç»“æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å› -1.0ã€‚</p><p>ç¤ºä¾‹ :<br>ç»™å®š a / b = 2.0, b / c = 3.0<br>é—®é¢˜: a / c = ?, b / a = ?, a / e = ?, a / a = ?, x / x = ?<br>è¿”å› [6.0, 0.5, -1.0, 1.0, -1.0 ]</p><p>è¾“å…¥ä¸º: vector&lt;pair&lt;string, string&gt;&gt; equations, vector<double>&amp; values, vector&lt;pair&lt;string, string&gt;&gt; queries(æ–¹ç¨‹å¼ï¼Œæ–¹ç¨‹å¼ç»“æœï¼Œé—®é¢˜æ–¹ç¨‹å¼)ï¼Œ å…¶ä¸­ equations.size() == values.size()ï¼Œå³æ–¹ç¨‹å¼çš„é•¿åº¦ä¸æ–¹ç¨‹å¼ç»“æœé•¿åº¦ç›¸ç­‰ï¼ˆç¨‹å¼ä¸ç»“æœä¸€ä¸€å¯¹åº”ï¼‰ï¼Œå¹¶ä¸”ç»“æœå€¼å‡ä¸ºæ­£æ•°ã€‚ä»¥ä¸Šä¸ºæ–¹ç¨‹å¼çš„æè¿°ã€‚ è¿”å›vector<double>ç±»å‹ã€‚</double></double></p><p>åŸºäºä¸Šè¿°ä¾‹å­ï¼Œè¾“å…¥å¦‚ä¸‹ï¼š</p><p>equations(æ–¹ç¨‹å¼) = [ [â€œaâ€, â€œbâ€], [â€œbâ€, â€œcâ€] ],<br>values(æ–¹ç¨‹å¼ç»“æœ) = [2.0, 3.0],<br>queries(é—®é¢˜æ–¹ç¨‹å¼) = [ [â€œaâ€, â€œcâ€], [â€œbâ€, â€œaâ€], [â€œaâ€, â€œeâ€], [â€œaâ€, â€œaâ€], [â€œxâ€, â€œxâ€] ].<br>è¾“å…¥æ€»æ˜¯æœ‰æ•ˆçš„ã€‚ä½ å¯ä»¥å‡è®¾é™¤æ³•è¿ç®—ä¸­ä¸ä¼šå‡ºç°é™¤æ•°ä¸º0çš„æƒ…å†µï¼Œä¸”ä¸å­˜åœ¨ä»»ä½•çŸ›ç›¾çš„ç»“æœã€‚<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/evaluate-division" target="_blank" rel="noopener">https://leetcode-cn.com/problems/evaluate-division</a></p></blockquote><p>æ­¤é¢˜éš¾åº¦ä¸ºä¸­ç­‰ï¼Œä½†æ˜¯æˆ‘åšäº†ä¸€å¤©â€¦ï¼Œ å¤ªèœäº†ã€‚ã€‚ã€‚å¯¹äºæˆ‘æ¥è¯´è¿˜æ˜¯æ¯”è¾ƒå¤æ‚çš„é¢˜ç›®äº†ã€‚</p><h2 id="åˆ†æ"><a class="markdownIt-Anchor" href="#åˆ†æ"></a> åˆ†æ</h2><ol><li><p>dfsï¼šä½¿ç”¨æ·±åº¦ä¼˜å…ˆæœç´¢å°±æ¯”è¾ƒç›´è§‚ã€‚æ¯ä¸ªå­—æ¯ç›¸å½“äºä¸€ä¸ªèŠ‚ç‚¹ï¼Œåœ¨ç»™å®šçš„equationsä¸­å»ºç«‹åˆé€‚çš„æ•°æ®ç»“æ„ï¼Œå»ºå›¾ï¼Œè¦æ±‚æ–¹ç¨‹å¼çš„ç»“æœç›¸å½“äºæ±‚ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æ˜¯å¦å¯ä»¥åˆ°è¾¾ï¼Œå¯ä»¥åˆ°è¾¾åˆ™æ±‚å‡ºå…¶ä»£ä»·ï¼Œä¸èƒ½åˆ°è¾¾å°±è®¾ä¸º-1.0.</p><p>æˆ‘è§‰å¾—æ­¤é¢˜çš„å…³é”®å°±æ˜¯å»ºå›¾ã€‚</p><a href="/2020/01/31/leetcode-399-%E9%99%A4%E6%B3%95%E6%B1%82%E5%80%BC/1580483374980.png" data-fancybox="group" data-caption="1580483374980" class="fancybox"><img alt="1580483374980" style="zoom:80%;" data-src="/2020/01/31/leetcode-399-%E9%99%A4%E6%B3%95%E6%B1%82%E5%80%BC/1580483374980.png" class="lazyload" title="1580483374980"></a><p>a/c = (a/b) * (b/c)ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨<strong>å›¾</strong>æ¥è§£å†³ ã€‚</p></li><li><p>å¹¶æŸ¥é›†ï¼š æ¯”è¾ƒç‰¹æ®Šï¼Œåœ¨è·¯å¾„å‹ç¼©é‚£å—æ¯”è¾ƒå¤æ‚ã€‚ã€‚ã€‚ä»¥åè¡¥ä¸Šå§</p><p><a href="/2020/01/31/leetcode-399-%E9%99%A4%E6%B3%95%E6%B1%82%E5%80%BC/1580483517613.png" data-fancybox="group" data-caption="1580483517613" class="fancybox"><img alt="1580483517613" data-src="/2020/01/31/leetcode-399-%E9%99%A4%E6%B3%95%E6%B1%82%E5%80%BC/1580483517613.png" class="lazyload" title="1580483517613"></a></p></li></ol><h2 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h2><p>Leetcode AC ä»£ç ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">double</span>[] calcEquation(List&lt;List&lt;String&gt;&gt; equations, <span class="keyword">double</span>[] values, List&lt;List&lt;String&gt;&gt; queries) &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨mapçš„æ•°æ®ç»“æ„æ›´å¥½</span></span><br><span class="line">        <span class="comment">// è¡¨ç¤º a-&gt;b çš„æƒé‡ å³ a / b çš„å€¼</span></span><br><span class="line">        Map&lt;String, Map&lt;String, Double&gt;&gt; g = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        buildGraph(g, equations, values);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span>[] res = <span class="keyword">new</span> <span class="keyword">double</span>[queries.size()];</span><br><span class="line">        Arrays.fill(res, -<span class="number">1.0</span>);</span><br><span class="line">        <span class="keyword">int</span> index= <span class="number">0</span> ;</span><br><span class="line">        <span class="keyword">for</span>(List&lt;String&gt; q: queries)&#123;</span><br><span class="line">            String a = q.get(<span class="number">0</span>);</span><br><span class="line">            String b = q.get(<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span>(!g.containsKey(a) || !g.containsKey(b))&#123;</span><br><span class="line">                index++;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                dfs(g, a, b, res, <span class="keyword">new</span> HashSet&lt;&gt;(), index, <span class="number">1.0</span>);</span><br><span class="line">                index++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å»ºå›¾</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">buildGraph</span><span class="params">(Map&lt;String, Map&lt;String, Double&gt;&gt; g, List&lt;List&lt;String&gt;&gt; equations, <span class="keyword">double</span>[] values)</span></span>&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(List&lt;String&gt; e: equations)&#123;</span><br><span class="line">            String a = e.get(<span class="number">0</span>);</span><br><span class="line">            String b = e.get(<span class="number">1</span>);</span><br><span class="line">            g.putIfAbsent(a, <span class="keyword">new</span> HashMap&lt;&gt;());</span><br><span class="line">            g.putIfAbsent(b, <span class="keyword">new</span> HashMap&lt;&gt;());</span><br><span class="line">            g.get(a).put(b, values[index]);   <span class="comment">// a / b</span></span><br><span class="line">            g.get(b).put(a, <span class="number">1.0</span> / values[index]); <span class="comment">//  b / a</span></span><br><span class="line">            index++;</span><br><span class="line">            g.get(a).put(a, <span class="number">1.0</span>);</span><br><span class="line">            g.get(b).put(b, <span class="number">1.0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(Map&lt;String, Map&lt;String, Double&gt;&gt; g, String a, String b, <span class="keyword">double</span>[] res, Set&lt;String&gt; visited, <span class="keyword">int</span> index,  <span class="keyword">double</span>  tmp)</span>       </span>&#123;</span><br><span class="line">        visited.add(a);</span><br><span class="line">        <span class="keyword">if</span>(g.get(a) == <span class="keyword">null</span> || g.get(a).size() == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">// è¯´æ˜aæ²¡æœ‰ä¸å…¶ä»–ç‚¹ç›¸è¿</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(g.get(a).containsKey(b))&#123;  <span class="comment">//  åˆšå¥½æœ‰a-&gt;bçš„è·¯å¾„</span></span><br><span class="line">            res[index] = g.get(a).get(b) * tmp;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(String next: g.get(a).keySet())&#123;</span><br><span class="line">            <span class="keyword">if</span>(visited.contains(next))  <span class="keyword">continue</span>;</span><br><span class="line">            dfs(g, next, b, res, visited, index, g.get(a).get(next)*tmp);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><a href="/2020/01/31/leetcode-399-%E9%99%A4%E6%B3%95%E6%B1%82%E5%80%BC/1580483055463.png" data-fancybox="group" data-caption="1580483055463" class="fancybox"><img alt="1580483055463" style="zoom:80%;" data-src="/2020/01/31/leetcode-399-%E9%99%A4%E6%B3%95%E6%B1%82%E5%80%BC/1580483055463.png" class="lazyload" title="1580483055463"></a><p>è¿˜æœ‰ä¸€äº›é—®é¢˜æœªè§£å†³ï¼Œæ¯”å¦‚ä¸‹é¢æ˜¯è‡ªå·±å†™çš„ä»£ç ï¼Œåœ¨ideaä¸Šè¿è¡Œæ²¡æ¯›ç—…ï¼Œä½†æ˜¯åœ¨leetcodeä¸Šå°±å‡ºé”™äº†ã€‚å…·ä½“åŸå› ä¸è¯¦ï¼Œæ¬¢è¿å¤§å®¶æå‡ºé—®é¢˜è¿›è¡Œäº¤æµï¼Œä¸èƒœæ„Ÿæ¿€ï¼</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution_DFS</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">double</span>[] calcEquation(List&lt;List&lt;String&gt;&gt; equations, <span class="keyword">double</span>[] values, List&lt;List&lt;String&gt;&gt; queries) &#123;</span><br><span class="line">        Map&lt;String, Map&lt;String, Double&gt;&gt;  g = <span class="keyword">new</span> HashMap&lt;&gt;(); <span class="comment">// å›¾</span></span><br><span class="line">        bulidGraph(g, equations, values);</span><br><span class="line">        <span class="keyword">double</span>[] res = <span class="keyword">new</span> <span class="keyword">double</span>[queries.size()]; <span class="comment">//   ç»“æœé›†åˆ</span></span><br><span class="line"></span><br><span class="line">        Arrays.fill(res, -<span class="number">1.0</span>); <span class="comment">// å…¨éƒ¨è®¾ç½®æˆ-1.0ï¼›</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// éå†é—®é¢˜å¼å­</span></span><br><span class="line">        <span class="keyword">for</span>(List&lt;String&gt; q: queries)&#123;</span><br><span class="line">            String a = q.get(<span class="number">0</span>);</span><br><span class="line">            String b = q.get(<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span>(!g.containsKey(a) || !g.containsKey(b))&#123;</span><br><span class="line">                index++;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                dfs(g, a, b, res, index, <span class="keyword">new</span> HashSet&lt;&gt;(), <span class="number">1.0</span>);</span><br><span class="line">                index++;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸‹é¢è¿™ä¸ªæ–¹æ³•åœ¨leetcodeè¡Œä¸é€š</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">double</span>[] calcEquation_dfs(List&lt;List&lt;String&gt;&gt; equations, <span class="keyword">double</span>[] values, List&lt;List&lt;String&gt;&gt; queries) &#123;</span><br><span class="line">        Map&lt;String, Map&lt;String, Double&gt;&gt; g = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        bulidGraph(g, equations, values);</span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">double</span>[] ans = <span class="keyword">new</span> <span class="keyword">double</span>[queries.size()];</span><br><span class="line">        <span class="keyword">for</span> (List&lt;String&gt; q: queries)&#123;</span><br><span class="line">            String x = q.get(<span class="number">0</span>);</span><br><span class="line">            String y = q.get(<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span>(!g.containsKey(x) || !g.containsKey(y))&#123;</span><br><span class="line">                ans[index] = -<span class="number">1.0</span>;</span><br><span class="line">                index++;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            HashSet&lt;String&gt; visited = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">            ans[index] = divide(x, y, g, visited);</span><br><span class="line">            index++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// get a / b</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">double</span> <span class="title">divide</span><span class="params">(String a, String b, Map&lt;String, Map&lt;String, Double&gt;&gt; g, Set&lt;String&gt; visitied)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>( a == b)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1.0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        visitied.add(a);</span><br><span class="line">        <span class="keyword">for</span>(String next: g.get(a).keySet())&#123;</span><br><span class="line">            <span class="keyword">if</span>(visitied.contains(next)) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">double</span> d = divide(next, b, g, visitied); <span class="comment">//  d = next / b</span></span><br><span class="line">            <span class="comment">//  a /b =  next /b * a / next</span></span><br><span class="line">            <span class="keyword">if</span>(d &gt; <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> d * g.get(a).get(next);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1.0</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(Map&lt;String, Map&lt;String, Double&gt;&gt; g, String a, String b, <span class="keyword">double</span>[] res, <span class="keyword">int</span> index, Set&lt;String&gt; visited, <span class="keyword">double</span> tmp)</span></span>&#123;</span><br><span class="line">        visited.add(a);</span><br><span class="line">        <span class="keyword">if</span>(g.get(a) == <span class="keyword">null</span> || g.get(a).size() == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(g.get(a).containsKey(b)) &#123;</span><br><span class="line">            <span class="comment">//  åˆšå¥½å­˜åœ¨ a-&gt;b</span></span><br><span class="line">            res[index] = g.get(a).get(b) * tmp;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(String next: g.get(a).keySet())&#123;</span><br><span class="line">            <span class="keyword">if</span>(visited.contains(next))  <span class="keyword">continue</span>;</span><br><span class="line">            dfs(g, next, b, res, index, visited, g.get(a).get(next) * tmp);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">bulidGraph</span><span class="params">(Map&lt;String, Map&lt;String, Double&gt;&gt;  g , List&lt;List&lt;String&gt;&gt; equations, <span class="keyword">double</span>[] values)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(List&lt;String&gt; e: equations)&#123;</span><br><span class="line">            String a = e.get(<span class="number">0</span>);</span><br><span class="line">            String b = e.get(<span class="number">1</span>);</span><br><span class="line">            g.putIfAbsent(a, <span class="keyword">new</span> HashMap&lt;&gt;());</span><br><span class="line">            g.putIfAbsent(b, <span class="keyword">new</span> HashMap&lt;&gt;());</span><br><span class="line">            g.get(a).put(b, values[index]);   <span class="comment">//  a -&gt; b  : a / b</span></span><br><span class="line">            g.get(b).put(a, <span class="number">1.0</span> / values[index]); <span class="comment">//  b -&gt; a : b / a;</span></span><br><span class="line">            index++;</span><br><span class="line">            g.get(a).put(a, <span class="number">1.0</span>);</span><br><span class="line">            g.get(b).put(b, <span class="number">1.0</span>);  <span class="comment">//  è‡ªå·±åˆ°è‡ªå·±çš„æƒé‡ä¸º1</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Algorithm" scheme="https://Castile.github.io/categories/Algorithm/"/>
    
    
      <category term="ç®—æ³•" scheme="https://Castile.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="dfs" scheme="https://Castile.github.io/tags/dfs/"/>
    
      <category term="å¹¶æŸ¥é›†" scheme="https://Castile.github.io/tags/%E5%B9%B6%E6%9F%A5%E9%9B%86/"/>
    
      <category term="ä¸­ç­‰" scheme="https://Castile.github.io/tags/%E4%B8%AD%E7%AD%89/"/>
    
      <category term="æœç´¢" scheme="https://Castile.github.io/tags/%E6%90%9C%E7%B4%A2/"/>
    
  </entry>
  
  <entry>
    <title>leetcode-547-æœ‹å‹åœˆ</title>
    <link href="https://castile.github.io/2020/01/30/leetcode-547-%E6%9C%8B%E5%8F%8B%E5%9C%88/"/>
    <id>https://castile.github.io/2020/01/30/leetcode-547-%E6%9C%8B%E5%8F%8B%E5%9C%88/</id>
    <published>2020-01-30T06:15:07.000Z</published>
    <updated>2020-01-31T15:21:15.155Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="æè¿°"><a class="markdownIt-Anchor" href="#æè¿°"></a> æè¿°</h2><blockquote><p>Leetcode547ï¼šFriend_Circles æœ‹å‹åœˆ</p><p>ç­ä¸Šæœ‰ N åå­¦ç”Ÿã€‚å…¶ä¸­æœ‰äº›äººæ˜¯æœ‹å‹ï¼Œæœ‰äº›åˆ™ä¸æ˜¯ã€‚ä»–ä»¬çš„å‹è°Šå…·æœ‰æ˜¯<strong>ä¼ é€’æ€§</strong>ã€‚å¦‚æœå·²çŸ¥ A æ˜¯ B çš„æœ‹å‹ï¼ŒB æ˜¯ C çš„æœ‹å‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è®¤ä¸º A ä¹Ÿæ˜¯ C çš„æœ‹å‹ã€‚æ‰€è°“çš„æœ‹å‹åœˆï¼Œæ˜¯æŒ‡æ‰€æœ‰æœ‹å‹çš„é›†åˆã€‚</p><p>ç»™å®šä¸€ä¸ª N * N çš„çŸ©é˜µ Mï¼Œè¡¨ç¤ºç­çº§ä¸­å­¦ç”Ÿä¹‹é—´çš„æœ‹å‹å…³ç³»ã€‚å¦‚æœM[i][j] = 1ï¼Œè¡¨ç¤ºå·²çŸ¥ç¬¬ i ä¸ªå’Œ j ä¸ªå­¦ç”Ÿäº’ä¸ºæœ‹å‹å…³ç³»ï¼Œå¦åˆ™ä¸ºä¸çŸ¥é“ã€‚ä½ å¿…é¡»è¾“å‡ºæ‰€æœ‰å­¦ç”Ÿä¸­çš„å·²çŸ¥çš„æœ‹å‹åœˆæ€»æ•°ã€‚</p><p>ç¤ºä¾‹ 1:</p><p>è¾“å…¥:<br>[[1,1,0],<br>[1,1,0],<br>[0,0,1]]<br>è¾“å‡º: 2<br>è¯´æ˜ï¼šå·²çŸ¥å­¦ç”Ÿ0å’Œå­¦ç”Ÿ1äº’ä¸ºæœ‹å‹ï¼Œä»–ä»¬åœ¨ä¸€ä¸ªæœ‹å‹åœˆã€‚<br>ç¬¬2ä¸ªå­¦ç”Ÿè‡ªå·±åœ¨ä¸€ä¸ªæœ‹å‹åœˆã€‚æ‰€ä»¥è¿”å›2ã€‚<br>ç¤ºä¾‹ 2:</p><p>è¾“å…¥:<br>[[1,1,0],<br>[1,1,1],<br>[0,1,1]]<br>è¾“å‡º: 1<br>è¯´æ˜ï¼šå·²çŸ¥å­¦ç”Ÿ0å’Œå­¦ç”Ÿ1äº’ä¸ºæœ‹å‹ï¼Œå­¦ç”Ÿ1å’Œå­¦ç”Ÿ2äº’ä¸ºæœ‹å‹ï¼Œæ‰€ä»¥å­¦ç”Ÿ0å’Œå­¦ç”Ÿ2ä¹Ÿæ˜¯æœ‹å‹ï¼Œæ‰€ä»¥ä»–ä»¬ä¸‰ä¸ªåœ¨ä¸€ä¸ªæœ‹å‹åœˆï¼Œè¿”å›1ã€‚<br>æ³¨æ„ï¼š</p><p>N åœ¨[1,200]çš„èŒƒå›´å†…ã€‚<br>å¯¹äºæ‰€æœ‰å­¦ç”Ÿï¼Œæœ‰M[i][i] = 1ã€‚<br>å¦‚æœæœ‰M[i][j] = 1ï¼Œåˆ™æœ‰M[j][i] = 1ã€‚</p><p>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/friend-circles" target="_blank" rel="noopener">https://leetcode-cn.com/problems/friend-circles</a></p><p>å¹¶æŸ¥é›†ã€dfsã€bfs</p></blockquote><h2 id="åˆ†æ"><a class="markdownIt-Anchor" href="#åˆ†æ"></a> åˆ†æ</h2><ol><li><p>å¹¶æŸ¥é›†ï¼šè½¬åŒ–ä¸ºæ±‚è¿é€šä¸ªæ•°ã€‚ å¥½å‹å…³ç³»å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªæ— å‘å›¾ï¼Œä¾‹å¦‚ç¬¬ 0 ä¸ªäººä¸ç¬¬ 1 ä¸ªäººæ˜¯å¥½å‹ï¼Œ</p><p>é‚£ä¹ˆ M[0][1]å’Œ M[1][0]çš„å€¼éƒ½ä¸º 1ã€‚ å¾ˆç®€å•ç›´è§‚ã€‚</p><p>å¹¶æŸ¥é›†ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¹¶æŸ¥é›† UF</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UF</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count = <span class="number">0</span>; <span class="comment">// è¿é€šåˆ†é‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] parent;</span><br><span class="line">    <span class="comment">// æ–°å¢ä¸€ä¸ªæ•°ç»„è®°å½•æ ‘çš„â€œé‡é‡â€</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] size;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ„é€ </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UF</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123; <span class="comment">// nä¸ªå…ƒç´ </span></span><br><span class="line">        <span class="keyword">this</span>.count = n;</span><br><span class="line">        size = <span class="keyword">new</span>  <span class="keyword">int</span>[n];</span><br><span class="line">        parent = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">        <span class="comment">// ä¸€å¼€å§‹æ¯ä¸€ä¸ªèŠ‚ç‚¹è‡ªæˆä¸€ä¸ªé›†åˆï¼Œéƒ½ä¸è¿é€š</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;  i &lt; n;  i++)&#123;</span><br><span class="line">            parent[i]  = i; <span class="comment">// è‡ªå·±çš„çˆ¶èŠ‚ç‚¹æŒ‡å‘è‡ªå·±</span></span><br><span class="line">            size[i] = <span class="number">1</span>; <span class="comment">// æ¯éš”å‡ ä½•åªæœ‰è‡ªèº«ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> root = parent[x];</span><br><span class="line">        <span class="keyword">while</span> (parent[x] != x)&#123; <span class="comment">// è·¯å¾„å‹ç¼©</span></span><br><span class="line">            x = parent[x];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isSameSet</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> find(a) == find(b);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">count</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">union</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> rootA = find(a);</span><br><span class="line">        <span class="keyword">int</span> rootB = find(b);</span><br><span class="line">        <span class="keyword">if</span>(rootA == rootB)&#123;</span><br><span class="line">            <span class="keyword">return</span>; <span class="comment">// åŒä¸€ä¸ªé›†åˆä¸èƒ½åˆå¹¶</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(size[rootA] &gt; size[rootB])&#123;</span><br><span class="line">                parent[rootB] = rootA;</span><br><span class="line">                size[rootA] += size[rootB];</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                parent[rootA] = rootB;</span><br><span class="line">                size[rootB] += size[rootA];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        count--; <span class="comment">// è¿é€šåˆ†é‡ä¸ªæ•°å‡ä¸€</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li><li><p>dfsï¼š  ç»™å®šçš„çŸ©é˜µå¯ä»¥çœ‹æˆå›¾çš„é‚»æ¥çŸ©é˜µã€‚è¿™æ ·æˆ‘ä»¬çš„é—®é¢˜å¯ä»¥å˜æˆæ— å‘å›¾è¿é€šå—çš„ä¸ªæ•°ã€‚</p><blockquote><p>M=</p><p>[1 1 0 0 0 0<br>1 1 0 0 0 0</p></blockquote></li></ol><blockquote><p>0 0 1 1 1 0<br>0 0 1 1 0 0<br>0 0 1 0 1 0<br>0 0 0 0 0 1]</p></blockquote><p>â€‹ å¦‚æœæˆ‘ä»¬æŠŠ M çœ‹æˆå›¾çš„é‚»æ¥çŸ©é˜µï¼Œåˆ™å›¾ä¸ºï¼š</p><a href="/2020/01/30/leetcode-547-%E6%9C%8B%E5%8F%8B%E5%9C%88/1580390918176.png" data-fancybox="group" data-caption="è¿é€šåˆ†é‡" class="fancybox"><img alt="è¿é€šåˆ†é‡" style="zoom:80%;" data-src="/2020/01/30/leetcode-547-%E6%9C%8B%E5%8F%8B%E5%9C%88/1580390918176.png" class="lazyload" title="è¿é€šåˆ†é‡"></a><p>â€‹ åœ¨è¿™ä¸ªå›¾ä¸­ï¼Œç‚¹çš„ç¼–å·è¡¨ç¤ºçŸ©é˜µ M çš„ä¸‹æ ‡ï¼Œi å’Œ jä¹‹é—´æœ‰ä¸€æ¡è¾¹å½“ä¸”ä»…å½“M[i][j]ä¸º 1ã€‚</p><p>â€‹ä¸ºäº†æ‰¾åˆ°è¿é€šå—çš„ä¸ªæ•°ï¼Œä¸€ä¸ªç®€å•çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨æ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œä»æ¯ä¸ªèŠ‚ç‚¹å¼€å§‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå¤§å°ä¸º N çš„ visitedæ•°ç»„ï¼ˆMå¤§å°ä¸º NÃ—N ï¼‰ï¼Œè¿™æ · visited[i] è¡¨ç¤ºç¬¬ i ä¸ªå…ƒç´ æ˜¯å¦è¢«æ·±åº¦ä¼˜å…ˆæœç´¢è®¿é—®è¿‡ã€‚æ¯ä½¿ç”¨ä¸€æ¬¡æ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œå³é‡æ–°é€‰æ‹©äº†ä¸€ä¸ªç‚¹è¿›è¡Œdfsï¼Œè¿é€šåˆ†é‡çš„ä¸ªæ•°å°±åŠ ä¸€ã€‚</p><ol start="3"><li>bfs:  æ–¹æ³•ä¸dfsç±»ä¼¼ï¼Œåªæ˜¯éå†æ–¹å¼æ˜¯å±‚æ¬¡éå†ï¼Œ ä½¿ç”¨çš„æ•°æ®ç»“æ„æ˜¯é˜Ÿåˆ—ã€‚åœ¨å¹¿åº¦ä¼˜å…ˆæœç´¢ä¸­ï¼Œæˆ‘ä»¬ä»ä¸€ä¸ªç‰¹å®šç‚¹å¼€å§‹ï¼Œè®¿é—®æ‰€æœ‰é‚»æ¥çš„èŠ‚ç‚¹ã€‚ç„¶åå¯¹äºè¿™äº›é‚»æ¥èŠ‚ç‚¹ï¼Œæˆ‘ä»¬ä¾ç„¶é€šè¿‡è®¿é—®é‚»æ¥èŠ‚ç‚¹çš„æ–¹å¼ï¼ŒçŸ¥é“è®¿é—®æ‰€æœ‰å¯ä»¥åˆ°è¾¾çš„èŠ‚ç‚¹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æŒ‰ç…§ä¸€å±‚ä¸€å±‚çš„æ–¹å¼è®¿é—®èŠ‚ç‚¹ã€‚</li></ol><h2 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> search;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.Queue;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Hongliang Zhu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020-01-29 20:57</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">leetcode547_FriendCircles</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ·±åº¦ä¼˜å…ˆ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span>[][] M, <span class="keyword">int</span>[] visited, <span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; M.length; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (M[i][j] == <span class="number">1</span> &amp;&amp; visited[j] == <span class="number">0</span>) &#123; <span class="comment">// æ˜¯è¿é€šçš„å¹¶ä¸”è¿˜æœªè®¿é—®</span></span><br><span class="line">                visited[j] = <span class="number">1</span>;</span><br><span class="line">                dfs(M, visited, j);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">findCircleNum_DFS</span><span class="params">(<span class="keyword">int</span>[][] M)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> n = M.length;</span><br><span class="line">        <span class="keyword">int</span>[] visited = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (visited[i] == <span class="number">0</span>) &#123;</span><br><span class="line">                dfs(M, visited, i);</span><br><span class="line">                count++;  <span class="comment">// æ‰§è¡Œä¸€æ¬¡dfsè¡¨ç¤ºå¢åŠ äº†ä¸€ä¸ªè¿é€šå—</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        ä¸‹é¢ä½¿ç”¨å¹¶æŸ¥é›†</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">     <span class="keyword">static</span> <span class="keyword">int</span> []parents;</span><br><span class="line">     <span class="keyword">static</span> <span class="keyword">int</span> []size;</span><br><span class="line">     <span class="keyword">static</span> <span class="keyword">int</span> count1 = <span class="number">0</span>; <span class="comment">//  è¿é€šåˆ†é‡</span></span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">makeSet</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">         parents = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">         size = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">         count1 = n;</span><br><span class="line">         <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;  i &lt; n; i++)&#123;</span><br><span class="line">             size[i] = <span class="number">1</span>;</span><br><span class="line">             parents[i] = i;</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">     &#125;</span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> a)</span></span>&#123;</span><br><span class="line">         <span class="keyword">int</span> root = parents[a];</span><br><span class="line">         <span class="keyword">while</span>(root!= parents[root])&#123;</span><br><span class="line">             root = parents[root];</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">return</span> root;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">union</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">         <span class="keyword">int</span> roota = find(a);</span><br><span class="line">         <span class="keyword">int</span> rootb = find(b);</span><br><span class="line">         <span class="keyword">if</span>(roota != rootb)&#123;</span><br><span class="line">             <span class="keyword">if</span>(size[roota] &gt; size[rootb])&#123;</span><br><span class="line">                 parents[rootb] = roota;</span><br><span class="line">                 size[roota] = size[roota]+size[rootb];</span><br><span class="line">             &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                 parents[roota] = rootb;</span><br><span class="line">                 size[rootb] = size[roota]+size[rootb];</span><br><span class="line">             &#125;</span><br><span class="line">             count1--;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">findCircleNum</span><span class="params">(<span class="keyword">int</span>[][] M)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> n = M.length;</span><br><span class="line">        makeSet(n);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;  i&lt; n; i++)&#123;</span><br><span class="line">             <span class="keyword">for</span>( <span class="keyword">int</span> j = i+<span class="number">1</span>; j &lt; n; j++)&#123;</span><br><span class="line">                 <span class="keyword">if</span>(M[i][j] == <span class="number">1</span>)<span class="comment">// æœ‹å‹</span></span><br><span class="line">                 &#123;</span><br><span class="line">                     union(i, j);</span><br><span class="line">                 &#125;</span><br><span class="line">             &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> count1;  <span class="comment">// è¿”å›è¿é€šåˆ†é‡çš„ä¸ªæ•°</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¹¿åº¦ä¼˜å…ˆéå†</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">findCircleNum_BFS</span><span class="params">(<span class="keyword">int</span>[][] M)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = M.length;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span>[] visited = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">        Queue&lt;Integer&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(visited[i] == <span class="number">0</span>)&#123;</span><br><span class="line">                queue.add(i);</span><br><span class="line">                <span class="keyword">while</span> (!queue.isEmpty())&#123;</span><br><span class="line">                    <span class="keyword">int</span> k = queue.remove();</span><br><span class="line">                    visited[k] = <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++)&#123;</span><br><span class="line">                        <span class="keyword">if</span>(M[k][j] == <span class="number">1</span> &amp;&amp; visited[j] == <span class="number">0</span>)</span><br><span class="line">                            queue.add(j);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                count++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line"></span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[][] M = &#123;&#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line">        System.out.println(findCircleNum_DFS(M));  <span class="comment">// 2</span></span><br><span class="line">        System.out.println(findCircleNum_BFS(M));<span class="comment">// 2</span></span><br><span class="line">        System.out.println(findCircleNum(M));<span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>æ³¨ï¼š ä½¿ç”¨å¹¶æŸ¥é›†é€Ÿåº¦æœ€å¿«ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Algorithm" scheme="https://Castile.github.io/categories/Algorithm/"/>
    
    
      <category term="ç®—æ³•" scheme="https://Castile.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="dfs" scheme="https://Castile.github.io/tags/dfs/"/>
    
      <category term="å¹¶æŸ¥é›†" scheme="https://Castile.github.io/tags/%E5%B9%B6%E6%9F%A5%E9%9B%86/"/>
    
      <category term="ä¸­ç­‰" scheme="https://Castile.github.io/tags/%E4%B8%AD%E7%AD%89/"/>
    
      <category term="æœç´¢" scheme="https://Castile.github.io/tags/%E6%90%9C%E7%B4%A2/"/>
    
      <category term="bfs" scheme="https://Castile.github.io/tags/bfs/"/>
    
  </entry>
  
  <entry>
    <title>Javaå…³é”®å­—</title>
    <link href="https://castile.github.io/2020/01/29/Java%E5%85%B3%E9%94%AE%E5%AD%97/"/>
    <id>https://castile.github.io/2020/01/29/Java%E5%85%B3%E9%94%AE%E5%AD%97/</id>
    <published>2020-01-29T02:19:02.000Z</published>
    <updated>2020-01-29T03:16:50.490Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="final"><a class="markdownIt-Anchor" href="#final"></a> final</h1><h2 id="1-æ•°æ®"><a class="markdownIt-Anchor" href="#1-æ•°æ®"></a> <strong>1. æ•°æ®</strong></h2><p>å£°æ˜æ•°æ®ä¸ºå¸¸é‡ï¼Œå¯ä»¥æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼Œä¹Ÿå¯ä»¥æ˜¯åœ¨è¿è¡Œæ—¶è¢«åˆå§‹åŒ–åä¸èƒ½è¢«æ”¹å˜çš„å¸¸é‡ã€‚</p><ul><li>å¯¹äºåŸºæœ¬ç±»å‹ï¼Œfinal ä½¿æ•°å€¼ä¸å˜ï¼›</li><li>å¯¹äºå¼•ç”¨ç±»å‹ï¼Œfinal ä½¿å¼•ç”¨ä¸å˜ï¼Œä¹Ÿå°±ä¸èƒ½å¼•ç”¨å…¶å®ƒå¯¹è±¡ï¼Œä½†æ˜¯è¢«å¼•ç”¨çš„å¯¹è±¡æœ¬èº«æ˜¯å¯ä»¥ä¿®æ”¹çš„ã€‚</li></ul><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="keyword">int</span> x = <span class="number">1</span>;</span><br><span class="line"><span class="comment">// x = 2;  // cannot assign value to final variable 'x'</span></span><br><span class="line"><span class="keyword">final</span> A y = <span class="keyword">new</span> A();</span><br><span class="line">y.a = <span class="number">1</span>;</span><br></pre></td></tr></table></figure></div><h2 id="2-æ–¹æ³•"><a class="markdownIt-Anchor" href="#2-æ–¹æ³•"></a> <strong>2. æ–¹æ³•</strong></h2><p>å£°æ˜æ–¹æ³•ä¸èƒ½è¢«å­ç±»é‡å†™ã€‚</p><p>private æ–¹æ³•éšå¼åœ°è¢«æŒ‡å®šä¸º finalï¼Œå¦‚æœåœ¨å­ç±»ä¸­å®šä¹‰çš„æ–¹æ³•å’ŒåŸºç±»ä¸­çš„ä¸€ä¸ª private æ–¹æ³•ç­¾åç›¸åŒï¼Œæ­¤æ—¶å­ç±»çš„æ–¹æ³•ä¸æ˜¯é‡å†™åŸºç±»æ–¹æ³•ï¼Œ<strong>è€Œæ˜¯åœ¨å­ç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªæ–°çš„æ–¹æ³•ã€‚</strong></p><h2 id="3-ç±»"><a class="markdownIt-Anchor" href="#3-ç±»"></a> <strong>3. ç±»</strong></h2><p>å£°æ˜ç±»ä¸å…è®¸è¢«ç»§æ‰¿ã€‚</p><h1 id="static"><a class="markdownIt-Anchor" href="#static"></a> static</h1><h2 id="1-é™æ€å˜é‡"><a class="markdownIt-Anchor" href="#1-é™æ€å˜é‡"></a> <strong>1. é™æ€å˜é‡</strong></h2><ul><li>é™æ€å˜é‡ï¼šåˆç§°ä¸ºç±»å˜é‡ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªå˜é‡å±äºç±»çš„ï¼Œç±»æ‰€æœ‰çš„å®ä¾‹éƒ½å…±äº«é™æ€å˜é‡ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ç±»åæ¥è®¿é—®å®ƒã€‚é™æ€å˜é‡åœ¨å†…å­˜ä¸­åªå­˜åœ¨ä¸€ä»½ã€‚</li><li>å®ä¾‹å˜é‡ï¼šæ¯åˆ›å»ºä¸€ä¸ªå®ä¾‹å°±ä¼šäº§ç”Ÿä¸€ä¸ªå®ä¾‹å˜é‡ï¼Œå®ƒä¸è¯¥å®ä¾‹åŒç”Ÿå…±æ­»ã€‚</li></ul><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> x;         <span class="comment">// å®ä¾‹å˜é‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> y;  <span class="comment">// é™æ€å˜é‡</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// int x = A.x;  // Non-static field 'x' cannot be referenced from a static context</span></span><br><span class="line">        A a = <span class="keyword">new</span> A();</span><br><span class="line">        <span class="keyword">int</span> x = a.x;</span><br><span class="line">        <span class="keyword">int</span> y = A.y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h2 id="2-é™æ€æ–¹æ³•"><a class="markdownIt-Anchor" href="#2-é™æ€æ–¹æ³•"></a> <strong>2. é™æ€æ–¹æ³•</strong></h2><p>é™æ€æ–¹æ³•åœ¨ç±»åŠ è½½çš„æ—¶å€™å°±å­˜åœ¨äº†ï¼Œå®ƒä¸ä¾èµ–äºä»»ä½•å®ä¾‹ã€‚æ‰€ä»¥é™æ€æ–¹æ³•å¿…é¡»æœ‰å®ç°ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä¸èƒ½æ˜¯æŠ½è±¡æ–¹æ³•ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">func1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// public abstract static void func2();  // Illegal combination of modifiers: 'abstract' and 'static'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>åªèƒ½è®¿é—®æ‰€å±ç±»çš„é™æ€å­—æ®µå’Œé™æ€æ–¹æ³•ï¼Œæ–¹æ³•ä¸­ä¸èƒ½æœ‰ this å’Œ super å…³é”®å­—ï¼Œå› æ­¤è¿™ä¸¤ä¸ªå…³é”®å­—ä¸å…·ä½“å¯¹è±¡å…³è”ã€‚ å³é™æ€åŸŸä¸­ä¸èƒ½è®¿é—®éé™æ€çš„ï¼Œå› ä¸ºé™æ€çš„å˜é‡æ˜¯å…ˆäºå¯¹è±¡ï¼ˆæˆ–è€…éé™æ€ï¼‰å‡ºç°ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> y;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">func1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> a = x;</span><br><span class="line">        <span class="comment">// int b = y;  // Non-static field 'y' cannot be referenced from a static context</span></span><br><span class="line">        <span class="comment">// int b = this.y;     // 'A.this' cannot be referenced from a static context</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h2 id="3-é™æ€è¯­å¥å—"><a class="markdownIt-Anchor" href="#3-é™æ€è¯­å¥å—"></a> <strong>3. é™æ€è¯­å¥å—</strong></h2><p>é™æ€è¯­å¥å—åœ¨ç±»åˆå§‹åŒ–æ—¶è¿è¡Œä¸€æ¬¡ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">"123"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        A a1 = <span class="keyword">new</span> A();</span><br><span class="line">        A a2 = <span class="keyword">new</span> A();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœåªè¾“å‡ºä¸€æ¬¡â€œ123â€</span></span><br></pre></td></tr></table></figure></div><h2 id="4-é™æ€å†…éƒ¨ç±»"><a class="markdownIt-Anchor" href="#4-é™æ€å†…éƒ¨ç±»"></a> <strong>4. é™æ€å†…éƒ¨ç±»</strong></h2><h3 id="å†…éƒ¨ç±»"><a class="markdownIt-Anchor" href="#å†…éƒ¨ç±»"></a> å†…éƒ¨ç±»</h3><blockquote><p>å¤§éƒ¨åˆ†æ—¶å€™ï¼Œç±»è¢«å®šä¹‰æˆä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºå•å…ƒã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¹Ÿä¼šæŠŠä¸€ä¸ªç±»æ”¾åœ¨å¦ä¸€ä¸ªç±»çš„å†…éƒ¨å®šä¹‰ï¼Œè¿™ä¸ªå®šä¹‰åœ¨å…¶ä»–ç±»å†…éƒ¨çš„ç±»å°±è¢«ç§°ä¸ºå†…éƒ¨ç±»ï¼ˆæœ‰äº›åœ°æ–¹ä¹Ÿå«åšåµŒå¥—ç±»ï¼‰ï¼ŒåŒ…å«å†…éƒ¨ç±»çš„ç±»ä¹Ÿè¢«ç§°ä¸ºå¤–éƒ¨ç±»ï¼ˆæœ‰äº›åœ°æ–¹ä¹Ÿå«åšå®¿ä¸»ç±»ï¼‰</p></blockquote><h3 id="å†…éƒ¨ç±»çš„ä½œç”¨"><a class="markdownIt-Anchor" href="#å†…éƒ¨ç±»çš„ä½œç”¨"></a> å†…éƒ¨ç±»çš„ä½œç”¨</h3><blockquote><ul><li>æ›´å¥½çš„å°è£…æ€§</li><li>å†…éƒ¨ç±»æˆå‘˜å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„ç§æœ‰æ•°æ®ï¼Œå› ä¸ºå†…éƒ¨ç±»è¢«å½“æˆå…¶å¤–éƒ¨ç±»æˆå‘˜ï¼Œä½†å¤–éƒ¨ç±»ä¸èƒ½è®¿é—®å†…éƒ¨ç±»çš„å®ç°ç»†èŠ‚ï¼Œä¾‹å¦‚å†…éƒ¨ç±»çš„æˆå‘˜å˜é‡</li><li>åŒ¿åå†…éƒ¨ç±»é€‚åˆç”¨äºåˆ›å»ºé‚£äº›ä»…éœ€è¦ä¸€æ¬¡ä½¿ç”¨çš„ç±»</li></ul></blockquote><p>ä½¿ç”¨staticæ¥ä¿®é¥°ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œåˆ™è¿™ä¸ªå†…éƒ¨ç±»å°±å±äºå¤–éƒ¨ç±»æœ¬èº«ï¼Œè€Œä¸å±äºå¤–éƒ¨ç±»çš„æŸä¸ªå¯¹è±¡ã€‚ç§°ä¸ºé™æ€å†…éƒ¨ç±»ï¼ˆä¹Ÿå¯ç§°ä¸ºç±»å†…éƒ¨ç±»ï¼‰ï¼Œè¿™æ ·çš„å†…éƒ¨ç±»æ˜¯ç±»çº§åˆ«çš„ï¼Œ<strong>staticå…³é”®å­—çš„ä½œç”¨æ˜¯æŠŠç±»çš„æˆå‘˜å˜æˆç±»ç›¸å…³ï¼Œè€Œä¸æ˜¯å®ä¾‹ç›¸å…³ ã€‚</strong></p><p>æ³¨æ„ï¼š</p><ol><li>éé™æ€å†…éƒ¨ç±»ä¸­ä¸å…è®¸å®šä¹‰é™æ€æˆå‘˜<br>2. å¤–éƒ¨ç±»çš„é™æ€æˆå‘˜ä¸å¯ä»¥ç›´æ¥ä½¿ç”¨éé™æ€å†…éƒ¨ç±»<br>3. é™æ€å†…éƒ¨ç±»ï¼Œä¸èƒ½è®¿é—®å¤–éƒ¨ç±»çš„å®ä¾‹æˆå‘˜ï¼Œåªèƒ½è®¿é—®å¤–éƒ¨ç±»çš„ç±»æˆå‘˜</li></ol><ul><li>åœ¨å»ºé€ è€…æ¨¡å¼ä¸­æœ‰ä½¿ç”¨ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ<a href="https://blog.csdn.net/cd18333612683/article/details/79129503" target="_blank" rel="noopener">é“¾æ¥</a></li></ul><p>éé™æ€å†…éƒ¨ç±»ä¾èµ–äºå¤–éƒ¨ç±»çš„å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯è¯´éœ€è¦å…ˆåˆ›å»ºå¤–éƒ¨ç±»å®ä¾‹ï¼Œæ‰èƒ½ç”¨è¿™ä¸ªå®ä¾‹å»åˆ›å»ºéé™æ€å†…éƒ¨ç±»ã€‚è€Œé™æ€å†…éƒ¨ç±»ä¸éœ€è¦ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OuterClass</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">InnerClass</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticInnerClass</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// InnerClass innerClass = new InnerClass(); // 'OuterClass.this' cannot be referenced from a static context</span></span><br><span class="line">        OuterClass outerClass = <span class="keyword">new</span> OuterClass();</span><br><span class="line">        InnerClass innerClass = outerClass.<span class="keyword">new</span> InnerClass();</span><br><span class="line">        StaticInnerClass staticInnerClass = <span class="keyword">new</span> StaticInnerClass();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;Copy to clipboardErrorCopied</span><br></pre></td></tr></table></figure></div><p>é™æ€å†…éƒ¨ç±»ä¸èƒ½è®¿é—®å¤–éƒ¨ç±»çš„éé™æ€çš„å˜é‡å’Œæ–¹æ³•ã€‚</p><h2 id="5-é™æ€å¯¼åŒ…"><a class="markdownIt-Anchor" href="#5-é™æ€å¯¼åŒ…"></a> <strong>5. é™æ€å¯¼åŒ…</strong></h2><p>åœ¨ä½¿ç”¨é™æ€å˜é‡å’Œæ–¹æ³•æ—¶ä¸ç”¨å†æŒ‡æ˜ ClassNameï¼Œä»è€Œç®€åŒ–ä»£ç ï¼Œä½†å¯è¯»æ€§å¤§å¤§é™ä½ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> com.xxx.ClassName.*</span><br></pre></td></tr></table></figure></div><p>ä¸€èˆ¬æˆ‘ä»¬å¯¼å…¥ä¸€ä¸ªç±»éƒ½ç”¨ <code>import comâ€¦..ClassName;</code></p><p>è€Œé™æ€å¯¼å…¥æ˜¯è¿™æ ·ï¼š<code>import static comâ€¦..ClassName.*;</code>  è¿™é‡Œçš„å¤šäº†ä¸ªstaticï¼Œè¿˜æœ‰å°±æ˜¯ç±»åClassNameåé¢å¤šäº†ä¸ª.* ï¼Œæ„æ€æ˜¯å¯¼å…¥è¿™ä¸ªç±»é‡Œçš„é™æ€æ–¹æ³•ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥åªå¯¼å…¥æŸä¸ªé™æ€æ–¹æ³•ï¼Œåªè¦æŠŠ .* æ¢æˆé™æ€æ–¹æ³•åå°±è¡Œäº†ã€‚ç„¶ååœ¨è¿™ä¸ªç±»ä¸­ï¼Œå°±å¯ä»¥ç›´æ¥ç”¨æ–¹æ³•åè°ƒç”¨é™æ€æ–¹æ³•ï¼Œè€Œä¸å¿…ç”¨ClassName.æ–¹æ³•å çš„æ–¹å¼æ¥è°ƒç”¨ã€‚</p><p><strong><code>å¥½å¤„ï¼š</code></strong></p><p>è¿™ç§æ–¹æ³•çš„å¥½å¤„å°±æ˜¯å¯ä»¥ç®€åŒ–ä¸€äº›æ“ä½œï¼Œä¾‹å¦‚æ‰“å°æ“ä½œSystem.out.println(â€¦); å°±å¯ä»¥å°†å…¶å†™å…¥ä¸€ä¸ªé™æ€æ–¹</p><p>æ³•print(â€¦)ï¼Œåœ¨ä½¿ç”¨æ—¶ç›´æ¥print(â€¦)å°±å¯ä»¥äº†ã€‚ä½†æ˜¯è¿™ç§æ–¹æ³•å»ºè®®åœ¨æœ‰å¾ˆå¤šé‡å¤è°ƒç”¨çš„æ—¶å€™ä½¿ç”¨ï¼Œå¦‚æœä»…æœ‰ä¸€åˆ°ä¸¤æ¬¡è°ƒç”¨ï¼Œä¸å¦‚ç›´æ¥å†™æ¥çš„æ–¹ä¾¿ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.System.out;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Hongliang Zhu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020-01-29 10:40</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">keywords</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        out.println(<span class="string">"hello"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h2 id="6-åˆå§‹åŒ–é¡ºåº"><a class="markdownIt-Anchor" href="#6-åˆå§‹åŒ–é¡ºåº"></a> <strong>6. åˆå§‹åŒ–é¡ºåº</strong></h2><p>é™æ€å˜é‡å’Œé™æ€è¯­å¥å—ä¼˜å…ˆäºå®ä¾‹å˜é‡å’Œæ™®é€šè¯­å¥å—ï¼Œé™æ€å˜é‡å’Œé™æ€è¯­å¥å—çš„åˆå§‹åŒ–é¡ºåºå–å†³äºå®ƒä»¬åœ¨ä»£ç ä¸­çš„é¡ºåºã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String staticField = <span class="string">"é™æ€å˜é‡"</span>;</span><br></pre></td></tr></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">"é™æ€è¯­å¥å—"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String field = <span class="string">"å®ä¾‹å˜é‡"</span>;</span><br></pre></td></tr></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    System.out.println(<span class="string">"æ™®é€šè¯­å¥å—"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>æœ€åæ‰æ˜¯æ„é€ å‡½æ•°çš„åˆå§‹åŒ–</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">InitialOrderTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"æ„é€ å‡½æ•°"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>å­˜åœ¨ç»§æ‰¿çš„æƒ…å†µä¸‹ï¼Œåˆå§‹åŒ–é¡ºåºä¸ºï¼š</p><ul><li>çˆ¶ç±»ï¼ˆé™æ€å˜é‡ã€é™æ€è¯­å¥å—ï¼‰</li><li>å­ç±»ï¼ˆé™æ€å˜é‡ã€é™æ€è¯­å¥å—ï¼‰</li><li>çˆ¶ç±»ï¼ˆå®ä¾‹å˜é‡ã€æ™®é€šè¯­å¥å—ï¼‰</li><li>çˆ¶ç±»ï¼ˆæ„é€ å‡½æ•°ï¼‰</li><li>å­ç±»ï¼ˆå®ä¾‹å˜é‡ã€æ™®é€šè¯­å¥å—ï¼‰</li><li>å­ç±»ï¼ˆæ„é€ å‡½æ•°ï¼‰</li></ul><h1 id="å‚è€ƒ"><a class="markdownIt-Anchor" href="#å‚è€ƒ"></a> å‚è€ƒ</h1><ol><li><p><a href="https://cyc2018.github.io/CS-Notes" target="_blank" rel="noopener">https://cyc2018.github.io/CS-Notes</a></p></li><li><p><a href="https://blog.csdn.net/cd18333612683/article/details/79129503" target="_blank" rel="noopener">https://blog.csdn.net/cd18333612683/article/details/79129503</a></p></li><li><p><a href="https://blog.csdn.net/u012338954/article/details/51010337" target="_blank" rel="noopener">https://blog.csdn.net/u012338954/article/details/51010337</a></p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Java" scheme="https://Castile.github.io/categories/Java/"/>
    
    
      <category term="Java" scheme="https://Castile.github.io/tags/Java/"/>
    
      <category term="JavaåŸºç¡€" scheme="https://Castile.github.io/tags/Java%E5%9F%BA%E7%A1%80/"/>
    
      <category term="å…³é”®å­—" scheme="https://Castile.github.io/tags/%E5%85%B3%E9%94%AE%E5%AD%97/"/>
    
  </entry>
  
  <entry>
    <title>leetcode-990-ç­‰å¼æ–¹ç¨‹çš„å¯æ»¡è¶³æ€§</title>
    <link href="https://castile.github.io/2020/01/28/leetcode-990-%E7%AD%89%E5%BC%8F%E6%96%B9%E7%A8%8B%E7%9A%84%E5%8F%AF%E6%BB%A1%E8%B6%B3%E6%80%A7/"/>
    <id>https://castile.github.io/2020/01/28/leetcode-990-%E7%AD%89%E5%BC%8F%E6%96%B9%E7%A8%8B%E7%9A%84%E5%8F%AF%E6%BB%A1%E8%B6%B3%E6%80%A7/</id>
    <published>2020-01-28T14:45:18.000Z</published>
    <updated>2020-01-28T14:56:47.405Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="æè¿°"><a class="markdownIt-Anchor" href="#æè¿°"></a> æè¿°</h2><blockquote><p>ç»™å®šä¸€ä¸ªç”±è¡¨ç¤ºå˜é‡ä¹‹é—´å…³ç³»çš„å­—ç¬¦ä¸²æ–¹ç¨‹ç»„æˆçš„æ•°ç»„ï¼Œæ¯ä¸ªå­—ç¬¦ä¸²æ–¹ç¨‹ equations[i] çš„é•¿åº¦ä¸º 4ï¼Œå¹¶é‡‡ç”¨ä¸¤ç§ä¸åŒçš„å½¢å¼ä¹‹ä¸€ï¼šâ€œa==bâ€ æˆ– â€œa!=bâ€ã€‚åœ¨è¿™é‡Œï¼Œa å’Œ b æ˜¯å°å†™å­—æ¯ï¼ˆä¸ä¸€å®šä¸åŒï¼‰ï¼Œè¡¨ç¤ºå•å­—æ¯å˜é‡åã€‚åªæœ‰å½“å¯ä»¥å°†æ•´æ•°åˆ†é…ç»™å˜é‡åï¼Œä»¥ä¾¿æ»¡è¶³æ‰€æœ‰ç»™å®šçš„æ–¹ç¨‹æ—¶æ‰è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><p>è¾“å…¥ï¼š[â€œa==bâ€,â€œb!=aâ€]<br>è¾“å‡ºï¼šfalse<br>è§£é‡Šï¼šå¦‚æœæˆ‘ä»¬æŒ‡å®šï¼Œa = 1 ä¸” b = 1ï¼Œé‚£ä¹ˆå¯ä»¥æ»¡è¶³ç¬¬ä¸€ä¸ªæ–¹ç¨‹ï¼Œä½†æ— æ³•æ»¡è¶³ç¬¬äºŒä¸ªæ–¹ç¨‹ã€‚æ²¡æœ‰åŠæ³•åˆ†é…å˜é‡åŒæ—¶æ»¡è¶³è¿™ä¸¤ä¸ªæ–¹ç¨‹ã€‚<br>ç¤ºä¾‹ 2ï¼š</p><p>è¾“å‡ºï¼š[â€œb<mark>a&quot;ï¼Œ     &quot;a</mark>bâ€]<br>è¾“å…¥ï¼štrue<br>è§£é‡Šï¼šæˆ‘ä»¬å¯ä»¥æŒ‡å®š a = 1 ä¸” b = 1 ä»¥æ»¡è¶³æ»¡è¶³è¿™ä¸¤ä¸ªæ–¹ç¨‹ã€‚<br>ç¤ºä¾‹ 3ï¼š</p><p>è¾“å…¥ï¼š[â€œa<mark>b&quot;,&quot;b</mark>câ€,â€œa==câ€]<br>è¾“å‡ºï¼štrue<br>ç¤ºä¾‹ 4ï¼š</p><p>è¾“å…¥ï¼š[â€œa<mark>b&quot;, â€œb!=câ€,&quot;c</mark>aâ€]<br>è¾“å‡ºï¼šfalse<br>ç¤ºä¾‹ 5ï¼š</p><p>è¾“å…¥ï¼š[â€œc<mark>c&quot;, &quot;b</mark>dâ€, â€œx!=zâ€]<br>è¾“å‡ºï¼štrue</p><p>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/satisfiability-of-equality-equations" target="_blank" rel="noopener">https://leetcode-cn.com/problems/satisfiability-of-equality-equations</a></p></blockquote><h2 id="åˆ†æ"><a class="markdownIt-Anchor" href="#åˆ†æ"></a> åˆ†æ</h2><ol><li><p>æ ¹æ®ç­‰å¼çš„ä¼ é€’æ€§ï¼Œå¯ä»¥æƒ³åˆ°ä½¿ç”¨å¹¶æŸ¥é›†éå¸¸å¿«é€Ÿå¯ä»¥è§£å†³æ­¤é¢˜ã€‚åŠ¨æ€è¿é€šæ€§å…¶å®å°±æ˜¯ä¸€ç§ç­‰ä»·å…³ç³»ï¼Œå…·æœ‰ã€Œè‡ªåæ€§ã€ã€Œä¼ é€’æ€§ã€å’Œã€Œå¯¹ç§°æ€§ã€ï¼Œå…¶å® <code>==</code> å…³ç³»ä¹Ÿæ˜¯ä¸€ç§ç­‰ä»·å…³ç³»ï¼Œå…·æœ‰è¿™äº›æ€§è´¨ã€‚æ‰€ä»¥è¿™ä¸ªé—®é¢˜ç”¨ Union-Find ç®—æ³•å°±å¾ˆè‡ªç„¶ã€‚</p><p><strong>æ ¸å¿ƒæ€æƒ³</strong>æ˜¯ï¼Œ<strong>å°†</strong> <strong><code>equations</code></strong> <strong>ä¸­çš„ç®—å¼æ ¹æ®</strong> <strong><code>==</code></strong> <strong>å’Œ</strong> <strong><code>!=</code></strong> <strong>åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œå…ˆå¤„ç†</strong> <strong><code>==</code></strong> <strong>ç®—å¼ï¼Œä½¿å¾—ä»–ä»¬é€šè¿‡ç›¸ç­‰å…³ç³»å„è‡ªå‹¾ç»“æˆé—¨æ´¾ï¼›ç„¶åå¤„ç†</strong> <strong><code>!=</code></strong> <strong>ç®—å¼ï¼Œæ£€æŸ¥ä¸ç­‰å…³ç³»æ˜¯å¦ç ´åäº†ç›¸ç­‰å…³ç³»çš„è¿é€šæ€§</strong>ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Hongliang Zhu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020-01-28 21:28</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">leetcode990_SatisfiabilityOfEqualityEquations</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¹¶æŸ¥é›†</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">equationsPossible</span><span class="params">(String[] equations)</span> </span>&#123;</span><br><span class="line">        UF uf = <span class="keyword">new</span> UF(<span class="number">26</span>); <span class="comment">// 26ä¸ªå­—æ¯</span></span><br><span class="line">        <span class="comment">// æ‰€æœ‰ç­‰å¼è¿é€š</span></span><br><span class="line">        <span class="keyword">for</span> (String eq : equations) &#123;</span><br><span class="line">            <span class="keyword">if</span> (eq.charAt(<span class="number">1</span>) == <span class="string">'='</span>) &#123; <span class="comment">// åˆ¤æ–­ä¸ºç­‰å¼</span></span><br><span class="line">                <span class="keyword">char</span> x = eq.charAt(<span class="number">0</span>);</span><br><span class="line">                <span class="keyword">char</span> y = eq.charAt(<span class="number">3</span>);</span><br><span class="line">                uf.union(x - <span class="string">'a'</span>, y - <span class="string">'a'</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­ä¸ç­‰å¼ä¼šä¸ä¼šç ´åè¿é€šæ€§</span></span><br><span class="line">        <span class="keyword">for</span> (String eq : equations) &#123;</span><br><span class="line">            <span class="keyword">if</span> (eq.charAt(<span class="number">1</span>) == <span class="string">'!'</span>) &#123; <span class="comment">// åˆ¤æ–­ä¸ºä¸ç­‰å¼</span></span><br><span class="line">                <span class="keyword">char</span> x = eq.charAt(<span class="number">0</span>);</span><br><span class="line">                <span class="keyword">char</span> y = eq.charAt(<span class="number">3</span>);</span><br><span class="line">                <span class="keyword">if</span> (uf.isSameSet(x - <span class="string">'a'</span>, y - <span class="string">'a'</span>)) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String[] equations1 = &#123;<span class="string">"c==c"</span>, <span class="string">"b==d"</span>, <span class="string">"x!=z"</span>&#125;; </span><br><span class="line">        System.out.println(equationsPossible(equations1)); <span class="comment">// true</span></span><br><span class="line">        String[] equations2 = &#123;<span class="string">"a==b"</span>, <span class="string">"b==c"</span>, <span class="string">"a==c"</span>&#125;;</span><br><span class="line">        System.out.println(equationsPossible(equations2)); <span class="comment">// true</span></span><br><span class="line">        String[] equations3 = &#123;<span class="string">"b==a"</span>, <span class="string">"a!=b"</span>&#125;;</span><br><span class="line">        System.out.println(equationsPossible(equations3)); <span class="comment">// fasle</span></span><br><span class="line">     </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li><li><p>dfsï¼Œå›¾çš„è”é€šæ€§ï¼ŒæŸ“è‰²é—®é¢˜ï¼Œè¿™æ˜¯leetcodeå®˜æ–¹é¢˜è§£ï¼š</p><p>â€‹æ€è·¯ï¼š æ‰€æœ‰ç›¸äº’ç­‰äºçš„å˜é‡èƒ½ç»„æˆä¸€ä¸ªè”é€šåˆ†é‡ã€‚ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œå¦‚æœ <code>a=b, b=c, c=d</code>ï¼Œé‚£ä¹ˆ <code>a, b, c, d</code> å°±åœ¨åŒä¸€ä¸ªè”é€šåˆ†é‡ä¸­ï¼Œå› ä¸ºå®ƒä»¬å¿…é¡»ç›¸ç­‰ã€‚</p></li></ol><p>â€‹ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬åŸºäºç»™å®šçš„ç­‰å¼ï¼Œç”¨æ·±åº¦ä¼˜å…ˆéå†å°†æ¯ä¸€ä¸ªå˜é‡æŒ‰ç…§è”é€šåˆ†é‡æŸ“è‰²ã€‚</p><p>â€‹å°†è”é€šåˆ†é‡æŸ“è‰²ä¹‹åï¼Œæˆ‘ä»¬åˆ†æå½¢å¦‚ a != b çš„ä¸ç­‰å¼ã€‚å¦‚æœä¸¤ä¸ªåˆ†é‡æœ‰ç›¸åŒçš„é¢œè‰²ï¼Œé‚£ä¹ˆå®ƒä»¬ä¸€å®šç›¸ç­‰ï¼Œå› æ­¤å¦‚æœè¯´å®ƒä»¬ä¸ç›¸ç­‰çš„è¯ï¼Œå°±ä¸€å®šæ— æ³•æ»¡è¶³ç»™å®šçš„æ–¹ç¨‹ç»„ã€‚è¿”å›falseã€‚</p><h2 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Hongliang Zhu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020-01-28 21:28</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">leetcode990_SatisfiabilityOfEqualityEquations</span> </span>&#123;</span><br><span class="line">    <span class="comment">//è¿é€š æŸ“è‰²</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">equationsPossible_DFS</span><span class="params">(String[] equations)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;Integer&gt;[] graph = <span class="keyword">new</span> ArrayList[<span class="number">26</span>]; <span class="comment">// 26ä¸ªå­—æ¯</span></span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++) &#123;</span><br><span class="line">            graph[i] = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ç­‰å¼è¿›è¡Œè¿é€š</span></span><br><span class="line">        <span class="keyword">for</span> (String eq : equations) &#123;</span><br><span class="line">            <span class="keyword">if</span> (eq.charAt(<span class="number">1</span>) == <span class="string">'='</span>) &#123;</span><br><span class="line">                <span class="keyword">char</span> x = eq.charAt(<span class="number">0</span>);</span><br><span class="line">                <span class="keyword">char</span> y = eq.charAt(<span class="number">3</span>);</span><br><span class="line">                graph[x - <span class="string">'a'</span>].add(y - <span class="string">'a'</span>);</span><br><span class="line">                graph[y - <span class="string">'a'</span>].add(x - <span class="string">'a'</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[] color = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">26</span>]; <span class="comment">// å‡†å¤‡26ç§é¢œè‰²</span></span><br><span class="line">        <span class="keyword">int</span> t = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (color[i] == <span class="number">0</span>) &#123; <span class="comment">// ç¬¬iä¸ªå­—æ¯è¿˜æ²¡æŸ“è‰²</span></span><br><span class="line">                t++; <span class="comment">// å¢åŠ ä¸€ç§é¢œè‰²</span></span><br><span class="line">                Stack&lt;Integer&gt; s = <span class="keyword">new</span> Stack&lt;Integer&gt;();</span><br><span class="line">                s.push(i);</span><br><span class="line">                <span class="keyword">while</span> (!s.isEmpty()) &#123;</span><br><span class="line">                    <span class="keyword">int</span> node = s.pop();</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> nn : graph[node]) &#123;<span class="comment">// å–å‡ºä¸nodeè¿é€šçš„æ‰€æœ‰ç‚¹ï¼Œ å³å–å‡ºç­‰å¼ä¸¤è¾¹çš„å­—æ¯</span></span><br><span class="line">                        <span class="keyword">if</span> (color[nn] == <span class="number">0</span>) &#123;</span><br><span class="line">                            color[nn] = t; <span class="comment">// è¿é€šçš„èŠ‚ç‚¹è®¾ç½®æˆç›¸åŒçš„é¢œè‰²</span></span><br><span class="line">                            s.push(nn); <span class="comment">//  å°†ä¸ä¹‹è¿é€šçš„èŠ‚ç‚¹è¿›æ ˆï¼Œå®ç°ç­‰å¼ä¼ é€’æ€§çš„åŠŸèƒ½</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ£€æŸ¥ä¸ç­‰å¼çš„åˆæ³•æ€§</span></span><br><span class="line">        <span class="keyword">for</span> (String eq : equations) &#123;</span><br><span class="line">            <span class="keyword">if</span> (eq.charAt(<span class="number">1</span>) == <span class="string">'!'</span>) &#123;</span><br><span class="line">                <span class="keyword">int</span> x = eq.charAt(<span class="number">0</span>) - <span class="string">'a'</span>;</span><br><span class="line">                <span class="keyword">int</span> y = eq.charAt(<span class="number">3</span>) - <span class="string">'a'</span>;</span><br><span class="line">                <span class="keyword">if</span> (x == y || color[x] != <span class="number">0</span> &amp;&amp; color[x] == color[y]) &#123; <span class="comment">// å­—æ¯ç›¸ç­‰ï¼Œé¢œè‰²ç›¸åŒçš„ä¸€å®šä¸æ»¡è¶³ä¸ç­‰å…³ç³»</span></span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String[] equations1 = &#123;<span class="string">"c==c"</span>, <span class="string">"b==d"</span>, <span class="string">"x!=z"</span>&#125;;</span><br><span class="line">       </span><br><span class="line">        String[] equations2 = &#123;<span class="string">"a==b"</span>, <span class="string">"b==c"</span>, <span class="string">"a==c"</span>&#125;;</span><br><span class="line">        </span><br><span class="line">        String[] equations3 = &#123;<span class="string">"b==a"</span>, <span class="string">"a!=b"</span>&#125;;</span><br><span class="line">     </span><br><span class="line">        System.out.println(equationsPossible_DFS(equations1)); <span class="comment">// true</span></span><br><span class="line">        System.out.println(equationsPossible_DFS(equations2)); <span class="comment">// true</span></span><br><span class="line">        System.out.println(equationsPossible_DFS(equations3)); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>å¤æ‚åº¦åˆ†æ</p><p>æ—¶é—´å¤æ‚åº¦ï¼š O(N)ï¼Œå…¶ä¸­ Næ˜¯æ–¹ç¨‹ç»„ equations çš„æ•°é‡ã€‚</p><p>ç©ºé—´å¤æ‚åº¦ï¼š O(1ï¼‰ï¼Œè®¤ä¸ºå­—æ¯è¡¨çš„å¤§å°æ˜¯ O(1) çš„ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Algorithm" scheme="https://Castile.github.io/categories/Algorithm/"/>
    
    
      <category term="ç®—æ³•" scheme="https://Castile.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="dfs" scheme="https://Castile.github.io/tags/dfs/"/>
    
      <category term="å¹¶æŸ¥é›†" scheme="https://Castile.github.io/tags/%E5%B9%B6%E6%9F%A5%E9%9B%86/"/>
    
      <category term="ä¸­ç­‰" scheme="https://Castile.github.io/tags/%E4%B8%AD%E7%AD%89/"/>
    
  </entry>
  
  <entry>
    <title>Javaçš„è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±</title>
    <link href="https://castile.github.io/2020/01/28/Java%E7%9A%84%E8%87%AA%E5%8A%A8%E8%A3%85%E7%AE%B1%E5%92%8C%E6%8B%86%E7%AE%B1/"/>
    <id>https://castile.github.io/2020/01/28/Java%E7%9A%84%E8%87%AA%E5%8A%A8%E8%A3%85%E7%AE%B1%E5%92%8C%E6%8B%86%E7%AE%B1/</id>
    <published>2020-01-28T03:57:55.000Z</published>
    <updated>2020-01-28T04:10:07.861Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="è‡ªåŠ¨è£…ç®±æ‹†ç®±"><a class="markdownIt-Anchor" href="#è‡ªåŠ¨è£…ç®±æ‹†ç®±"></a> è‡ªåŠ¨è£…ç®±/æ‹†ç®±</h1><hr><blockquote><p>è‡ªåŠ¨è£…ç®±ï¼šæŒ‡å¼€å‘äººå‘˜å¯ä»¥æŠŠä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹ç›´æ¥èµ‹ç»™å¯¹åº”çš„åŒ…è£…ç±»ã€‚</p><p>è‡ªåŠ¨æ‹†ç®±ï¼šæŒ‡å¼€å‘äººå‘˜å¯ä»¥æŠŠä¸€ä¸ªåŒ…è£…ç±»å¯¹è±¡ç›´æ¥èµ‹ç»™å¯¹åº”çš„åŸºæœ¬æ•°æ®ç±»å‹ã€‚</p></blockquote><h2 id="åŸºæœ¬æ•°æ®ç±»å‹åŒ…è£…ç±»"><a class="markdownIt-Anchor" href="#åŸºæœ¬æ•°æ®ç±»å‹åŒ…è£…ç±»"></a> åŸºæœ¬æ•°æ®ç±»å‹åŒ…è£…ç±»</h2><table><thead><tr><th>åŒ…è£…ç±»</th><th>åŸºæœ¬æ•°æ®ç±»å‹</th></tr></thead><tbody><tr><td>Byte</td><td>byte</td></tr><tr><td>Integer</td><td>int</td></tr><tr><td>Long</td><td>long</td></tr><tr><td>Boolean</td><td>boolean</td></tr><tr><td>Float</td><td>float</td></tr><tr><td>Double</td><td>double</td></tr><tr><td>Character</td><td>char</td></tr><tr><td>å¯¹è±¡å˜åŸºæœ¬æ•°æ®ç±»å‹:æ‹†ç®±</td><td>åŸºæœ¬æ•°æ®ç±»å‹åŒ…è£…ä¸ºå¯¹è±¡:è£…ç®±</td></tr></tbody></table><hr><p>åœ¨ä½¿ç”¨è¿™äº›åŸºæœ¬ç±»å‹å¯¹åº”çš„åŒ…è£…ç±»å‹æ—¶ï¼Œå¦‚æœè¯¥æ•°å€¼èŒƒå›´åœ¨ç¼“å†²æ± èŒƒå›´å†…ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ç¼“å†²æ± ä¸­çš„å¯¹è±¡ã€‚</p><p>Exampleï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo5</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">String str = <span class="string">"12"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å­—ç¬¦ä¸²è½¬æ¢æˆintç±»å‹æ•°æ®ã€‚ å¯ä»¥æŠŠå­—ç¬¦ä¸²è½¬æ¢æˆå¯¹åº”çš„æ•°å­—</span></span><br><span class="line"><span class="keyword">int</span> i = Integer.parseInt(str);</span><br><span class="line">System.out.println(i+<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŠŠæ•°å­—è½¬æ¢æˆå­—ç¬¦ä¸²</span></span><br><span class="line">System.out.println(<span class="string">"æŠŠæ•´æ•°è½¬æ¢æˆå¯¹åº” çš„å­—ç¬¦ä¸²ï¼š"</span>+Integer.toString(i));</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŠŠæ•´æ•°è½¬æ¢æˆå¯¹åº”çš„è¿›åˆ¶å½¢å¼</span></span><br><span class="line">System.out.println(<span class="string">"10çš„äºŒè¿›åˆ¶ï¼š"</span>+ Integer.toBinaryString(<span class="number">10</span>));</span><br><span class="line">System.out.println(<span class="string">"10çš„äºŒè¿›åˆ¶ï¼š"</span>+ Integer.toBinaryString(<span class="number">10</span>));</span><br><span class="line">System.out.println(<span class="string">"10çš„åå…­è¿›åˆ¶ï¼š"</span>+ Integer.toHexString(<span class="number">10</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯ä»¥æŠŠå­—ç¬¦ä¸²å½“æˆå¯¹åº”çš„è¿›è¡Œæ•°æ®å¸®ä½ è½¬æ¢</span></span><br><span class="line">String data = <span class="string">"10"</span>;</span><br><span class="line"><span class="keyword">int</span> a = Integer.parseInt(data, <span class="number">2</span>);</span><br><span class="line">System.out.println(<span class="string">"a="</span>+a);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//é›†åˆï¼š é›†åˆæ˜¯å¯ä»¥å­˜å‚¨ä»»æ„å¯¹è±¡ç±»å‹æ•°æ®çš„å®¹å™¨ã€‚</span></span><br><span class="line">ArrayList list = <span class="keyword">new</span> ArrayList();</span><br><span class="line">list.add(<span class="number">1</span>);</span><br><span class="line">list.add(<span class="number">2</span>);</span><br><span class="line">list.add(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªåŠ¨è£…ç®±ï¼š è‡ªåŠ¨æŠŠjavaçš„åŸºæœ¬æ•°æ®ç±»å‹æ•°æ®è½¬æ¢æˆå¯¹è±¡ç±»å‹æ•°æ®ã€‚</span></span><br><span class="line"><span class="keyword">int</span> temp = <span class="number">10</span>;  <span class="comment">//åŸºæœ¬æ•°æ®ç±»å‹</span></span><br><span class="line">Integer b =temp; <span class="comment">//æŠŠaå­˜å‚¨çš„å€¼èµ‹äºˆç»™bå˜é‡ã€‚</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªåŠ¨æ‹†ç®±ï¼š æŠŠå¼•ç”¨ç±»å‹çš„æ•°æ®è½¬æ¢æˆåŸºæœ¬ç±»å‹çš„æ•°æ®</span></span><br><span class="line">Integer c = <span class="keyword">new</span> Integer(<span class="number">13</span>);</span><br><span class="line"><span class="keyword">int</span> d = c; <span class="comment">//</span></span><br><span class="line">System.out.println(d);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¼•ç”¨çš„æ•°æ®ç±»å‹</span></span><br><span class="line">Integer e = <span class="number">127</span>;</span><br><span class="line">Integer f = <span class="number">127</span>; </span><br><span class="line">System.out.println(<span class="string">"åŒä¸€ä¸ªå¯¹è±¡å—ï¼Ÿ"</span>+(e==f)); <span class="comment">// ture</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>æ³¨æ„ï¼š</p><blockquote><p>Integerç±»å†…éƒ¨ç»´æŠ¤ äº†ç¼“å†²æ•°ç»„ï¼Œè¯¥ç¼“å†²æ•°ç»„å­˜å‚¨çš„-128~127<br>è¿™äº›æ•°æ®åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ã€‚å¦‚æœä½ è·å–çš„æ•°æ®æ˜¯è½å…¥åˆ°è¿™ä¸ªèŒƒå›´ä¹‹å†…çš„ï¼Œé‚£ä¹ˆå°±ç›´æ¥ä»è¯¥ç¼“å†²åŒºä¸­è·å–å¯¹åº”çš„æ•°æ®ã€‚ã€Java8ã€‘</p></blockquote><p>ç¼–è¯‘å™¨ä¼šåœ¨è‡ªåŠ¨è£…ç®±è¿‡ç¨‹è°ƒç”¨ valueOf() æ–¹æ³•ï¼Œå› æ­¤å¤šä¸ªå€¼ç›¸åŒä¸”å€¼åœ¨ç¼“å­˜æ± èŒƒå›´å†…çš„ Integer å®ä¾‹ä½¿ç”¨è‡ªåŠ¨è£…ç®±æ¥åˆ›å»ºï¼Œé‚£ä¹ˆå°±ä¼šå¼•ç”¨ç›¸åŒçš„å¯¹è±¡ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">integer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Integer a = <span class="keyword">new</span> Integer(<span class="number">111</span>);</span><br><span class="line">        Integer b = <span class="keyword">new</span> Integer(<span class="number">111</span>);</span><br><span class="line"></span><br><span class="line">        Integer c = Integer.valueOf(<span class="number">111</span>);</span><br><span class="line">        Integer d = Integer.valueOf(<span class="number">111</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        System.out.println(a == b);</span><br><span class="line">        System.out.println(c == d);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>ç»“æœï¼š false   true</p><blockquote><p>new Integer(123) ä¸ Integer.valueOf(123) çš„åŒºåˆ«åœ¨äºï¼š</p><ul><li>new Integer(123) æ¯æ¬¡éƒ½ä¼šæ–°å»ºä¸€ä¸ªå¯¹è±¡ï¼›</li><li>Integer.valueOf(123) ä¼šä½¿ç”¨ç¼“å­˜æ± ä¸­çš„å¯¹è±¡ï¼Œå¤šæ¬¡è°ƒç”¨ä¼šå–å¾—åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚</li></ul></blockquote><p>çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Hongliang Zhu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020-01-28 11:38</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">integer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Integer a = <span class="keyword">new</span> Integer(<span class="number">160</span>);</span><br><span class="line">        Integer b = <span class="keyword">new</span> Integer(<span class="number">160</span>);</span><br><span class="line"></span><br><span class="line">        Integer c = Integer.valueOf(<span class="number">160</span>);</span><br><span class="line">        Integer d = Integer.valueOf(<span class="number">160</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        System.out.println(a == b);</span><br><span class="line">        System.out.println(c == d);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>ç»“æœä¸ºï¼š false  false</p><p>å› ä¸º160è¶…è¿‡äº†ç¼“å­˜çš„èŒƒå›´ï¼ˆ-128-127ï¼‰ï¼Œæ‰€ä»¥éƒ½æ˜¯ä¸åŒçš„å¯¹è±¡ï¼Œ valueOf() æ–¹æ³•çš„å®ç°æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯å…ˆåˆ¤æ–­å€¼æ˜¯å¦åœ¨ç¼“å­˜æ± ä¸­ï¼Œå¦‚æœåœ¨çš„è¯å°±ç›´æ¥è¿”å›ç¼“å­˜æ± çš„å†…å®¹ã€‚ å¦‚æœä¸åœ¨ç¼“å­˜æ± ä¸­ï¼Œåˆ™ä¼šnewä¸€ä¸ªIntegerå¯¹è±¡ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title">valueOf</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)</span><br><span class="line">           <span class="keyword">return</span> IntegerCache.cache[i + (-IntegerCache.low)];</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> Integer(i);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></div><p><strong>çœ‹æºç ï¼š</strong></p><hr><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">IntegerCache</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> low = -<span class="number">128</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> high;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> Integer cache[];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">// high value may be configured by property</span></span><br><span class="line">        <span class="keyword">int</span> h = <span class="number">127</span>;</span><br><span class="line">        String integerCacheHighPropValue =</span><br><span class="line">            sun.misc.VM.getSavedProperty(<span class="string">"java.lang.Integer.IntegerCache.high"</span>);</span><br><span class="line">        <span class="keyword">if</span> (integerCacheHighPropValue != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">int</span> i = parseInt(integerCacheHighPropValue);</span><br><span class="line">                i = Math.max(i, <span class="number">127</span>);</span><br><span class="line">                <span class="comment">// Maximum array size is Integer.MAX_VALUE</span></span><br><span class="line">                h = Math.min(i, Integer.MAX_VALUE - (-low) -<span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span>( NumberFormatException nfe) &#123;</span><br><span class="line">                <span class="comment">// If the property cannot be parsed into an int, ignore it.</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        high = h;</span><br><span class="line"></span><br><span class="line">        cache = <span class="keyword">new</span> Integer[(high - low) + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span> j = low;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; cache.length; k++)</span><br><span class="line">            cache[k] = <span class="keyword">new</span> Integer(j++);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// range [-128, 127] must be interned (JLS7 5.1.7)</span></span><br><span class="line">        <span class="keyword">assert</span> IntegerCache.high &gt;= <span class="number">127</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">IntegerCache</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>â€‹ åœ¨ jdk 1.8 æ‰€æœ‰çš„æ•°å€¼ç±»ç¼“å†²æ± ä¸­ï¼ŒInteger çš„ç¼“å†²æ±  IntegerCache å¾ˆç‰¹æ®Šï¼Œè¿™ä¸ªç¼“å†²æ± çš„ä¸‹ç•Œæ˜¯ - 128ï¼Œä¸Šç•Œé»˜è®¤æ˜¯ 127ï¼Œä½†æ˜¯è¿™ä¸ªä¸Šç•Œæ˜¯å¯è°ƒçš„ï¼Œåœ¨å¯åŠ¨ jvm çš„æ—¶å€™ï¼Œé€šè¿‡ -XX:AutoBoxCacheMax=<size> æ¥æŒ‡å®šè¿™ä¸ªç¼“å†²æ± çš„å¤§å°ï¼Œè¯¥é€‰é¡¹åœ¨ JVM åˆå§‹åŒ–çš„æ—¶å€™ä¼šè®¾å®šä¸€ä¸ªåä¸º java.lang.IntegerCache.high ç³»ç»Ÿå±æ€§ï¼Œç„¶å IntegerCache åˆå§‹åŒ–çš„æ—¶å€™å°±ä¼šè¯»å–è¯¥ç³»ç»Ÿå±æ€§æ¥å†³å®šä¸Šç•Œã€‚</size></p><h2 id="å‚è€ƒ"><a class="markdownIt-Anchor" href="#å‚è€ƒ"></a> å‚è€ƒ</h2><ol><li>[<a href="https://cyc2018.github.io/CS-Notes/#/notes/Java%20%E5%9F%BA%E7%A1%80" target="_blank" rel="noopener">https://cyc2018.github.io/CS-Notes/#/notes/Java åŸºç¡€</a>](<a href="https://cyc2018.github.io/CS-Notes/#/notes/Java" target="_blank" rel="noopener">https://cyc2018.github.io/CS-Notes/#/notes/Java</a> åŸºç¡€)</li><li><a href="https://blog.csdn.net/Castile_zhu/article/details/78822267" target="_blank" rel="noopener">https://blog.csdn.net/Castile_zhu/article/details/78822267</a></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Java" scheme="https://Castile.github.io/categories/Java/"/>
    
    
      <category term="Java" scheme="https://Castile.github.io/tags/Java/"/>
    
      <category term="javaåŸºç¡€" scheme="https://Castile.github.io/tags/java%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>leetcode-684-å†—ä½™è¿æ¥</title>
    <link href="https://castile.github.io/2020/01/27/leetcode-684-%E5%86%97%E4%BD%99%E8%BF%9E%E6%8E%A5/"/>
    <id>https://castile.github.io/2020/01/27/leetcode-684-%E5%86%97%E4%BD%99%E8%BF%9E%E6%8E%A5/</id>
    <published>2020-01-27T03:17:36.000Z</published>
    <updated>2020-01-27T03:24:39.172Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="æè¿°"><a class="markdownIt-Anchor" href="#æè¿°"></a> æè¿°</h2><blockquote><p>Leetcode684:RedundantConnection å†—ä½™è¿æ¥â‘ ï¼š</p><p>åœ¨æœ¬é—®é¢˜ä¸­, æ ‘æŒ‡çš„æ˜¯ä¸€ä¸ªè¿é€šä¸”æ— ç¯çš„æ— å‘å›¾ã€‚</p><p>è¾“å…¥ä¸€ä¸ªå›¾ï¼Œè¯¥å›¾ç”±ä¸€ä¸ªæœ‰ç€Nä¸ªèŠ‚ç‚¹ (èŠ‚ç‚¹å€¼ä¸é‡å¤1, 2, â€¦, N) çš„æ ‘åŠä¸€æ¡é™„åŠ çš„è¾¹æ„æˆã€‚é™„åŠ çš„è¾¹çš„ä¸¤ä¸ªé¡¶ç‚¹åŒ…å«åœ¨1åˆ°Nä¸­é—´ï¼Œè¿™æ¡é™„åŠ çš„è¾¹ä¸å±äºæ ‘ä¸­å·²å­˜åœ¨çš„è¾¹ã€‚</p><p>ç»“æœå›¾æ˜¯ä¸€ä¸ªä»¥è¾¹ç»„æˆçš„äºŒç»´æ•°ç»„ã€‚æ¯ä¸€ä¸ªè¾¹çš„å…ƒç´ æ˜¯ä¸€å¯¹[u, v] ï¼Œæ»¡è¶³ u &lt; vï¼Œè¡¨ç¤ºè¿æ¥é¡¶ç‚¹u å’Œvçš„æ— å‘å›¾çš„è¾¹ã€‚</p><p>è¿”å›ä¸€æ¡å¯ä»¥åˆ å»çš„è¾¹ï¼Œä½¿å¾—ç»“æœå›¾æ˜¯ä¸€ä¸ªæœ‰ç€Nä¸ªèŠ‚ç‚¹çš„æ ‘ã€‚å¦‚æœæœ‰å¤šä¸ªç­”æ¡ˆï¼Œåˆ™è¿”å›äºŒç»´æ•°ç»„ä¸­æœ€åå‡ºç°çš„è¾¹ã€‚ç­”æ¡ˆè¾¹ [u, v] åº”æ»¡è¶³ç›¸åŒçš„æ ¼å¼ u &lt; vã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><p>è¾“å…¥: [[1,2], [1,3], [2,3]]<br>è¾“å‡º: [2,3]<br>è§£é‡Š: ç»™å®šçš„æ— å‘å›¾ä¸º:<br>1<br>/ <br>2 - 3<br>ç¤ºä¾‹ 2ï¼š</p><p>è¾“å…¥: [[1,2], [2,3], [3,4], [1,4], [1,5]]<br>è¾“å‡º: [1,4]<br>è§£é‡Š: ç»™å®šçš„æ— å‘å›¾ä¸º:<br>5 - 1 - 2<br>|   |<br>4 - 3<br>æ³¨æ„:</p><p>è¾“å…¥çš„äºŒç»´æ•°ç»„å¤§å°åœ¨ 3 åˆ° 1000ã€‚<br>äºŒç»´æ•°ç»„ä¸­çš„æ•´æ•°åœ¨1åˆ°Nä¹‹é—´ï¼Œå…¶ä¸­Næ˜¯è¾“å…¥æ•°ç»„çš„å¤§å°ã€‚<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/redundant-connection" target="_blank" rel="noopener">https://leetcode-cn.com/problems/redundant-connection</a></p></blockquote><h2 id="åˆ†æ"><a class="markdownIt-Anchor" href="#åˆ†æ"></a> åˆ†æ</h2><p>å¹¶æŸ¥é›†çš„åº”ç”¨ï¼š</p><a href="/2020/01/27/leetcode-684-%E5%86%97%E4%BD%99%E8%BF%9E%E6%8E%A5/1580095232083.png" data-fancybox="group" data-caption="æ—¶é—´å¤æ‚åº¦åˆ†æ" class="fancybox"><img alt="æ—¶é—´å¤æ‚åº¦åˆ†æ" style="zoom:80%;" align="center" data-src="/2020/01/27/leetcode-684-%E5%86%97%E4%BD%99%E8%BF%9E%E6%8E%A5/1580095232083.png" class="lazyload" title="æ—¶é—´å¤æ‚åº¦åˆ†æ"></a><p>ç›´æ¥çœ‹ä»£ç ï¼Œä¸€æ¬¡AC</p><h2 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Hongliang Zhu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020-01-27 10:17</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Leetcode684:RedundantConnection å†—ä½™è¿æ¥â‘ </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">leetcode684_RedundantConnection</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] findRedundantConnection(<span class="keyword">int</span>[][] edges) &#123;</span><br><span class="line">        <span class="keyword">if</span>(edges == <span class="keyword">null</span> || edges.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">int</span> n = edges.length;</span><br><span class="line">        System.out.println(n);</span><br><span class="line">        UF uf = <span class="keyword">new</span> UF(n+<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span>[] edge: edges)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!uf.isSameSet(edge[<span class="number">0</span>], edge[<span class="number">1</span>]))&#123;</span><br><span class="line">                uf.union(edge[<span class="number">0</span>], edge[<span class="number">1</span>]);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> edge;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> [][]edges = &#123;&#123; <span class="number">1</span>,<span class="number">2</span> &#125;,&#123;<span class="number">1</span>,<span class="number">3</span>&#125;,&#123; <span class="number">2</span>,<span class="number">3</span>&#125;&#125;;</span><br><span class="line">        <span class="keyword">int</span> []res = findRedundantConnection(edges);</span><br><span class="line"></span><br><span class="line">        System.out.println(Arrays.toString(res));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Algorithm" scheme="https://Castile.github.io/categories/Algorithm/"/>
    
    
      <category term="ç®—æ³•" scheme="https://Castile.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="å¹¶æŸ¥é›†" scheme="https://Castile.github.io/tags/%E5%B9%B6%E6%9F%A5%E9%9B%86/"/>
    
      <category term="ä¸­ç­‰" scheme="https://Castile.github.io/tags/%E4%B8%AD%E7%AD%89/"/>
    
  </entry>
  
</feed>
